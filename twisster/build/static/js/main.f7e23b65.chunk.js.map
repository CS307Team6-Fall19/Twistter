{"version":3,"sources":["logo192.png","TopBarLoginSignup/TopBarLoginSignupView.js","TopBarLoginSignup/index.js","Home.js","base.js","LogIn/LogInView.js","LogIn/index.js","SignUp/SignUpView.js","SignUp/index.js","MicroblogBox/index.js","MicroblogWriter/MicroblogWriterView.js","DataObjects/UserData.js","helperfunctions.js","MicroblogWriter/index.js","AutoCompleteSearchBar/AutoCompleteSearchBar.js","TopBar/TopBarView.js","TopBar/index.js","Microblog/MicroblogView.js","Topic/TopicView.js","Topic/TopicHighlightedView.js","Topic/index.js","Topics/TopicsBox.js","Microblog/index.js","Topics/index.js","Microblogs/index.js","Landing/index.js","LandingPage/index.js","ProfilePage/checkBox.js","ProfilePage/checkBox.jsx","ProfilePicture/ProfilepicView.js","ProfilePicture/NewProfilepicView.js","ProfilePicture/VisitedProfilepic.js","User/UserProfileViews/VisitedUserView.js","ProfilePicture/index.js","User/UserProfileViews/LoggedInUserView.js","User/UserProfileViews/LoggedInUserEditView.js","User/index.js","ProfilePage/ProfilePageView.js","ProfilePage/index.js","ProfilePageRouting.js","DeleteAccountAuthentication/DeleteAccountAuthenticationView.js","DeleteAccountAuthentication/index.js","Chat/Messages.js","Chat/Input.js","Chat/index.js","App.js","serviceWorker.js","index.js","assets/twisster_logo.png"],"names":["module","exports","TopBarTwissterLoginSignup","className","TopBarLoginSignup","props","React","Component","withRouter","Home","goLogIn","event","a","history","push","pathname","goSignUp","onClick","this","app","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","MainLogo","src","logo","children","MainName","CenterUiBox","EmailField","name","placeholder","onFocus","e","target","onBlur","PasswordField","type","focus","LogInView","onSubmit","Button","variant","LogInContainer","handleLogIn","preventDefault","elements","email","password","user_exists","database","ref","once","snapshot","user_email_list","child","val","value","includes","undefined","username_or_email","key","toast","containerId","auth","signInWithEmailAndPassword","user","emailVerified","currentUser","sendEmailVerification","url","handleCodeInApp","then","console","log","catch","error","bind","color","enableMultiContainer","position","POSITION","TOP_RIGHT","SignupEmail","ReturnToLogin","SignupUsername","SignupPassword","SignUpView","SignUpContainer","handleSignUp","username","username_exists","createUserWithEmailAndPassword","username_email_combo","update","username_uid_combo","uid","uid_username_combo","actionCodeSettings","message","date","Date","timestamp","getTime","set","signupTimestamp","picture","signOut","goLogin","MicroblogBox","MicroblogWriterView","createMuiTheme","palette","primary","green","secondary","main","style","height","image","flex","id","handle","NewTweet","rows","multiline","margin","ListedTopics","disableUnderline","disabled","label","addTopic","minHeight","AddTopics","width","endAdornment","InputAdornment","AddTopic","aria-label","PostButton","size","submitMicroblog","withStyles","theme","root","input","Input","backgroundColor","IconButton","blue","top","left","Fab","fontStyle","TextField","NewTweetBox","Image","alt","Handle","Name","UserData","loggedIn","viewingOwnProfile","helperfunctions","retrieveUserUid","uid_follow","retrieveUserEmail","retrieveUsername","mapUIDtoUsername","addMicroBlogToCurrentUser","content","topics","uid_current","length","wTopics","index","writtenTopics","w","topicsList","userLikes","microblog","microblog_list","resolve","likeMicroblog","UIDofUserIAmViewing","forEach","countLikes","numLikes","unlikeMicroblog","indexOf","splice","getBio","uid_val","bio_cont","bio_text","getFollowersAndFollowing","usersTheUserIsFollowing","followersTheUserHas","followers","i","following","result","followUserIAmViewing","currUserUID","currUserName","followedUserName","followedUserUID","usersIAmFollowing","followersOfUserIamFollowing","hasChild","usersList","unfollowUserIAmViewing","remove","addBlockedUser","blockedUsers","blockedList","currBlockedList","uid_blocked","blockedFromList","removeBlockedUser","newBlockedFromList","r","getBlockedUser","getUsersBlockedFrom","blockedFrom","addAndRemoveTopicsFromFollowedUser","topicsFollow","topicsUnFollow","getFollowedAndUnfollowedTopics","tList","v","followedTopics","followedTopicsList","unfollowedTopics","postCurrentUserBio","deleteUserData","followingUsers","followedUsers","followerUid","followingUserUid","followerlist","delete","getMicroblogsForUserTimeline","Microblogs","mapUsernameToUID","uidOfUser","childSnapshot","followedUsername","uidOfFollowedUser","microblogs","followingTimestampOfFollowedUser","currMicroblog","foundNewTopic","t","j","sort","m1","m2","getMicroblogsForCurrentUser","getMicroblogsForUser","getUserdataOfLoggedInUser","onAuthStateChanged","getUserdataOfUser","userData","MicroblogWriter","microblogData","Object","microblogPosted","numTopics","document","getElementById","AutoCompleteSearchBar","onTextChanged","items","suggestions","regex","RegExp","filter","test","setState","text","state","clickoption","searchForUser","checkIfFocused","changeFocus","keyPress","map","item","onMouseDown","suggestionSelected","userexists","keyCode","onKeyDown","onChange","renderSuggestions","ColorButton","getContrastText","TopBarTwisster","getAllUsernames","getCurrentUsername","goToProfile","goLogout","goToChat","goToLanding","fontSize","TopBar","topBar","user_list","all_users","StyledBadge1","badge","right","border","background","paper","padding","Badge","theid","Tweet","tweet","Topics","MicroblogView","unitid","likeButtonClicked","badgeContent","likeButtonText","TopicView","TopicHighlightedView","Topic","topic","data","highlight","TopicsBox","Microblog","counter","blogid","fetchImage","like","liked","strangeruid","picname","picname2","toMatch","storage","getDownloadURL","toReturn","querySelectorAll","code","nullLiteral","createMicroblogs","microblogsArray","Landing","loaded","editMode","updateMicroblogs","LandingPage","checkboxes","Checkbox","checked","CheckboxContainer","checkedItems","Map","handleChange","save","isChecked","prevState","checkbox_new","unFollowedTopics","entries","k","Fragment","get","ProfilepicView","changeProfPic","deletePic","thename","NewProfilepicView","VisitedProfilepic","VisitedUserView","userProfile","followersAndFollowing","followUser","dmUser","blockUser","bio","ProfilePicture","uploadImage","inpFile","file","files","put","response","toUpload","forceUpdate","deletePicture","strangername","visiting","upLoadImage","changePic","toRet","querySelector","visiterImage","LoggedInUserView","deleteAccount","editProfile","marginLeft","LoggedInUserEditView","saveChanges","User","loggedInViewingOwnProfile","followOrUnfollowUser","directMessageUser","renderLoggedInUser","renderVisitedUser","mustUpdate","textContent","follow","dmUsername","downloadUserProfile","usersBlockedFrom","prevProps","userID","fetchData","ProfilePageView","ProfilePage","localProps","setUsername","UIDtoUsername","location","path","substring","ProfilePageRouting","DeleteAccountAuthenticationView","DeleteAcountAuthenticationContainter","currentEmail","currentUsername","valid_password","Messages","messages","m","renderMessage","member","currentMember","onSendMessage","autofocus","randomColor","Math","floor","random","toString","Chat","retrievedUnseenDMUsers","otherUID","appendMessageFromMe","setTimeout","innerHTML","element","scrollTop","scrollHeight","userButtonClick","updateUserName","getUsernameOfOtherUser","retrievedDMUsers","keys","addButton","changeButtonColor","buttons","getElementsByTagName","len","addEventListener","mouseEvt","toElement","button","appendChild","createElement","outerHTML","buttonID","inputUsername","otherUIDRetrieved","currBlocked","getUsersBlocked","setPlaceholderInputBar","currentRetrievedData","removeUserFromUnseenList","fillWithPreviousMessages","listenToPersistantMessages","listenToUsersBlockedFrom","listenToUnseenUsersDM","retrievedData","substr","appendMessageFromOtherUser","inputText","adjustData","member2","on","configure","App","exact","component","Login","SignUp","DeleteAccountAuthentication","Boolean","window","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f7e23b65.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React from \"react\";\r\nimport './TopBar.css'\r\n\r\nconst TopBarTwissterLoginSignup = () => {\r\n    return (\r\n      <div className=\"inner-body\">\r\n        <label className=\"top-bar-twisster\" >Twistter</label>\r\n        {/* <input className=\"top-bar-search\" placeholder=\"Search\"/>\r\n        <button className=\"top-bar-button\" type=\"button\" onClick={onClickProfile}>Go to your profile</button>  */}   \r\n      </div>\r\n    )\r\n}\r\nexport default TopBarTwissterLoginSignup;\r\n","import TopBarTwissterLoginSignup from './TopBarLoginSignupView'\r\nimport React, { PureComponent } from 'react'\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport firebase from \"firebase\";\r\nclass TopBarLoginSignup extends React.Component{\r\n\r\n    constructor(props) {\r\n  \r\n      super(props);\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"top-bar\">\r\n                <TopBarTwissterLoginSignup  />\r\n            </div>\r\n          )\r\n    }\r\n}\r\nexport default withRouter(TopBarLoginSignup);","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport TopBarLoginSignup from \"./TopBarLoginSignup\"\r\n\r\n\r\nclass Home extends Component {\r\n\r\n  goLogIn = async event => {\r\n    \r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  goSignUp = async event => {\r\n\r\n    this.props.history.push({\r\n      pathname: '/signup'\r\n    })\r\n  };\r\n \r\n  render() {\r\n    return (\r\n      <div>\r\n        <TopBarLoginSignup />\r\n        <h1>Home</h1>\r\n        <form>\r\n        <button onClick={this.goLogIn}>Login</button>\r\n        <button onClick={this.goSignUp}>Signup</button>\r\n        </form>\r\n      </div>\r\n  );\r\n  }\r\n  \r\n}\r\n\r\nexport default withRouter(Home);\r\n\r\n","import firebase from \"firebase\";\r\n\r\nconst app = firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: 'gs://twistter.appspot.com/',\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n    \r\n});\r\n\r\nexport default app;","import React from \"react\";\r\nimport \"./LoginView.css\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport logo from \"../assets/twisster_logo.png\";\r\n\r\nconst MainLogo = props => {\r\n  return (\r\n    <img className=\"logo-twisster\" src={logo}>\r\n      {props.children}\r\n    </img>\r\n  );\r\n};\r\n\r\nconst MainName = props => {\r\n  return <label className=\"name-twisster\">twisster</label>;\r\n};\r\n\r\nconst CenterUiBox = props => {\r\n  return <div className=\"login-prompt\">{props.children}</div>;\r\n};\r\n\r\nconst EmailField = props => {\r\n  return (\r\n    <input\r\n      name=\"email\"\r\n      className=\"login-textbox\"\r\n      placeholder=\"Email/Username\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Email/Username\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst PasswordField = props => {\r\n  return (\r\n    <input\r\n      name=\"password\"\r\n      className=\"password-textbox\"\r\n      type=\"password\"\r\n      placeholder=\"Password\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Password\")}\r\n      focus\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst LogInView = ({ onSubmit, onClick }) => {\r\n  return (\r\n    <div className=\"main-body\">\r\n      <div className=\"body\">\r\n        <CenterUiBox>\r\n          {/* <h1>Login</h1> */}\r\n          <MainLogo></MainLogo>\r\n          <MainName></MainName>\r\n          <form onSubmit={onSubmit}>\r\n            <EmailField />\r\n            <PasswordField />\r\n            <Button\r\n              className=\"login-button\"\r\n              variant=\"outline-dark\"\r\n              type=\"submit\"\r\n            >\r\n              <span>Login </span>\r\n            </Button>\r\n          </form>\r\n          <Button\r\n            className=\"signup-button\"\r\n            variant=\"outline-dark\"\r\n            type=\"submit\"\r\n            onClick={onClick}\r\n          >\r\n            <span>Sign Up </span>\r\n          </Button>\r\n        </CenterUiBox>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogInView;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport app from \"../base\";\r\nimport TopBarLoginSignup from \"../TopBarLoginSignup\";\r\n\r\nimport LogInView from \"./LogInView\";\r\nimport firebase from \"firebase\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n// goLogIn = async event => {\r\n\r\n//   this.props.history.push({\r\n//     pathname: \"/login\"\r\n//   });\r\n// };\r\n\r\nclass LogInContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleLogIn = this.handleLogIn.bind(this);\r\n    this.goSignUp = this.goSignUp.bind(this);\r\n  }\r\n\r\n  handleLogIn = async event => {\r\n    event.preventDefault();\r\n    const { email, password } = event.target.elements;\r\n    try {\r\n      var user_exists = true;\r\n      var username_or_email;\r\n      await app\r\n        .database()\r\n        .ref()\r\n        .once(\"value\", snapshot => {\r\n          var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n          if (email.value.includes(\"@\") != true) {\r\n            if (user_email_list[email.value] == undefined) {\r\n              user_exists = false;\r\n            }\r\n            username_or_email = user_email_list[email.value];\r\n          } else {\r\n            username_or_email = email.value;\r\n            user_exists = false;\r\n            var value;\r\n            for (var key in user_email_list) {\r\n              value = user_email_list[key];\r\n              if (value == email.value) {\r\n                user_exists = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n      if (!user_exists) {\r\n        toast(\"User Account does not exist\");\r\n        toast(\"User Account does not exist\", { containerId: \"B\" });\r\n        return;\r\n      }\r\n\r\n      this.user = await app\r\n        .auth()\r\n        .signInWithEmailAndPassword(username_or_email, password.value);\r\n\r\n      if (!this.user.user.emailVerified) {\r\n        toast(\"email is not verified! resending verification link...\");\r\n        firebase\r\n          .auth()\r\n          .currentUser.sendEmailVerification({\r\n            url: \"http://localhost:3000/login\",\r\n            handleCodeInApp: true\r\n          })\r\n          .then(function() {\r\n            console.log(\"sent verification email\");\r\n          })\r\n          .catch(function(error) {\r\n            toast(error);\r\n          });\r\n        return;\r\n      }\r\n\r\n      this.props.history.push({\r\n        pathname: \"/landing\"\r\n      });\r\n    } catch (error) {\r\n      toast(error);\r\n    }\r\n  };\r\n\r\n  goSignUp = async event => {\r\n    this.props.history.push({\r\n      pathname: \"/signup\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ToastContainer\r\n          color=\"danger\"\r\n          enableMultiContainer\r\n          containerId={\"B\"}\r\n          position={toast.POSITION.TOP_RIGHT}\r\n        />\r\n\r\n        {/* <TopBarLoginSignup /> */}\r\n        <LogInView onSubmit={this.handleLogIn} onClick={this.goSignUp} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(LogInContainer);\r\n","import React from \"react\";\r\nimport \"./SignUp.css\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport logo from \"../assets/twisster_logo.png\";\r\n\r\nconst MainLogo = props => {\r\n  return (\r\n    <img className=\"logo-twisster\" src={logo}>\r\n      {props.children}\r\n    </img>\r\n  );\r\n};\r\n\r\nconst MainName = props => {\r\n  return <label className=\"name-twisster\">twisster</label>;\r\n};\r\n\r\nconst SignupEmail = props => {\r\n  return (\r\n    <input\r\n      name=\"email\"\r\n      className=\"s_email-textbox\"\r\n      placeholder=\"Email\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Email\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst ReturnToLogin = props => {\r\n  return (\r\n    <div>\r\n      <label className=\"return-login\">\r\n        Already a member?\r\n        <button\r\n          type=\"submit\"\r\n          className=\"return-login_b\"\r\n          onClick={props.onClick}\r\n        >\r\n          Login\r\n        </button>\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SignupUsername = props => {\r\n  return (\r\n    <input\r\n      name=\"username\"\r\n      className=\"s_username-textbox\"\r\n      placeholder=\"Username\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Username\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst SignupPassword = props => {\r\n  return (\r\n    <input\r\n      name=\"password\"\r\n      type=\"password\"\r\n      className=\"s_password-textbox\"\r\n      placeholder=\"Password\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Password\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst CenterUiBox = props => {\r\n  return <div className=\"s_login-prompt\">{props.children}</div>;\r\n};\r\n\r\nconst SignUpView = ({ onSubmit, onClick }) => {\r\n  return (\r\n    <CenterUiBox>\r\n      <form onSubmit={onSubmit}>\r\n        <MainLogo></MainLogo>\r\n        <MainName></MainName>\r\n        <SignupEmail />\r\n        <SignupUsername />\r\n        <SignupPassword />\r\n        <Button\r\n          className=\"s_signup-button\"\r\n          variant=\"outline-dark\"\r\n          type=\"submit\"\r\n        >\r\n          <span>Sign Up </span>\r\n        </Button>\r\n      </form>\r\n      <ReturnToLogin onClick={onClick} />\r\n    </CenterUiBox>\r\n  );\r\n};\r\n\r\nexport default SignUpView;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport firebase from \"firebase\";\r\nimport SignUpView from \"./SignUpView\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nclass SignUpContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.goLogin = this.goLogin.bind(this);\r\n  }\r\n\r\n  handleSignUp = async event => {\r\n    event.preventDefault();\r\n    const { email, username, password } = event.target.elements;\r\n    try {\r\n      //check to see if email, and username is a unique combination\r\n      var username_exists = false;\r\n      await firebase\r\n        .database()\r\n        .ref()\r\n        .once(\"value\", snapshot => {\r\n          var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n          if (user_email_list != undefined) {\r\n            if (user_email_list[username.value] != undefined) {\r\n              toast(\"Username already exists\");\r\n              username_exists = true;\r\n            }\r\n          }\r\n        });\r\n\r\n      if (username_exists == true) {\r\n        return;\r\n      }\r\n\r\n      //if email and password are unique, make a new user\r\n      const user = await firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email.value, password.value);\r\n\r\n      //if successful, add username / email combination to database\r\n      let username_email_combo = {};\r\n      username_email_combo[username.value] = email.value;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUsernameToEmail\")\r\n        .update(username_email_combo);\r\n\r\n      //add username / uid combination to database\r\n      let username_uid_combo = {};\r\n      username_uid_combo[username.value] = firebase.auth().currentUser.uid;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUsernameToUID\")\r\n        .update(username_uid_combo);\r\n\r\n      //add uid / username combination to database\r\n      let uid_username_combo = {};\r\n      uid_username_combo[firebase.auth().currentUser.uid] = username.value;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUIDtoUsername\")\r\n        .update(uid_username_combo);\r\n\r\n      //set redirect page\r\n      var actionCodeSettings = {\r\n        url: \"http://localhost:3000/login\",\r\n        handleCodeInApp: true\r\n      };\r\n\r\n      //send verification email\r\n      firebase\r\n        .auth()\r\n        .currentUser.sendEmailVerification(actionCodeSettings)\r\n        .then(function() {\r\n          console.log(\"sent verification email\");\r\n        })\r\n        .catch(function(error) {\r\n          toast(error.message);\r\n        });\r\n\r\n      //add timestamp for when they first signed up (used for automatic deletion)\r\n      var date = new Date();\r\n      var timestamp = date.getTime();\r\n\r\n      //create a new user from the data and set default fields and arrays\r\n      var database = firebase.database();\r\n      var newUserRef = database\r\n        .ref()\r\n        .child(\"users\")\r\n        .child(firebase.auth().currentUser.uid);\r\n      newUserRef.set({ email: email.value, signupTimestamp: timestamp, picture: \"default.jpg\" });\r\n\r\n      firebase.auth().signOut();\r\n\r\n      this.props.history.push(\"/login\");\r\n    } catch (error) {\r\n      toast(error.message);\r\n    }\r\n  };\r\n\r\n  goLogin = async event => {\r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"main-body\">\r\n        <SignUpView onSubmit={this.handleSignUp} onClick={this.goLogin} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(SignUpContainer);\r\n","import React, { Component } from \"react\";\r\nimport \"./Landing.css\";\r\nclass MicroblogBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"tweet-body\">{this.props.children}</div>;\r\n  }\r\n}\r\nexport default MicroblogBox;\r\n","import React from \"react\";\r\nimport MicroblogBox from \"../MicroblogBox\";\r\nimport \"./Landing.css\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport { green, blue, purple } from \"@material-ui/core/colors\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport { Icon } from \"@material-ui/core\";\r\nimport { width } from \"@material-ui/system\";\r\n\r\nconst styles = {\r\n  multilineColor: {\r\n    color: \"red\"\r\n  },\r\n  input: {\r\n    color: \"white\",\r\n    currentColor: \"white\"\r\n  }\r\n};\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: green,\r\n    secondary: {\r\n      main: \"#1F3648\"\r\n    }\r\n  }\r\n});\r\n\r\nconst MicroblogWriterView = props => {\r\n  return (\r\n    <NewTweetBox>\r\n      <div className=\"inner-body\" style={{ height: \"80%\" }}>\r\n        <Image image={props.image} />\r\n        <div className=\"body\" style={{ flex: \"0 0 456px\" }}>\r\n          <div className=\"inner-body\">\r\n            <Name name={props.name} id=\"name\" />\r\n            <Handle handle={props.handle} />\r\n          </div>\r\n          <div className=\"body\">\r\n            {/* <textarea id=\"content\" className=\"new-tweet\" placeholder=\"Hello\" /> */}\r\n\r\n            <NewTweet\r\n              id=\"content\"\r\n              placeholder=\"How are you feeling today?\"\r\n              rows=\"5\"\r\n              multiline\r\n              margin=\"dense\"\r\n              variant=\"standard\"\r\n              color=\"primary\"\r\n            />\r\n            <ListedTopics\r\n              disableUnderline\r\n              disabled\r\n              id=\"showTopics\"\r\n              label=\"Added Topics\"\r\n              placeholder=\"Added Topics Show Up Here\"\r\n              onSubmit={props.addTopic}\r\n              variant=\"standard\"\r\n            />\r\n\r\n            {/* <textarea\r\n              disabled\r\n              id=\"showTopics\"\r\n              className=\"added-topic\"\r\n              placeholder=\"Topics Listed Here\"\r\n            /> */}\r\n          </div>\r\n          <div className=\"body\" style={{ minHeight: \"48px\" }}>\r\n            <div className=\"inner-body\">\r\n              <AddTopics\r\n                id=\"addTopics\"\r\n                style={{ width: \"300px\" }}\r\n                placeholder=\"Add Topics Here\"\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <AddTopic aria-label=\"add\" onClick={props.addTopic}>\r\n                      <AddIcon />\r\n                    </AddTopic>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n              <PostButton\r\n                size=\"large\"\r\n                variant=\"extended\"\r\n                onClick={props.submitMicroblog}\r\n                color=\"secondary\"\r\n              >\r\n                Post\r\n                <SendIcon style={{ margin: \"0px 10px 0px\" }} />\r\n              </PostButton>\r\n\r\n              {/* <button type=\"submit\" onClick={props.addTopic}>\r\n              Add New Topics\r\n            </button> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </NewTweetBox>\r\n  );\r\n};\r\nconst ListedTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    \"&::placeholder\": {\r\n      color: \"gray\"\r\n    },\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nconst AddTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nconst AddTopic = withStyles(theme => ({\r\n  root: {\r\n    backgroundColor: \"transparent\"\r\n  }\r\n}))(IconButton);\r\n\r\nconst PostButton = withStyles(theme => ({\r\n  root: {\r\n    backgroundColor: blue[800],\r\n    top: \"-20px\",\r\n    left: \"2%\"\r\n  }\r\n}))(Fab);\r\n\r\nconst NewTweet = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"14px 12px 4px\"\r\n  },\r\n  \"&::placeholder\": {\r\n    fontStyle: \"italic\"\r\n  },\r\n  multiline: {\r\n    input: {\r\n      color: \"white\"\r\n    }\r\n  }\r\n}))(TextField);\r\n\r\nconst NewTweetBox = props => {\r\n  return <div className=\"new-tweet-body\">{props.children}</div>;\r\n};\r\n\r\nconst Image = image => {\r\n  return <img src={image} id=\"img3\" alt=\"Logo\" className=\"picture\"></img>;\r\n};\r\n\r\nconst Handle = props => {\r\n  return <div className=\"handle\">{props.handle}</div>;\r\n};\r\n\r\nconst Name = props => {\r\n  return <div className=\"name\">{props.name}</div>;\r\n};\r\nexport { MicroblogWriterView };\r\n","class UserData{  \r\n\r\n    constructor(username, loggedIn, viewingOwnProfile){\r\n        this.username = username;\r\n        this.viewingOwnProfile = viewingOwnProfile;\r\n        this.loggedIn = loggedIn;\r\n    }\r\n\r\n    getUsername(){\r\n        return this.username;\r\n    }\r\n\r\n    getUid(){\r\n        return this.uid;\r\n    }\r\n}\r\nexport default UserData;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport ReactDOM from 'react-dom';\r\nimport firebase from \"firebase\";\r\nimport { resolve } from \"dns\";\r\nimport UserData from \"./DataObjects/UserData\";\r\nimport { isFlowDeclaration } from \"@babel/types\";\r\n/*\r\nTODO\r\nHow to use this class:\r\n\r\n*/\r\nconst helperfunctions =\r\n    {\r\n    //Create a new user\r\n    // //@Params\r\n    // //email: user's email\r\n    // //username: user's username\r\n    // //password: user's password\r\n    // createNewUser(email, username, password)\r\n    // {\r\n    //     console.log(\"Entered createNewUser\");\r\n    //     //create email and password\r\n    //     const user = await firebase.auth().createUserWithEmailAndPassword(email.value, password.value);\r\n    //     //update username:email combo\r\n    //     let username_email_combo = {};\r\n    //     username_email_combo[username.value] = email.value;\r\n    //     firebase.database.ref().child('mapUsernameToEmail').update(username_email_combo);\r\n    //     //update username:uid combo\r\n    //     let username_uid_combo = {};\r\n    //     username_uid_combo[username.value] = uid.value;\r\n    //     firebase.database.ref().child('mapUsernameToUid').update(username_uid_combo);\r\n    //     console.log(\"Exited createNewUser\");\r\n    // }\r\n\r\n    //Description: Retrieve uid of a specific user\r\n    //@Params\r\n    //username: username of the specific user\r\n    //@Return\r\n    //uid_follow: uid of the specific user\r\n    retrieveUserUid: function(username)\r\n    {\r\n        console.log(\"Entered retrieveUserUid\");\r\n        var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n        var uid_follow = username_uid_map[username];\r\n        console.log(\"Exited retrieveUserUid\");\r\n        return uid_follow;\r\n    },\r\n\r\n    //Description: Retrieve email of a specific user\r\n    //@Params\r\n    //username: username of the specific user\r\n    //@Return\r\n    //email: email of the specific user\r\n    retrieveUserEmail: function(username) \r\n    {\r\n        console.log(\"Entered retrieveUserEmail\");\r\n        var username_email_map = firebase.database().ref().child(\"mapUsernameToEmail\");\r\n        var email = username_email_map[username];\r\n        console.log(\"Exited retrieveUserEmail\");\r\n        return email;\r\n    },\r\n\r\n    retrieveUsername: async function(uid)\r\n    {\r\n      console.log(\"Entered retrieveUsername\");\r\n      var username;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        username = mapUIDtoUsername[uid];\r\n      });\r\n      console.log(\"Exited retrieveUsername\");\r\n      return username;\r\n    },\r\n\r\n    //Description: Add a user to follow to the current user's list of followers\r\n    //@Params\r\n    //usernameFollow: username of the individual you want to follow\r\n    //DEPRECATED\r\n    // addFollowedUser: function(usernameFollow)\r\n    // {\r\n    //     console.log(\"Entered addFollowedUser\");\r\n    //     //get the uid of the current user\r\n    //     var uid_current = firebase.auth().currentUser.uid;\r\n    //     //get the uid of the user to follow\r\n    //     var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n    //     var uid_follow = username_uid_map[usernameFollow];\r\n    //     //put it in the appropriate spot in the databasee under followedUsers\r\n    //     //add uid and an empty list of followedTopics\r\n    //     var followedUserRef = firebase.database().ref().child(\"users\").child(uid_current).child(\"followedUsers\").child(uid_follow);\r\n    //     followedUserRef.push ({\r\n    //         followedTopics: []\r\n    //     });\r\n    //     console.log(\"Exited addFollowedUser\");\r\n    // },\r\n\r\n    //Description: Add a topic that the current user follows to the already followed user\r\n    //@Params\r\n    //usernameFollow: username of the individual the current user has followed, type: string\r\n    //topicsFollow: the topic(s) that the current user wants to follow from the given usernameFollow, type: array\r\n    //DEPRECATED\r\n    // addFollowedTopicToFollowedUser: function(usernameFollow, topicsFollow)\r\n    // {\r\n    //     console.log(\"Entered addFollowedTopicToFollowedUser\");\r\n    //     //get the uid of the current user\r\n    //     var uid_current = firebase.auth().currentUser.uid;\r\n    //     //get the uid of the user to follow\r\n    //     var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n    //     var uid_follow = username_uid_map[usernameFollow];\r\n    //     //add followedTopic to the list of followedTopics within the followedUser\r\n    //     firebase.database().ref().once('value', (snapshot) => {\r\n    //         var followedTopics = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"followedUsers\").child(uid_follow).child(\"followedTopics\").val();\r\n    //         for(var index = 0; index < topicsFollow.length; index++)\r\n    //         {\r\n    //             followedTopics.push(topicsFollow[index]);\r\n    //         }\r\n    //     });\r\n    //     console.log(\"Exited addFollowedTopicToFollowedUser\");\r\n    // },\r\n\r\n    //Description: Add a topic to current user (when current user decides to write and post a microblog)\r\n    //@Params\r\n    //content: a string that represents the blog itself (must be a string of less than 250 characters), type: string\r\n    //topic(s): a list of topics associated to the blog, type: array\r\n    addMicroBlogToCurrentUser: async function(content, topics)\r\n    {\r\n        var username = \"\";\r\n        console.log(\"Entered addMicroBlogToCurrentUser\");\r\n        //get the current user's uid\r\n        var uid_current = firebase.auth().currentUser.uid;\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          username = mapUIDtoUsername[uid_current];\r\n          console.log(\"USERNAME:\", username);\r\n        });\r\n        //fetch the current timestamp\r\n        var date = new Date();\r\n        var timestamp = date.getTime();\r\n        //check if the length of the microblog does not exceed 250 characters\r\n        if(content.length > 250)\r\n        {\r\n            console.log(\"ERROR: content of microblog cannot exceed 250 characters --> will not store in firebase\");\r\n        }\r\n        //add uid, microblog content, and list of topics to Microblogs\r\n        var wTopics = [];\r\n\r\n        for(var index = 0; index < topics.length; index++)\r\n        {\r\n            wTopics.push({\"topics\":topics[index], \"timestamp\":timestamp});\r\n        }\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            var writtenTopics = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").val();\r\n            console.log(\"TYPE:\", typeof(writtenTopics));\r\n            //console.log(\"VALUES:\", Object.values(writtenTopics));\r\n            if(writtenTopics == null || writtenTopics.length === 0)\r\n            {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(wTopics);\r\n            }\r\n            else\r\n            {\r\n                for(var index = 0; index < wTopics.length; index++)\r\n                {\r\n                  var w = 0;\r\n                  for (; w < writtenTopics.length; w++) {\r\n                    if (writtenTopics[w].topics == wTopics[index].topics) {\r\n                      break;\r\n                    }\r\n                  }\r\n                  if (w == writtenTopics.length) {\r\n                    writtenTopics.push(wTopics[index]);\r\n                  }\r\n                }\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(writtenTopics);\r\n            }\r\n        });\r\n        var topicsList = [];\r\n        for(var index = 0; index < topics.length; index++)\r\n        {\r\n            topicsList.push(topics[index]);\r\n        }\r\n        var numLikes = 0;\r\n        var userLikes = [];\r\n        userLikes.push(\"hello\");\r\n        var microblog = {'userLikes': userLikes, 'id': username + timestamp, 'user': username, 'content': content, 'topics': topicsList, 'timestamp': timestamp, 'numLikes': numLikes};\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            var microblog_list = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").val();\r\n            //console.log(microblog_list);\r\n            if(microblog_list == null || microblog_list.length === 0)\r\n            {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set({'0': microblog});\r\n            }\r\n            else\r\n            {\r\n                microblog_list.push(microblog);\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set(microblog_list);\r\n            }\r\n        });\r\n\r\n        resolve(\"done\");\r\n        return;\r\n        console.log(\"Exited addMicroBlogToCurrentUser\");\r\n    },\r\n\r\n    likeMicroblog: async function(microblog, username)\r\n    {\r\n      console.log(\"Entered likeMicroblog\");\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var UIDofUserIAmViewing = mapUsernameToUID[microblog.name];\r\n        snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").forEach((function(child)\r\n        {\r\n          //console.log(username);\r\n          // console.log(child);\r\n          // console.log(child.key);\r\n          // console.log(child.val().id);\r\n          var countLikes = 0;\r\n          var userLikes = [];\r\n          if(child.val().id === microblog.id)\r\n          {\r\n            if(child.val().userLikes === undefined)\r\n            {\r\n              userLikes.push(username);\r\n            }\r\n            else if(child.val().userLikes.includes(username) === false)\r\n            {\r\n              if(child.val().numLikes === 0 || child.val().userLikes.includes(\"hello\"))\r\n              {\r\n                userLikes = child.val().userLikes;\r\n                userLikes[0] = username;\r\n              }\r\n              else\r\n              {\r\n                userLikes = child.val().userLikes;\r\n                userLikes.push(username);\r\n              }\r\n            }\r\n            else if(child.val().userLikes.includes(username) === true)\r\n            {\r\n              userLikes = child.val().userLikes;\r\n            }\r\n            countLikes = userLikes.length;\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'userLikes': userLikes});\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'numLikes': countLikes});\r\n          }\r\n        }));\r\n      });\r\n\r\n      resolve(\"done\");\r\n      console.log(\"Exited likeMicroblog\");\r\n    },\r\n\r\n    unlikeMicroblog: async function(microblog, username)\r\n    {\r\n      console.log(\"Entered unlikeMicroblog\");\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var UIDofUserIAmViewing = mapUsernameToUID[microblog.name];\r\n        snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").forEach((function(child)\r\n        {\r\n          var countLikes = 0;\r\n          var userLikes = [];\r\n          if(child.val().id === microblog.id)\r\n          {\r\n            if(child.val().userLikes === undefined)\r\n            {\r\n              countLikes = 0;\r\n            }\r\n            else if(child.val().userLikes.includes(username) === true)\r\n            {\r\n              userLikes = child.val().userLikes;\r\n              var index = userLikes.indexOf(username);\r\n              userLikes.splice(index, 1);\r\n            }\r\n            countLikes = userLikes.length;\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'userLikes': userLikes});\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'numLikes': countLikes});\r\n          }\r\n        }));\r\n      });\r\n      resolve(\"done\");\r\n      console.log(\"Exited unlikeMicroblog\");\r\n    },\r\n    \r\n    //Description: fetch another Users bio (when current user visits another profile)\r\n    //@Params\r\n    //username: string containing Username of profile page current User is visiting\r\n    /* getBio: function(username) \r\n    {\r\n        var bio_content;\r\n        //fetch user's uid from the username to uid list and then fetch bio from coresponding uid.\r\n        firebase.database().ref().once('value', (snapshot) => {\r\n            var user_uid_list = snapshot.child('mapUsernameToUID').val();\r\n            var uid_val = user_uid_list[username];\r\n            bio_content = snapshot.child(\"users\").child(uid_val).child(\"bio\").val();\r\n        });\r\n\r\n        return bio_content;\r\n    }, */\r\n\r\n    getBio: async function(username) {\r\n\r\n      var bio_text;\r\n  \r\n      const bio = await firebase.database().ref().once('value', (snapshot) => {\r\n        var user_uid_list = snapshot.child('mapUsernameToUID').val();\r\n        var uid_val = user_uid_list[username];\r\n        var bio_cont = snapshot.child(\"users\").child(uid_val).child(\"bio\").val();\r\n        if (bio_cont != undefined) {\r\n          //resolve(bio_cont);\r\n          bio_text = bio_cont;\r\n          return bio_cont;\r\n        }\r\n      });\r\n\r\n        resolve(\"done\")\r\n        return bio_text;\r\n    },\r\n\r\n    //Method to get list of followers and following\r\n    getFollowersAndFollowing: async function(username){\r\n\r\n        var result;\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n    \r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var UIDofUserIAmViewing = mapUsernameToUID[username];\r\n          var usersTheUserIsFollowing = [];\r\n          snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"following\").forEach((function(child)\r\n          {\r\n            usersTheUserIsFollowing.push(child.key);\r\n          }));\r\n          var followersTheUserHas = snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"followers\").val();\r\n          var followers = \"\";\r\n          if(followersTheUserHas == null)\r\n          {\r\n            followers = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < followersTheUserHas.length - 1; i++)\r\n            {\r\n              followers += followersTheUserHas[i] + \", \";\r\n            }\r\n            followers += followersTheUserHas[followersTheUserHas.length - 1];\r\n          }\r\n          var following = \"\";\r\n          if(usersTheUserIsFollowing == null || usersTheUserIsFollowing === undefined || usersTheUserIsFollowing.length === 0)\r\n          {\r\n            following = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < usersTheUserIsFollowing.length - 1; i++)\r\n            {\r\n              following += usersTheUserIsFollowing[i] + \", \";\r\n            }\r\n            following += usersTheUserIsFollowing[usersTheUserIsFollowing.length - 1];\r\n          }\r\n          result = {followers, following};\r\n          \r\n        });\r\n\r\n        resolve(\"done\");\r\n        return result;\r\n    },\r\n\r\n    //Method to follow user I am viewing\r\n    followUserIAmViewing: async function(username){\r\n        \r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var currUserUID = firebase.auth().currentUser.uid;\r\n          var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n          var followedUserName = username;\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n          var date = new Date();\r\n          var timestamp = date.getTime();\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"followingTimestamp\").child(followedUserName).set(timestamp);\r\n\r\n          var usersIAmFollowing = snapshot.child(\"users\").child(currUserUID).child(\"following\").val();\r\n          // var usersIAmFollowing = snapshot.child(\"users\").child(currUserUID).child(\"following\").forEach(function(childSnapshot) \r\n          // {\r\n          //   var childKey = childSnapshot.key;\r\n          //   toast(\"CHILD KEY: \" + childKey);\r\n          //   var childData = childSnapshot.val();\r\n          //   toast(\"CHILD VALUE: \" + childData);\r\n          // });\r\n\r\n          var followersOfUserIamFollowing = snapshot.child(\"users\").child(followedUserUID).child(\"followers\").val();\r\n\r\n          if(followedUserUID !== currUserUID)\r\n          {\r\n            if(usersIAmFollowing == null || usersIAmFollowing.length == 0)\r\n            {\r\n              var topicsList = [];\r\n              topicsList.push(\"None\");\r\n              if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").hasChild(followedUserName) === false)\r\n              {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n              }\r\n            }\r\n            else\r\n            {\r\n              var topicsList = [];\r\n              topicsList.push(\"None\");\r\n              if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").hasChild(followedUserName) === false)\r\n              {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n              }\r\n            }\r\n\r\n            if(followersOfUserIamFollowing == null || followersOfUserIamFollowing.length === 0)\r\n            {\r\n                var usersList = [];\r\n                usersList.push(currUserName);\r\n                firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(usersList);\r\n            }\r\n            else\r\n            {\r\n              if(followersOfUserIamFollowing.includes(currUserName) === false)\r\n              {\r\n                followersOfUserIamFollowing.push(currUserName);\r\n                firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(followersOfUserIamFollowing);\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        resolve(\"done\");\r\n      },\r\n\r\n    //Method to unfollow user I am viewing\r\n    unfollowUserIAmViewing: async function(username)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        var followersOfUserIamFollowing = snapshot.child(\"users\").child(followedUserUID).child(\"followers\").val();\r\n\r\n        if(firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName) != null)\r\n        {\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).remove();\r\n        }\r\n\r\n        if(followersOfUserIamFollowing.includes(currUserName))\r\n        {\r\n          var usersList = [];\r\n          for(var i = 0; i < followersOfUserIamFollowing.length; i++)\r\n          {\r\n            if(followersOfUserIamFollowing[i] !== currUserName)\r\n            {\r\n              usersList.push(followersOfUserIamFollowing[i]);\r\n            }\r\n          }\r\n          firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(usersList);\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    addBlockedUser: async function(blockedUsers)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        \r\n        var blockedList = [];\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          blockedList.push(blockedUsers[index]);\r\n        }\r\n\r\n        var currBlockedList = [];\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          currBlockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n\r\n        for(var index = 0; index < currBlockedList.length; index++)\r\n        {\r\n          if(!blockedList.includes(currBlockedList[index]))\r\n          {\r\n            blockedList.push(currBlockedList[index]);\r\n          }\r\n        }\r\n\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").set(blockedList);\r\n\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var uid_blocked = mapUsernameToUID[blockedUsers[index]];\r\n          var blockedFromList = [];\r\n          if(snapshot.child(\"users\").child(uid_blocked).hasChild(\"usersBlockedFrom\") === true)\r\n          {\r\n            blockedFromList = snapshot.child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").val();\r\n          }\r\n          if(!blockedFromList.includes(currUserName))\r\n          {\r\n            blockedFromList.push(currUserName);\r\n          }\r\n\r\n          firebase.database().ref().child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").set(blockedFromList);\r\n          \r\n        }\r\n\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    removeBlockedUser: async function(blockedUsers)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n\r\n        var blockedList = [];\r\n\r\n        var currBlockedList = [];\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          currBlockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n\r\n        for(var index = 0; index < currBlockedList.length; index++)\r\n        {\r\n          if(!blockedUsers.includes(currBlockedList[index]))\r\n          {\r\n            blockedList.push(currBlockedList[index]);\r\n          }\r\n        }\r\n\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").set(blockedList);\r\n\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var uid_blocked = mapUsernameToUID[blockedUsers[index]];\r\n          var blockedFromList = [];\r\n          var newBlockedFromList = [];\r\n          if(snapshot.child(\"users\").child(uid_blocked).hasChild(\"usersBlockedFrom\") === true)\r\n          {\r\n            blockedFromList = snapshot.child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").val();\r\n          }\r\n          for(var r = 0; r < blockedFromList.length; r++)\r\n          {\r\n            if(blockedFromList[r] !== currUserName)\r\n            {\r\n              newBlockedFromList.push(blockedFromList[r]);\r\n            }\r\n          }\r\n\r\n          firebase.database().ref().child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").set(newBlockedFromList);\r\n          \r\n        }\r\n\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    getBlockedUser: async function()\r\n    {\r\n      var blockedList = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          blockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return blockedList;\r\n    },\r\n\r\n    getUsersBlockedFrom: async function()\r\n    {\r\n      var blockedFrom = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"usersBlockedFrom\") === true)\r\n        {\r\n          blockedFrom = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").val();\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return blockedFrom;\r\n    },\r\n    \r\n    //Description: Method to add and remove topics from a followed user\r\n    addAndRemoveTopicsFromFollowedUser: async function(username, topicsFollow, topicsUnFollow)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        if(snapshot.child(\"users\").child(currUserUID).child(\"following\").hasChild(username) === false)\r\n        {\r\n          //ERROR: cannot find username - user should be followed before adding/removing topics from that user\r\n        }\r\n        else\r\n        {\r\n           //user has been verified as followed\r\n          var topicsList = [];\r\n          for(var i = 0; i < topicsFollow.length; i++)\r\n          {\r\n            topicsList.push(topicsFollow[i]);\r\n          }\r\n          for(var i = 0; i < topicsUnFollow.length; i++)\r\n          {\r\n            if(topicsList.includes(topicsUnFollow[i]))\r\n            {\r\n              var index = topicsList.indexOf(topicsUnFollow[i]);\r\n              if(index > -1)\r\n              {\r\n                topicsList.splice(index, 1);\r\n              }\r\n            }\r\n          }\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n        }\r\n      });\r\n      \r\n      resolve(\"done\");\r\n    },\r\n\r\n    getFollowedAndUnfollowedTopics: async function(username)\r\n    {\r\n      var result;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        var writtenTopics = snapshot.child(\"users\").child(followedUserUID).child(\"writtenTopics\").val();\r\n        var tList = [];\r\n        if(writtenTopics != null && writtenTopics !== undefined)\r\n        {\r\n          for(var v = 0; v < writtenTopics.length; v++)\r\n          {\r\n            if(writtenTopics[v] !== undefined)\r\n            {\r\n              tList.push(writtenTopics[v].topics);\r\n            }\r\n          }\r\n        }\r\n        console.log(\"WRITTEN TOPICS\", tList);\r\n        var followedTopics = snapshot.child(\"users\").child(currUserUID).child(\"following\").child(followedUserName).val();\r\n        var followedTopicsList = [];\r\n        if(followedTopics != null && followedTopics.length !== 0)\r\n        {\r\n          for(var index = 0; index < followedTopics.length; index++)\r\n          {\r\n            if(followedTopics[index] !== \"None\")\r\n            {\r\n              followedTopicsList.push(followedTopics[index]);\r\n            }\r\n          }\r\n        }\r\n        var unfollowedTopics = [];\r\n        if(tList != null && tList.length !== 0 && followedTopicsList != null && followedTopicsList.length !== 0)\r\n        {\r\n          for(var i = 0; i < tList.length; i++)\r\n          {\r\n            if(followedTopicsList.includes(tList[i]) === false)\r\n            {\r\n              if(tList[i] !== undefined)\r\n              {\r\n                unfollowedTopics.push(tList[i]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else\r\n        {\r\n          for(var i = 0; i < tList.length; i++)\r\n          {\r\n            unfollowedTopics.push(tList[i]);\r\n          }\r\n          followedTopicsList = [];\r\n        }\r\n\r\n        console.log(\"FOLLOWED TOPICS\", followedTopicsList);\r\n        console.log(\"UNFOLLOWED TOPICS\", unfollowedTopics);\r\n\r\n        result = {followedTopicsList, unfollowedTopics};\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return result;\r\n    },\r\n    //Description: save current Users bio on database.\r\n    //@Params\r\n    //content: string which contians users bio.\r\n    postCurrentUserBio: async function(content) {\r\n        //save current users bio on firebase\r\n        await firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"bio\").set(content);\r\n        resolve(\"done\");\r\n    },\r\n\r\n    //Delete users data and authentication\r\n    //@Params\r\n    //content: string which contains username\r\n    deleteUserData: async function(username) {\r\n      firebase.database().ref().child(\"mapUIDtoUsername\").child(firebase.auth().currentUser.uid).remove();\r\n      firebase.database().ref().child(\"mapUsernameToEmail\").child(username).remove();\r\n      firebase.database().ref().child(\"mapUsernameToUID\").child(username).remove();\r\n\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var followingUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child('followers').val();\r\n        var followedUsers =  snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child('following').val();\r\n        //remove users name from the following list of the users who follow them\r\n        for (var key in followingUsers) {\r\n          console.log(followingUsers[key])\r\n          var followerUid = snapshot.child(\"mapUsernameToUID\").child(followingUsers[key]).val();\r\n          console.log(followerUid);\r\n          firebase.database().ref().child('users').child(followerUid).child('following').child(username).remove();\r\n        }\r\n\r\n        //remove users name from the followers list of the users who they follow\r\n        for (var key in followedUsers) {\r\n          var followingUserUid = snapshot.child(\"mapUsernameToUID\").child(key).val();\r\n          console.log(followingUserUid);\r\n          var followerlist = snapshot.child('users').child(followingUserUid).child('followers').val();\r\n          console.log(followerlist);\r\n          for (var index in followerlist) {\r\n            if(followerlist[index] === username) {\r\n              console.log(index);\r\n              firebase.database().ref().child('users').child(followingUserUid).child('followers').child(index).remove();\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      \r\n      firebase.auth().currentUser.delete();\r\n      firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).remove();\r\n    },\r\n    \r\n    /*\r\n    //gets a list of all the microblogs that the current user has posted and the posts he/she follows\r\n    getMicroblogsForCurrentUserAsync: async function() {\r\n    let result;\r\n    await firebase.database().ref().once('value', (snapshot) => {\r\n      var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n      var usernameOfUser = mapUIDtoUsername[firebase.auth().currentUser.uid];\r\n      var Microblogs = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").val();\r\n\r\n      result = {usernameOfUser, Microblogs};\r\n    });\r\n\r\n    return result;\r\n    }*/\r\n\r\n    //use this function to get all related microblogs for a user's timeline (including following)\r\n    getMicroblogsForUserTimeline: async function(username)\r\n    {\r\n      var Microblogs = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var uidOfUser = mapUsernameToUID[username];\r\n        snapshot.child(\"users\").child(uidOfUser).child(\"following\").forEach(function(childSnapshot)\r\n        {\r\n          var followedUsername = childSnapshot.key;\r\n          var followedTopics = childSnapshot.val();\r\n          var uidOfFollowedUser = mapUsernameToUID[followedUsername];\r\n          var microblogs = snapshot.child(\"users\").child(uidOfFollowedUser).child(\"Microblogs\").val();\r\n\r\n          var followingTimestamp = snapshot.child(\"users\").child(uidOfUser).child(\"followingTimestamp\").val();\r\n          var followingTimestampOfFollowedUser = followingTimestamp[followedUsername];\r\n          var writtenTopics = snapshot.child(\"users\").child(uidOfFollowedUser).child(\"writtenTopics\").val();\r\n          \r\n          if(microblogs != undefined || microblogs != null)\r\n          {\r\n            for(var i = 0; i < microblogs.length; i++)\r\n            {\r\n\r\n              //first check if any new topics were added and include the first microblog with that new topic highlighted\r\n              var currMicroblog = microblogs[i];\r\n              var topicsList = currMicroblog.topics;\r\n\r\n              if (topicsList != undefined || topicsList != null) {\r\n\r\n                var foundNewTopic = false;\r\n                for (var t = 0; t < topicsList.length; t++) {\r\n                  \r\n                  for (var w = 0; w < writtenTopics.length; w++) {\r\n                    if (writtenTopics[w].topics == topicsList[t]) {\r\n                      if (writtenTopics[w].timestamp == microblogs[i].timestamp) {\r\n                        if (followingTimestampOfFollowedUser < writtenTopics[w].timestamp) {\r\n                          //console.log(\"true\", microblogs[i].timestamp);\r\n                          microblogs[i].topics[t] = \"/h\" + microblogs[i].topics[t];\r\n                          foundNewTopic = true;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n\r\n                }\r\n\r\n                if (foundNewTopic) {\r\n                  Microblogs.push(currMicroblog);\r\n                  continue;\r\n                }\r\n\r\n\r\n                for(var j = 0; j < topicsList.length; j++)\r\n                {\r\n                  if(followedTopics.includes(topicsList[j]))\r\n                  {\r\n                    Microblogs.push(currMicroblog);\r\n                    break;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      resolve(\"done\");\r\n      //Sort Microblogs based on timestamp\r\n      Microblogs.sort(function(m1, m2)\r\n      {\r\n        return m1.timestamp > m2.timestamp ? -1 : 1;\r\n      });\r\n      return Microblogs;\r\n    },\r\n\r\n    getMicroblogsForCurrentUser: async function(username) {\r\n        var Microblogs;\r\n        firebase.database().ref().once('value', (snapshot) => {\r\n          let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          //let mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          let uidOfUser = mapUsernameToUID[username];\r\n          Microblogs = snapshot.child(\"users\").child(uidOfUser).child(\"Microblogs\").val();\r\n          if(Microblogs != null)\r\n          {\r\n              \r\n            \r\n          }\r\n        });\r\n        if(Microblogs != null && Microblogs.length !== 0)\r\n        {\r\n          Microblogs.sort(function(m1, m2)\r\n          {\r\n            return m1.timestamp > m2.timestamp ? -1 : 1;\r\n          });\r\n        }\r\n        return Microblogs;\r\n      },\r\n\r\n      getMicroblogsForUser: async function(username) {\r\n        var Microblogs;\r\n        const t = await firebase.database().ref().once('value', (snapshot) => {\r\n          let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          //let mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          let uidOfUser = mapUsernameToUID[username];\r\n          Microblogs = snapshot.child(\"users\").child(uidOfUser).child(\"Microblogs\").val();\r\n          if(Microblogs != null)\r\n          {\r\n              \r\n            \r\n          }\r\n        });\r\n        resolve(\"done\");\r\n        if(Microblogs != null && Microblogs.length !== 0)\r\n        {\r\n          Microblogs.sort(function(m1, m2)\r\n          {\r\n            return m1.timestamp > m2.timestamp ? -1 : 1;\r\n          });\r\n        }\r\n        return Microblogs;\r\n      },\r\n\r\n      getUserdataOfLoggedInUser: async function() {\r\n        var userData;\r\n\r\n        var loggedIn = true;\r\n\r\n        \r\n\r\n        firebase.auth().onAuthStateChanged(async function(user) {          \r\n          if (user) {\r\n\r\n            userData = await helperfunctions.getUserdataOfUser(user.uid, loggedIn);\r\n            resolve(\"done\");\r\n            return userData;\r\n          } else {\r\n            console.log(\"null\");\r\n            // No user is signed in.\r\n          }\r\n        });\r\n\r\n        \r\n        /* while(userData == undefined){\r\n          console.log(\"undefined\")\r\n        } */\r\n        \r\n      },\r\n\r\n      getUserdataOfUser : async function(uid, loggedIn) {\r\n        var userData;\r\n\r\n        \r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var UIDtoUsername = snapshot.child('mapUIDtoUsername').val();\r\n          var username = UIDtoUsername[uid];\r\n          userData = new UserData(username, loggedIn, true);\r\n          //this.email = user.email;\r\n        });\r\n\r\n        resolve(\"done\");\r\n        return userData;\r\n      }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default helperfunctions;\r\n","import React, { Component } from \"react\";\r\nimport { MicroblogWriterView } from \"./MicroblogWriterView\";\r\nimport helperfunctions from \"../helperfunctions\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nclass MicroblogWriter extends React.Component {\r\n  constructor(props) {\r\n    //TODO: THIS\r\n    super(props);\r\n\r\n    this.microblogData = new Object();\r\n\r\n    this.microblogPosted = props.microblogPosted;\r\n\r\n    this.microblogData.name = props.username;\r\n    this.microblogData.handle = props.username;\r\n    this.microblogData.image = \"props.image\";\r\n\r\n    this.submitMicroblog = this.submitMicroblog.bind(this);\r\n    this.addTopic = this.addTopic.bind(this);\r\n\r\n    this.topics = [];\r\n    this.numTopics = 0;\r\n  }\r\n\r\n  addTopic(event) {\r\n    if (\r\n      document.getElementById(\"addTopics\").value != \"\" &&\r\n      document.getElementById(\"addTopics\").value != \",\"\r\n    ) {\r\n      this.topics.push(document.getElementById(\"addTopics\").value);\r\n      if (document.getElementById(\"showTopics\").value == \"\") {\r\n        document.getElementById(\"showTopics\").value = document.getElementById(\r\n          \"addTopics\"\r\n        ).value;\r\n      } else {\r\n        document.getElementById(\"showTopics\").value =\r\n          document.getElementById(\"showTopics\").value +\r\n          \", \" +\r\n          document.getElementById(\"addTopics\").value;\r\n      }\r\n      document.getElementById(\"addTopics\").value = \"\";\r\n    }\r\n  }\r\n\r\n  async submitMicroblog(event) {\r\n    var content = document.getElementById(\"content\").value;\r\n    console.log(content);\r\n    if (content.length > 250 || content.length <= 0) {\r\n      //toast(\"Cannot post microblog\");\r\n      toast(\r\n        \"Cannot post microblog. Make sure the content is 250 characters or less\"\r\n      );\r\n    } else {\r\n      await helperfunctions.addMicroBlogToCurrentUser(content, this.topics);\r\n      //await helperfunctions.addMicroBlogToCurrentUser(content, this.topics);\r\n      this.microblogPosted();\r\n      this.topics = [];\r\n    }\r\n\r\n    document.getElementById(\"content\").value = \"\";\r\n    document.getElementById(\"showTopics\").value = \"\";\r\n    document.getElementById(\"addTopics\").value = \"\";\r\n  }\r\n\r\n  render() {\r\n    let name = `${this.microblogData.name}`;\r\n    let handle = `@${this.microblogData.name}`;\r\n    let image = this.microblogData.image;\r\n\r\n    return (\r\n      <MicroblogWriterView\r\n        name={name}\r\n        handle={handle}\r\n        image={image}\r\n        submitMicroblog={this.submitMicroblog}\r\n        addTopic={this.addTopic}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default MicroblogWriter;\r\n","import React from 'react';\r\nimport './AutoCompleteSearchBar.css';\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass AutoCompleteSearchBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            suggestions: [],\r\n            text: '',\r\n            onFocus: false,\r\n            clickoption: false,\r\n        }\r\n        this.searchForUser = this.searchForUser.bind(this);\r\n        this.checkIfFocused = this.checkIfFocused.bind(this);\r\n        this.changeFocus = this.changeFocus.bind(this);\r\n        this.keyPress = this.keyPress.bind(this);\r\n    }\r\n\r\n    onTextChanged = (e) => {\r\n        const { items } = this.props;\r\n        const value = e.target.value;\r\n        let suggestions = [];\r\n        if (value.length > 0) {\r\n            const regex  = new RegExp(`^${value}`, 'i');\r\n            suggestions = items.sort().filter(v => regex.test(v));\r\n        }\r\n        this.setState(() => ({ suggestions, text: value }));\r\n    }\r\n\r\n    suggestionSelected (value) {    \r\n        this.setState(() => ({\r\n            text: value,\r\n            suggestions: [],\r\n            onFocus: false,\r\n            clickoption: true,\r\n        }))\r\n    }\r\n\r\n    renderSuggestions () {\r\n        const {suggestions} = this.state;\r\n        if (suggestions.length === 0) {\r\n            return null;\r\n        }\r\n        return (\r\n            <ul>\r\n                {suggestions.map((item) => <li key={item} onMouseDown ={() => this.suggestionSelected(item)}>{item}</li>)}\r\n            </ul>\r\n        )\r\n    }\r\n    \r\n    searchForUser() {\r\n        const {text} = this.state;\r\n        const {items} = this.props;\r\n        const {username} = this.props;\r\n        var userexists = false;\r\n        var index;\r\n        for (index in items) {\r\n            if(items[index] == text) {\r\n                userexists = true;\r\n                break;\r\n            }\r\n        }\r\n        if (userexists) {\r\n            this.props.history.push({\r\n                pathname: \"/redirecttoaccount\",\r\n                state: { userData: this.userData, text: text}\r\n            });\r\n        }\r\n        else {\r\n            if (text != username) {\r\n                toast(\"Username not found!\");\r\n            }\r\n            else {\r\n                toast(\"You can visit your profile page by clicking the profile button\");\r\n            }\r\n        }\r\n    }\r\n\r\n    checkIfFocused() {\r\n        console.log(\"checking focus\");\r\n        this.setState(() => ({\r\n            onFocus: false,\r\n        }))\r\n        var onFocus = false;\r\n        const {clickoption} = this.state;\r\n        if(onFocus == false && clickoption == false) {\r\n            this.setState(() => ({ suggestions: []}));\r\n        }\r\n        this.setState(() => ({\r\n            onFocus: false,\r\n            clickoption: false,\r\n        }))\r\n    }\r\n\r\n    changeFocus() {\r\n        this.setState(() => ({\r\n            onFocus: true,\r\n        }))\r\n    }\r\n\r\n    keyPress(e) {\r\n        if(e.keyCode == 13){\r\n            this.searchForUser();\r\n        }\r\n    }\r\n\r\n    render ()  {\r\n        const {text} = this.state;\r\n        return (\r\n            <div>\r\n                <div className=\"AutoCompleteSearchBar\" onBlur={this.checkIfFocused}>\r\n                    <input value={text} onClick={this.changeFocus} onKeyDown={this.keyPress} onChange={this.onTextChanged} type=\"text\"/><button onClick={this.searchForUser}>Search</button>\r\n                        {this.renderSuggestions()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(AutoCompleteSearchBar);","import React from \"react\";\r\nimport \"./TopBar.css\";\r\nimport logo from \"../logo192.png\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport { green, blue, purple } from \"@material-ui/core/colors\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport AutoCompleteSearchBar from \"../AutoCompleteSearchBar/AutoCompleteSearchBar\"\r\n\r\nconst ColorButton = withStyles(theme => ({\r\n  root: {\r\n    color: theme.palette.getContrastText(blue[500]),\r\n    backgroundColor: \"#1F3648\"\r\n    // \"&:hover\": {\r\n    //   backgroundColor: blue[700]\r\n    // }\r\n  }\r\n}))(IconButton);\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: green,\r\n    secondary: {\r\n      main: \"#1F3648\"\r\n    }\r\n  }\r\n});\r\n\r\nconst TopBarTwisster = ({\r\n  getAllUsernames,\r\n  getCurrentUsername,\r\n  goLogout,\r\n  goToProfile,\r\n  goToChat,\r\n  goToLanding\r\n}) => {\r\n  return (\r\n    <div className=\"inner-body\">\r\n      <label className=\"top-bar-twisster\">Twistter</label>\r\n      {/* <button className=\"top-bar-logout\" id=\"logout\" onClick={goLogout}>\r\n        Logout\r\n      </button> */}\r\n      <div>\r\n        <AutoCompleteSearchBar items={getAllUsernames} username={getCurrentUsername}/>\r\n      </div>\r\n      <div className=\"top-bar-chat\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"chat\"\r\n          id=\"chat\"\r\n          onClick={goToChat}\r\n          className=\"top-bar-chat-btn\"\r\n        >\r\n          <ChatIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      <div className=\"top-bar-profile\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"profile\"\r\n          id=\"profile\"\r\n          onClick={goToProfile}\r\n        >\r\n          <AccountCircleIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      <div className=\"top_bar_home\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"home\"\r\n          id=\"Home\"\r\n          onClick={goToLanding}\r\n        >\r\n          <HomeIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      {/* <button className=\"top_bar_home\" id=\"Home\" onClick={goToLanding}>\r\n        Home\r\n      </button> */}\r\n    </div>\r\n  );\r\n};\r\nexport default TopBarTwisster;\r\n","import TopBarTwisster from \"./TopBarView\";\r\nimport React, { PureComponent } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport firebase from \"firebase\";\r\nimport { throwStatement } from \"@babel/types\";\r\nclass TopBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.userData = props.userData;\r\n    this.goLogout = this.goLogout.bind(this);\r\n    this.goToProfile = this.goToProfile.bind(this);\r\n    this.goToChat = this.goToChat.bind(this);\r\n    this.goToLanding = this.goToLanding.bind(this);\r\n    this.getAllUsernames = this.getAllUsernames.bind(this);\r\n  }\r\n\r\n  goLogout = async event => {\r\n    firebase\r\n      .auth()\r\n      .signOut()\r\n      .then(function() {\r\n        console.log(\"Signout succesful\");\r\n      })\r\n      .catch(function(error) {\r\n        console.log(\"Error\");\r\n      });\r\n\r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  goToProfile() {\r\n    this.props.history.push({\r\n      pathname: \"/redirecttoaccount\",\r\n      state: { userData: this.userData}\r\n    });\r\n  }\r\n\r\n  goToChat() {\r\n    this.props.history.push({\r\n      pathname: \"/chat\",\r\n      state: { topBar: true }\r\n    });\r\n  }\r\n\r\n  goToLanding() {\r\n    this.props.history.push({\r\n      pathname: \"/landing\",\r\n      state: { userData: this.userData}\r\n    });\r\n  }\r\n\r\n  getAllUsernames(){\r\n    var user_list = [];\r\n    const promise = firebase.database().ref().once('value', (snapshot)=> {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n            if (all_users[key] != firebase.auth().currentUser.email) {\r\n                user_list.push(key);\r\n            }\r\n        }\r\n    });\r\n    return user_list;\r\n  }\r\n\r\n  getCurrentUsername(){\r\n    var username;\r\n    const promise = firebase.database().ref().once('value', (snapshot)=> {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n            if (all_users[key] == firebase.auth().currentUser.email) {\r\n                username = key;\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    return username;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"top-bar\">\r\n        <TopBarTwisster\r\n          getAllUsernames={this.getAllUsernames()}\r\n          getCurrentUsername={this.getCurrentUsername()}\r\n          goLogout={this.goLogout}\r\n          goToProfile={this.goToProfile}\r\n          goToChat={this.goToChat}\r\n          goToLanding={this.goToLanding}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(TopBar);\r\n","import React from \"react\";\r\nimport MicroblogBox from \"../MicroblogBox\";\r\nimport \"./Landing.css\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport { func } from \"prop-types\";\r\n\r\nconst StyledBadge1 = withStyles(theme => ({\r\n  badge: {\r\n    right: -3,\r\n    border: `0px solid ${theme.palette.background.paper}`,\r\n    padding: \"0 4px\"\r\n  }\r\n}))(Badge);\r\n\r\nconst Image = ({ image, theid }) => {\r\n  console.log(theid);\r\n\r\n  return <img id={theid} alt=\"Logo\" className=\"picture\"></img>;\r\n};\r\n\r\nconst Handle = props => {\r\n  return <div className=\"handle\">{props.handle}</div>;\r\n};\r\n\r\nconst Name = props => {\r\n  return <div className=\"name\">{props.name}</div>;\r\n};\r\n\r\nconst Tweet = props => {\r\n  return <div className=\"tweet\">{props.tweet}</div>;\r\n};\r\n\r\nconst Topics = props => {\r\n  return <div className=\"topics\">{props.topics}</div>;\r\n};\r\nconst ListedTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nfunction GetIcon(isLiked) {\r\n  if (isLiked) {\r\n    return <FavoriteIcon color=\"secondary\" fontSize=\"large\" />;\r\n  } else {\r\n    return <FavoriteBorderIcon color=\"secondary\" fontSize=\"large\" />;\r\n  }\r\n}\r\n\r\nconst MicroblogView = props => {\r\n  return (\r\n    <MicroblogBox>\r\n      <div className=\"inner-body\" style={{ height: \"100%\" }}>\r\n        <Image image={props.image} theid={props.unitid} />\r\n        <div className=\"body\" style={{ width: \"80%\" }}>\r\n          <div className=\"inner-body\" style={{ height: \"60px\" }}>\r\n            <Name name={props.name} />\r\n            <Handle handle={props.handle} />\r\n          </div>\r\n          <div className=\"body\">\r\n            <Tweet tweet={props.tweet} />\r\n            <div className=\"inner-body\">\r\n              <Topics topics={props.topics} />\r\n              <IconButton aria-label=\"cart\" onClick={props.likeButtonClicked}>\r\n                <StyledBadge1 badgeContent={props.numLikes} color=\"primary\">\r\n                  {GetIcon(props.likeButtonText)}\r\n                </StyledBadge1>\r\n              </IconButton>\r\n              {/* <div class=\"likes\">\r\n                <button class=\"like-button\" onClick={props.likeButtonClicked}>\r\n                  {props.likeButtonText}\r\n                </button>\r\n                <label class=\"num-likes\">{}</label>\r\n              </div> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MicroblogBox>\r\n  );\r\n};\r\n\r\nexport { MicroblogView };\r\n","import React from \"react\";\r\nimport './Landing.css'\r\n\r\nconst TopicView = (props) => {\r\n    return(\r\n      \r\n          <div className=\"topic\">\r\n            {props.text}\r\n          </div>\r\n        \r\n    )\r\n}\r\nexport default TopicView \r\n","import React from \"react\";\r\nimport './Landing.css'\r\n\r\nconst TopicHighlightedView = (props) => {\r\n    return(\r\n      \r\n          <div className=\"topic-highlighted\">\r\n            {props.text}\r\n          </div>\r\n        \r\n    )\r\n}\r\nexport default TopicHighlightedView \r\n","import React, { Component } from 'react';\r\n\r\nimport  TopicView  from './TopicView.js';\r\nimport  TopicHighlightedView  from './TopicHighlightedView.js';\r\n\r\n\r\nclass Topic extends React.Component{\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.topic = new Object();\r\n\r\n\r\n      this.topic.text = props.data;\r\n      this.topic.highlight = props.highlight;\r\n    }\r\n\r\n    render(){\r\n        let text = `${this.topic.text}`\r\n        if(this.topic.highlight){\r\n            return(\r\n                <TopicHighlightedView \r\n                    text={text}\r\n                />\r\n            );\r\n        }\r\n        else{\r\n            return(\r\n                <TopicView \r\n                    text={text}\r\n                />\r\n            );\r\n        }\r\n    }\r\n}\r\nexport default Topic;\r\n","import React, { Component } from 'react';\r\nimport '../css/Landing.css'\r\nclass TopicsBox extends React.Component{\r\n\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n\r\n    render(){        \r\n        return(\r\n            <div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default TopicsBox;","import React, { Component } from \"react\";\r\nimport { MicroblogView } from \"./MicroblogView.js\";\r\nimport Topics from \"../Topics\";\r\nimport MicroblogBox from \"../MicroblogBox/index.js\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\nimport { nullLiteral } from \"@babel/types\";\r\n\r\nclass Microblog extends React.Component {\r\n  // static counter;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.microblogData = new Object();\r\n    if (Microblog.counter == undefined) {\r\n      Microblog.counter = 0;\r\n    }\r\n    this.counter = Microblog.counter;\r\n    this.blogid = \"blogid\" + this.counter;\r\n    Microblog.counter++;\r\n\r\n    this.microblogData.name = props.username;\r\n    this.microblogData.handle = props.username;\r\n    this.microblogData.tweet = props.data.content;\r\n    this.microblogData.image = \"props.image\";\r\n    this.microblogData.id = props.id;\r\n\r\n    this.fetchImage = this.fetchImage.bind(this);\r\n\r\n    this.likeButtonClicked = this.likeButtonClicked.bind(this);\r\n    this.microblogData.topics = props.data.topics;\r\n\r\n    this.microblogData.numLikes = props.numLikes;\r\n\r\n    this.state = {\r\n      like: props.liked\r\n    };\r\n  }\r\n\r\n  async likeButtonClicked() {\r\n    var username = await helperfunctions.retrieveUsername(\r\n      firebase.auth().currentUser.uid\r\n    );\r\n    if (this.state.like) {\r\n      this.microblogData.numLikes--;\r\n      await helperfunctions.unlikeMicroblog(this.microblogData, username);\r\n      this.setState({ like: false });\r\n    } else {\r\n      this.microblogData.numLikes++;\r\n      await helperfunctions.likeMicroblog(this.microblogData, username);\r\n      this.setState({ like: true });\r\n    }\r\n  }\r\n\r\n  async fetchImage() {\r\n    var picname;\r\n    var picname2;\r\n    var strangeruid;\r\n    console.log(\"fetchImage running\");\r\n\r\n    await firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        /*var userList = snapshot.child(\"users\").val();\r\n            let user = userList[firebase.auth().currentUser.id];*/\r\n        console.log(this.microblogData.name);\r\n        strangeruid = snapshot\r\n          .child(\"mapUsernameToUID\")\r\n          .child(this.microblogData.name)\r\n          .val();\r\n        picname = snapshot\r\n          .child(\"users\")\r\n          .child(strangeruid)\r\n          .child(\"picture\")\r\n          .val();\r\n        picname2 = snapshot\r\n          .child(\"users\")\r\n          .child(firebase.auth().currentUser.uid)\r\n          .child(\"picture\")\r\n          .val();\r\n        //picname = user[\"picture\"].val();\r\n        console.log(\"was here hello world\");\r\n      });\r\n\r\n    console.log(picname);\r\n    console.log(picname2);\r\n    //console.log(this.blogid);\r\n    var toMatch = this.blogid;\r\n\r\n    if (true) {\r\n      await firebase\r\n        .storage()\r\n        .ref()\r\n        .child(picname)\r\n        .getDownloadURL()\r\n        .then(function(url) {\r\n          var toReturn = url;\r\n          console.log(toMatch);\r\n\r\n          document.querySelectorAll(\"img\").forEach(function(item) {\r\n            // console.log(this.blogid);\r\n            if (item.id == toMatch) {\r\n              item.src = toReturn;\r\n            }\r\n          });\r\n          //return toReturn;\r\n        })\r\n        .catch(function(error) {\r\n          switch (error.code) {\r\n            case \"storage/object-not-found\":\r\n              console.log(\"object not found\");\r\n              break;\r\n            case \"storage/unauthorized\":\r\n              console.log(\"unauthorized\");\r\n              break;\r\n            case \"storage/unknown\":\r\n              console.log(\"unknown\");\r\n              break;\r\n          }\r\n        });\r\n\r\n      await firebase\r\n        .storage()\r\n        .ref()\r\n        .child(picname2)\r\n        .getDownloadURL()\r\n        .then(function(url) {\r\n          var toReturn = url;\r\n          document.querySelectorAll(\"img\").forEach(function(item) {\r\n            if (item.id == \"img3\") {\r\n              item.src = toReturn;\r\n            }\r\n          });\r\n          //return toReturn;\r\n        })\r\n        .catch(function(error) {\r\n          switch (error.code) {\r\n            case \"storage/object-not-found\":\r\n              console.log(\"object not found\");\r\n              break;\r\n            case \"storage/unauthorized\":\r\n              console.log(\"unauthorized\");\r\n              break;\r\n            case \"storage/unknown\":\r\n              console.log(\"unknown\");\r\n              break;\r\n          }\r\n        });\r\n    } else {\r\n      return firebase.storage().ref(picname);\r\n    }\r\n\r\n    console.log(\"ends now\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchImage();\r\n  }\r\n\r\n  render() {\r\n    var likeText = \"Placeholder\";\r\n\r\n    if (this.state.like) {\r\n      likeText = \"Unlike\";\r\n    } else {\r\n      likeText = \"Like\";\r\n    }\r\n\r\n    let likeButtonText = likeText;\r\n    let name = `${this.microblogData.name}`;\r\n    let handle = `@${this.microblogData.name}`;\r\n    //let image = this.microblogData.image\r\n    let tweet = this.microblogData.tweet;\r\n    let topics = this.microblogData.topics;\r\n    let numLikes = this.microblogData.numLikes;\r\n\r\n    let likeButtonClicked = this.likeButtonClicked;\r\n    return (\r\n      <MicroblogView\r\n        key={this.microblogData.key}\r\n        name={name}\r\n        handle={handle}\r\n        image={nullLiteral}\r\n        unitid={this.blogid}\r\n        tweet={tweet}\r\n        likeButtonClicked={likeButtonClicked}\r\n        likeButtonText={this.state.like}\r\n        numLikes={numLikes}\r\n        topics={topics}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default Microblog;\r\n","import React, { PureComponent } from 'react'\r\nimport Topic from \"../Topic\"\r\nimport TopicsBox from \"./TopicsBox.js\"\r\n\r\nimport './Topics.css';\r\nclass Topics extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.topics = props.topics;\r\n\r\n        this.num = 0;\r\n        //this.username = props.username;\r\n    }\r\n\r\n    createTopics = (topicsArray) => {\r\n        var topics = [];\r\n        for (var i = 0; i < topicsArray.length; i++) {\r\n            // note: we add a key prop here to allow react to uniquely identify each\r\n            // element in this array. see: https://reactjs.org/docs/lists-and-keys.html\r\n            this.num++;\r\n            var highlightbool = false;\r\n            if (topicsArray[i].length > 2) {\r\n              if (topicsArray[i].substr(0, 2) == \"/h\") {\r\n                topicsArray[i] = topicsArray[i].substr(2, topicsArray[i].length - 2);\r\n                highlightbool = true;\r\n              }\r\n            }\r\n            topics.push(<Topic key={i} data={topicsArray[i]} highlight={highlightbool} />);\r\n        }\r\n        return <div>{topics}</div>;\r\n    }\r\n\r\n    render() {\r\n      if(this.props.topics != null){\r\n        return(\r\n          <div>\r\n              <TopicsBox>\r\n                {/* <table id=\"topics\"> */}\r\n                  {/* <tr>\r\n                    <th>Topics</th>\r\n                  </tr> */}\r\n                  {this.createTopics(this.props.topics)}\r\n                {/* </table> */}\r\n              </TopicsBox>    \r\n          </div>\r\n        )\r\n      }\r\n      else{\r\n        return null;\r\n      }\r\n    }\r\n}\r\nexport default Topics;","import React, { PureComponent } from \"react\";\r\nimport Microblog from \"../Microblog\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\n\r\nclass Microblogs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.microblogs = props.microblogs;\r\n    this.username = props.username;\r\n  }\r\n\r\n  createMicroblogs = (microblogsArray, username) => {\r\n    var microblogs = [];\r\n    for (var i = 0; i < microblogsArray.length; i++) {\r\n      // note: we add a key prop here to allow react to uniquely identify each\r\n      // element in this array. see: https://reactjs.org/docs/lists-and-keys.html\r\n      var liked = false;\r\n      if (\r\n        microblogsArray[i].userLikes !== undefined &&\r\n        microblogsArray[i].userLikes.includes(username)\r\n      ) {\r\n        liked = true;\r\n      }\r\n      microblogs.push(\r\n        <Microblog\r\n          key={i}\r\n          data={microblogsArray[i]}\r\n          username={microblogsArray[i].user}\r\n          id={microblogsArray[i].id}\r\n          liked={liked}\r\n          numLikes={microblogsArray[i].numLikes}\r\n        />\r\n      );\r\n    }\r\n    return <div className=\"body\">{microblogs}</div>;\r\n  };\r\n\r\n\r\n  render() {\r\n    if (this.props.microblogs != null) {\r\n      return (\r\n        <div className=\"body\">\r\n          {this.createMicroblogs(this.props.microblogs, this.username)}\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default Microblogs;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport MicroblogWriter from \"../MicroblogWriter\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\nimport TopBar from \"../TopBar\";\r\nimport Microblogs from \"../Microblogs\";\r\nimport AutoCompleteSearchBar from \"../AutoCompleteSearchBar/AutoCompleteSearchBar\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { resolve } from \"q\";\r\n\r\nclass Landing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loaded: false\r\n    };\r\n\r\n    this.editMode = false;\r\n\r\n    this.microblogPosted = this.microblogPosted.bind(this);\r\n    this.getAllUsernames = this.getAllUsernames.bind(this);\r\n  }\r\n\r\n  async microblogPosted() {\r\n    await this.updateMicroblogs();\r\n    this.setState({ loaded: true });\r\n  }\r\n\r\n  async updateMicroblogs() {\r\n    toast(\"Microblog posted!\");\r\n    this.microblogs = await helperfunctions.getMicroblogsForUserTimeline(\r\n      this.userData.username\r\n    );\r\n    resolve(\"done\");\r\n  }\r\n\r\n  async componentDidMount() {\r\n    //verify user is logged in before displaying page\r\n    firebase.auth().onAuthStateChanged(async user => {\r\n      if (!user) {\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n        return null;\r\n      } else {\r\n        var loggedIn = true;\r\n        var user = firebase.auth().currentUser;\r\n        this.userData = await helperfunctions.getUserdataOfUser(\r\n          user.uid,\r\n          loggedIn\r\n        );\r\n\r\n        this.microblogs = await helperfunctions.getMicroblogsForUserTimeline(\r\n          this.userData.username\r\n        );\r\n        this.setState({ loaded: true });\r\n      }\r\n    });\r\n  }\r\n\r\n  goToProfile() {\r\n    this.props.history.push({\r\n      pathname: \"/profile\",\r\n      state: { userData: this.userData }\r\n    });\r\n  }\r\n\r\n  getAllUsernames() {\r\n    var user_list = [];\r\n    const promise = firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n          if (all_users[key] != firebase.auth().currentUser.email) {\r\n            user_list.push(key);\r\n          }\r\n        }\r\n      });\r\n    return user_list;\r\n  }\r\n\r\n  render() {\r\n    if (this.state.loaded) {\r\n      return (\r\n        <div className=\"main-body\">\r\n          <TopBar userData={this.userData} />\r\n          {/* <AutoCompleteSearchBar\r\n            items={this.getAllUsernames()}\r\n            username={this.userData.username}\r\n          /> */}\r\n          <MicroblogWriter\r\n            username={this.userData.username}\r\n            microblogPosted={this.microblogPosted}\r\n          />\r\n          <Microblogs\r\n            microblogs={this.microblogs}\r\n            username={this.userData.username}\r\n          />\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(Landing);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport Landing from \"../Landing\";\r\nimport TopBar from \"../TopBar\";\r\n\r\nclass LandingPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Landing />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LandingPage;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nconst checkboxes = [];\r\n  \r\n  const Checkbox = ({ type = 'checkbox', name, checked, onChange }) => (\r\n    <input type={type} name={name} checked={checked} onChange={onChange} />\r\n  );\r\n  \r\n  Checkbox.propTypes = {\r\n    type: PropTypes.string,\r\n    name: PropTypes.string.isRequired,\r\n    checked: PropTypes.bool,\r\n    onChange: PropTypes.func.isRequired,\r\n  }\r\n  \r\n  export { Checkbox };\r\n\r\n  export { checkboxes };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { checkboxes } from './checkBox.js';\r\nimport { Checkbox } from './checkBox.js';\r\nimport helperfunctions from '../helperfunctions.js';\r\n\r\nclass CheckboxContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = \r\n    {\r\n      checkedItems: new Map(),\r\n      loaded: false\r\n    }\r\n\r\n    this.username = props.username;\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.save = this.save.bind(this);\r\n\r\n    // const isChecked = true;\r\n    // let name = \"Hello\";\r\n    // let key = \"checkbox4\";\r\n    // let label = \"Check Box n\";\r\n    \r\n    // let newCheckbox = {\r\n    //   name: name,\r\n    //   key: key,\r\n    //   label: label\r\n    // }\r\n\r\n    // checkboxes.map(item => (      \r\n    //   this.state.checkedItems.set(item.name, isChecked)\r\n    // ));\r\n    \r\n    // checkboxes.push(newCheckbox);\r\n  }\r\n\r\n  handleChange(e) {\r\n    const item = e.target.name;\r\n    const isChecked = e.target.checked;\r\n    this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }));\r\n  }\r\n\r\n  async componentDidMount()\r\n  {\r\n    this.topics = await helperfunctions.getFollowedAndUnfollowedTopics(this.username);\r\n    \r\n    for(var index = 0; index < this.topics.followedTopicsList.length; index++)\r\n    {\r\n      const isChecked = true;\r\n      let name = this.topics.followedTopicsList[index];\r\n      let key = this.topics.followedTopicsList[index] + \"\" + index;\r\n      let label = \"Check Box \" + index;\r\n      \r\n      let checkbox_new = {\r\n        name : name,\r\n        key: key,\r\n        label: label\r\n      };\r\n\r\n      // checkboxes.map(item => (\r\n      //   this.state.checkedItems.set(item.name, isChecked)\r\n      // ));\r\n      \r\n      this.state.checkedItems.set(name, isChecked);\r\n\r\n      checkboxes.push(checkbox_new);\r\n    }\r\n\r\n    for(var index = 0; index < this.topics.unfollowedTopics.length; index++)\r\n    {\r\n      const isChecked = false;\r\n      let name = this.topics.unfollowedTopics[index];\r\n      let key = this.topics.unfollowedTopics[index] + \"\" + index;\r\n      let label = \"Check Box \" + index;\r\n      \r\n      let checkbox_new = {\r\n        name : name,\r\n        key: key,\r\n        label: label\r\n      };\r\n\r\n      // checkboxes.map(item => (\r\n      //   this.state.checkedItems.set(item.name, isChecked)\r\n      // ));\r\n\r\n      this.state.checkedItems.set(name, isChecked);\r\n      checkboxes.push(checkbox_new);\r\n    }\r\n    //this.handleChange = this.handleChange.bind(this);\r\n    this.setState({loaded: true});\r\n  }\r\n\r\n  async save()\r\n  {\r\n    console.log(\"REACHED HERE\");\r\n    var followedTopics = [];\r\n    var unFollowedTopics = [];\r\n    for(const [k,v] of this.state.checkedItems.entries())\r\n    {\r\n      console.log(k,v);\r\n      if(v === true)\r\n      {\r\n        followedTopics.push(k);\r\n      }\r\n      else if(v === false)\r\n      {\r\n        unFollowedTopics.push(k);\r\n      }\r\n    }\r\n    await helperfunctions.addAndRemoveTopicsFromFollowedUser(this.username, followedTopics, unFollowedTopics);\r\n  }\r\n  // componentWillMount() {\r\n  //   const isChecked = true;\r\n  //   checkboxes.map(item => (      \r\n  //     this.state.checkedItems.set(item, isChecked)\r\n  //    ));\r\n  // }\r\n\r\n  render() {\r\n    if(this.state.loaded)\r\n    {\r\n      return (\r\n        <React.Fragment>\r\n          {\r\n            checkboxes.map(item => (\r\n              <label key={item.key}>\r\n                {item.name}\r\n                <Checkbox name={item.name} checked={this.state.checkedItems.get(item.name)} onChange={this.handleChange} />\r\n              </label>\r\n            ))\r\n          }\r\n          <button type=\"button\" onClick={this.save}>Save</button>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    else\r\n    {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default CheckboxContainer;","import React from \"react\"\r\nimport './ProfilepicView.css'\r\n\r\nconst ProfilepicView = ({image, changeProfPic, deletePic, name}) =>   {\r\n    console.log(name);\r\n    return (\r\n        <div>\r\n        <img id = \"img1\" height=\"125\" width=\"125\"/>\r\n            <div className=\"hold_text\">\r\n            <text className=\"user_name\" thename={name}> {name} </text>\r\n            </div>\r\n            <div>\r\n            <button onClick={changeProfPic}>Change profile picture </button>\r\n            </div>\r\n            <div className=\"del_bt\">\r\n            <button onClick={deletePic}>Delete Picture / Change to default</button>\r\n            </div>\r\n\r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default ProfilepicView;","import index from './index'\r\nimport React from \"react\"\r\nimport { file } from '@babel/types';\r\n\r\nconst NewProfilepicView = ({image, changeProfPic}) =>   {\r\n    return (\r\n        <div>\r\n        \r\n        <img id = \"img1\" height=\"125\" width=\"125\"/>\r\n            <div>\r\n            <button onClick={changeProfPic}>Change profile picture</button>\r\n            <input type=\"file\" name = \"input\" id = \"input\" onChange={changeProfPic}></input>\r\n            </div>\r\n\r\n            \r\n           \r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default NewProfilepicView;","import React from 'react'\r\n\r\nconst VisitedProfilepic = ({image}) => {\r\n    return (\r\n        <div>\r\n            <img src={image} height=\"125\" width=\"125\"/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisitedProfilepic;","import React from \"react\";\r\n\r\nconst VisitedUserView = ({ userProfile })=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n              <h1 id='welcome'></h1>\r\n          <br></br>\r\n          <label>Followers:</label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          <br></br>\r\n          <label>Following:</label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          <br></br>\r\n          <button type='button' id=\"followbutton\" onClick={userProfile.followUser}>Follow</button>\r\n          <br></br>\r\n          <button type='button' id=\"directmessagebutton\" onClick={userProfile.dmUser}>Direct Message</button>\r\n          <br></br>\r\n          <button type=\"button\" id=\"blockbutton\" onClick={userProfile.blockUser}>Block</button>\r\n          <br></br>\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <br></br>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default VisitedUserView;","import React, { Component } from 'react'\r\nimport ProfilepicView from './ProfilepicView'\r\nimport NewProfilepicView from './NewProfilepicView'\r\nimport VisitedProfilepic from './VisitedProfilepic'\r\nimport {withRouter } from \"react-router\"\r\n\r\nimport firebase from 'firebase'\r\nimport VisitedUserView from '../User/UserProfileViews/VisitedUserView'\r\n\r\n\r\nclass ProfilePicture extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.username = this.props.strangername;\r\n        this.visiting = this.props.visiting;\r\n        this.strangername = this.props.strangername;\r\n        this.toUpload = false;\r\n        this.upLoadImage = this.uploadImage.bind(this);\r\n        this.fetchImage = this.fetchImage.bind(this);\r\n        this.changePic = this.changePic.bind(this);\r\n\r\n    }\r\n\r\n\r\n    uploadImage = async event => {\r\n        console.log(\"upLoadImage running\");\r\n        var inpFile = document.getElementById('input');\r\n\r\n        const file = inpFile.files[0];\r\n\r\n        if (file != null) {\r\n          /*  await firebase.database().ref().once('value', (snapshot)  => {\r\n               // var userList = snapshot.child(\"users\").val();\r\n               // let user = userList[firebase.auth().currentUser.id];\r\n                //user.ref('picture').set(file.name);\r\n                //snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(file.name);\r\n                snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set({'hola'};\r\n            });*/\r\n\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(this.username);\r\n\r\n           const promise =  firebase.storage().ref().child(this.username).put(file).then(function(snapshot) {\r\n                console.log(\"file uploaded\");\r\n                //window.toUpload = false;\r\n                //forceUpdate();\r\n\r\n            });\r\n\r\n            promise.then(response => {\r\n                this.toUpload = false;\r\n                this.forceUpdate();\r\n            })\r\n            //this.toUpload = false;\r\n            //this.forceUpdate();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n    async fetchImage() {\r\n\r\n        var picname;\r\n        console.log(\"fetchImage running\");\r\n\r\n        await firebase.database().ref().once('value', (snapshot)  => {\r\n            /*var userList = snapshot.child(\"users\").val();\r\n            let user = userList[firebase.auth().currentUser.id];*/\r\n            this.username = snapshot.child(\"mapUIDtoUsername\").child(firebase.auth().currentUser.uid).val();\r\n            picname = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").val();\r\n            //picname = user[\"picture\"].val();\r\n            console.log(\"was here hello world\");\r\n        });\r\n\r\n        console.log(picname);\r\n\r\n        if (true) {\r\n \r\n\r\n            await firebase.storage().ref().child(picname).getDownloadURL().then(function(url) {\r\n                var toReturn = url;\r\n                document.querySelectorAll('img').forEach(function(item){\r\n                    if (item.id == \"img1\") {\r\n                        item.src = toReturn;\r\n                    }\r\n                })\r\n                //return toReturn;\r\n\r\n            }).catch(function(error) {\r\n                switch(error.code) {\r\n                    case 'storage/object-not-found':\r\n                        console.log(\"object not found\");\r\n                        break;\r\n                    case 'storage/unauthorized' :\r\n                        console.log(\"unauthorized\");\r\n                        break;\r\n                    case 'storage/unknown':\r\n                        console.log(\"unknown\");\r\n                        break;\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n\r\n        }\r\n        else {\r\n            return firebase.storage().ref(picname);\r\n        }\r\n\r\n        console.log(\"ends now\");\r\n\r\n\r\n    }\r\n\r\n    async visiterImage() {\r\n        var toRet;\r\n        var strangeruid;\r\n        var picname;\r\n\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            strangeruid = snapshot.child(\"mapUsernameToUID\").child(this.strangername).val();\r\n            console.log(\"helloworld\");\r\n            console.log(this.strangername);\r\n            picname = snapshot.child(\"users\").child(strangeruid).child(\"picture\").val();\r\n        })\r\n        console.log(\"Yupdupbug\");\r\n        console.log(picname);\r\n\r\n        await firebase.storage().ref().child(picname).getDownloadURL().then(function(url) {\r\n            toRet = url;\r\n            document.querySelector('img').src = toRet;\r\n        }).catch(function(error) {\r\n            switch(error.code) {\r\n                case 'storage/object-not-found':\r\n                    console.log(\"object not found\");\r\n                    break;\r\n                case 'storage/unauthorized' :\r\n                    console.log(\"unauthorized\");\r\n                    break;\r\n                case 'storage/unknown':\r\n                    console.log(\"unknown\");\r\n                    break;\r\n\r\n\r\n            }\r\n        });\r\n\r\n    \r\n    }\r\n\r\n\r\n    deletePicture = async event => {\r\n\r\n        console.log(\"deletePicture running\");\r\n\r\n        const promise = firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(\"default.jpg\");\r\n \r\n\r\n        promise.then(response => {\r\n            this.forceUpdate();\r\n        })\r\n\r\n    }\r\n\r\n    changePic () {\r\n        console.log(\"changePic running\");\r\n        this.toUpload = true;\r\n        this.forceUpdate();\r\n    }\r\n\r\n   /* async componentDidMount() {\r\n        if (this.toUpload) {\r\n            this.setState(true);\r\n        }\r\n    }*/\r\n\r\n    render() {\r\n        if (this.visiting == false) {\r\n            if (this.toUpload == false) {\r\n                console.log(\"here first\");\r\n                return(\r\n                <div>\r\n                    <ProfilepicView image = {this.fetchImage()} changeProfPic = {this.changePic} deletePic = {this.deletePicture} name={this.username}/>\r\n                </div>\r\n                );\r\n            }\r\n            else {\r\n                console.log(\"wrong place\");\r\n                return (\r\n                <div>\r\n                    <NewProfilepicView image = {this.fetchImage()} changeProfPic = {this.upLoadImage}></NewProfilepicView>\r\n                </div>\r\n                );\r\n            }\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n                    <VisitedProfilepic image={this.visiterImage()}/>\r\n                </div>\r\n            )\r\n        }\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(ProfilePicture);","import React from \"react\";\r\n\r\nconst LoggedInUserView = ({ userProfile, deleteAccount})=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <button onClick={userProfile.editProfile}>Edit</button>\r\n          <br></br>\r\n          <button type='button' style={{marginLeft: \"365px\"}} onClick={deleteAccount}>Delete account</button>\r\n          </form>\r\n\r\n          <div>\r\n            <label>Followers :  </label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          </div>\r\n          \r\n          <div>\r\n            <label> Following :  </label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          </div>\r\n\r\n        </div>\r\n    );\r\n}; \r\nexport default LoggedInUserView;","import React from \"react\";\r\n\r\nconst LoggedInUserEditView = ({ userProfile, deleteAccount })=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n          <label>Username:</label><label id='username'>{userProfile.username}</label>\r\n          <button type='button' style={{marginLeft: \"365px\"}} onClick={deleteAccount}>Delete account</button>\r\n          <br></br>\r\n          <label>Followers:</label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          <br></br>\r\n          <label>Following:</label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          <br></br>\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <br></br>\r\n          <input\r\n            id=\"bioTextBox\"\r\n            name=\"Bio\"\r\n            type=\"bio\"\r\n            placeholder=\"New bio\"\r\n          />\r\n          <br></br>\r\n          <button onClick={userProfile.saveChanges}>Save Changes</button>\r\n          <br></br>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default LoggedInUserEditView;","import React, { Component } from 'react';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport helperfunctions from '../helperfunctions.js'\r\nimport Microblogs from '../Microblogs'\r\nimport CheckboxContainer from '../ProfilePage/checkBox.jsx'\r\n\r\nimport ProfilePicture from '../ProfilePicture'\r\nimport LoggedInUserView from \"./UserProfileViews/LoggedInUserView\";\r\nimport LoggedInUserEditView from \"./UserProfileViews/LoggedInUserEditView\"\r\nimport VisitedUserView from \"./UserProfileViews/VisitedUserView\"\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport { resolve } from 'q';\r\nimport ProfilePageView from '../ProfilePage/ProfilePageView.js';\r\n\r\nimport firebase from \"firebase\";\r\n\r\nclass User extends React.Component{\r\n\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n\r\n        this.username = props.user.userData.username;\r\n        this.loggedIn = props.user.userData.loggedIn;\r\n        this.loggedInViewingOwnProfile = props.user.userData.viewingOwnProfile;\r\n\r\n        this.editProfile = this.editProfile.bind(this);\r\n        this.deleteAccount = this.deleteAccount.bind(this);\r\n        this.saveChanges = this.saveChanges.bind(this);\r\n        this.followOrUnfollowUser = this.followOrUnfollowUser.bind(this);\r\n        this.directMessageUser = this.directMessageUser.bind(this);\r\n        this.blockUser = this.blockUser.bind(this);\r\n        \r\n        this.renderLoggedInUser = this.renderLoggedInUser.bind(this);\r\n        this.renderVisitedUser = this.renderVisitedUser.bind(this);\r\n\r\n        this.state = {\r\n            loaded: false\r\n        }\r\n        \r\n        this.editMode = false;\r\n    }\r\n\r\n    editProfile(){\r\n        this.editMode = true;\r\n        this.setState({\r\n          editMode : 1\r\n        })\r\n    }\r\n\r\n  deleteAccount() {\r\n    this.loggedIn = false;\r\n    this.props.history.push({\r\n        pathname: \"/DeleteAccount\"\r\n    });\r\n  }\r\n  \r\n    saveChanges(){\r\n    \r\n        var bio_cont = document.getElementById('bioTextBox').value;\r\n        helperfunctions.postCurrentUserBio(bio_cont);\r\n\r\n        this.editMode = false;\r\n        this.setState({\r\n        mustUpdate : 1\r\n        })\r\n    }\r\n\r\n    async followOrUnfollowUser(){\r\n    \r\n        if (document.getElementById('followbutton').textContent ==  \"Follow\") {\r\n            await helperfunctions.followUserIAmViewing(this.username);\r\n            document.getElementById('followbutton').textContent = \"Unfollow\";\r\n            this.setState({ follow : 0});\r\n        } else {\r\n            await helperfunctions.unfollowUserIAmViewing(this.username);\r\n            document.getElementById('followbutton').textContent = \"Unfollow\";\r\n            this.setState({ follow : 1});\r\n            document.getElementById('followbutton').textContent = \"Follow\";\r\n        }\r\n\r\n        this.followersAndFollowing = await helperfunctions.getFollowersAndFollowing(this.username);\r\n        this.userProfile.followersAndFollowing = this.followersAndFollowing;\r\n        this.setState({ mustUpdate : 1})\r\n    }\r\n\r\n    directMessageUser() {\r\n        this.props.history.push({\r\n            pathname: \"/chat\",\r\n            state: { dmUsername: this.username,\r\n                    topBar: false }\r\n        });\r\n    }\r\n\r\n    async blockUser() {\r\n        if(document.getElementById('blockbutton').textContent === \"Block\")\r\n        {\r\n            var currBlocked = await helperfunctions.getBlockedUser();\r\n            if(!currBlocked.includes(this.username))\r\n            {\r\n                var blockedUsers = [];\r\n                blockedUsers.push(this.username);\r\n                await helperfunctions.addBlockedUser(blockedUsers);\r\n            }\r\n            document.getElementById('blockbutton').textContent = \"Unblock\";\r\n            document.getElementById('directmessagebutton').disabled = true;\r\n        }\r\n        else if(document.getElementById('blockbutton').textContent === \"Unblock\")\r\n        {\r\n            var currBlocked = await helperfunctions.getBlockedUser();\r\n            if(currBlocked.includes(this.username))\r\n            {\r\n                var blockedUsers = [];\r\n                blockedUsers.push(this.username);\r\n                await helperfunctions.removeBlockedUser(blockedUsers);\r\n            }\r\n            document.getElementById('blockbutton').textContent = \"Block\";\r\n            document.getElementById('directmessagebutton').disabled = false;\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        this.userProfile = new Object();\r\n        this.userProfile.saveChanges = this.saveChanges;\r\n        this.userProfile.editProfile = this.editProfile;\r\n        this.userProfile.followUser = this.followOrUnfollowUser;\r\n        this.userProfile.dmUser = this.directMessageUser;\r\n        this.userProfile.blockUser = this.blockUser;\r\n        await this.downloadUserProfile(this.userProfile);\r\n        this.setState({loaded : true});\r\n\r\n        if(!this.loggedIn){\r\n            document.getElementById('followbutton').disabled = true;\r\n            document.getElementById('logout').disabled = true;\r\n            document.getElementById('profile').disabled = true;\r\n        }\r\n\r\n        var blockedUsers = await helperfunctions.getBlockedUser();\r\n\r\n        var usersBlockedFrom = await helperfunctions.getUsersBlockedFrom();\r\n\r\n        if(this.loggedInViewingOwnProfile === false)\r\n        {\r\n            if(usersBlockedFrom !== undefined && usersBlockedFrom.length !== 0 && usersBlockedFrom.includes(this.username))\r\n            {\r\n                document.getElementById(\"directmessagebutton\").disabled = true;\r\n                if(blockedUsers !== undefined && blockedUsers.length !== 0 && blockedUsers.includes(this.username))\r\n                {\r\n                    document.getElementById(\"blockbutton\").textContent = \"Unblock\";\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById(\"blockbutton\").textContent = \"Block\";\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if(blockedUsers !== undefined && blockedUsers.length !== 0 && blockedUsers.includes(this.username))\r\n                {\r\n                    document.getElementById(\"directmessagebutton\").disabled = true;\r\n                    document.getElementById(\"blockbutton\").textContent = \"Unblock\";\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById(\"directmessagebutton\").disabled = false;\r\n                    document.getElementById(\"blockbutton\").textContent = \"Block\";\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        //check if I am currently following the user I am viewing and if so, change button text to \"unfollow\"\r\n        if(this.loggedInViewingOwnProfile === false)\r\n        {\r\n            await firebase.database().ref().once('value', (snapshot) => {\r\n                var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n                var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n    \r\n                if ((this.userProfile.followersAndFollowing.followers).includes(currUserName)) {\r\n                    document.getElementById('followbutton').textContent = \"Unfollow\";\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    async componentDidUpdate(prevProps){\r\n\r\n        await this.downloadUserProfile(this.userProfile);\r\n\r\n        if (this.props.userID !== prevProps.userID) {\r\n            this.fetchData(this.props.userID);\r\n        }\r\n\r\n        if(this.state.mustUpdate == 1){\r\n            this.setState({\r\n                mustUpdate : 0\r\n            })\r\n        }\r\n    }\r\n\r\n    async downloadUserProfile(userProfile){\r\n\r\n        userProfile.username = this.username;\r\n\r\n        this.bio = await helperfunctions.getBio(this.username);\r\n        userProfile.bio = this.bio;\r\n\r\n        this.followersAndFollowing = await helperfunctions.getFollowersAndFollowing(this.username);\r\n        userProfile.followersAndFollowing = this.followersAndFollowing;\r\n\r\n        this.microblogs = await helperfunctions.getMicroblogsForUser(this.username);\r\n        userProfile.microblogs = this.microblogs;\r\n\r\n        resolve(\"done\");\r\n\r\n    }\r\n\r\n    render() {\r\n        if(this.state.loaded){\r\n\r\n            if(this.loggedIn){\r\n                if (this.loggedInViewingOwnProfile) {\r\n                    return this.renderLoggedInUser(this.userProfile, this.deleteAccount);\r\n                } else {\r\n\r\n                    return this.renderVisitedUser(this.userProfile);\r\n                }\r\n            }\r\n            else{\r\n                return this.renderVisitedUser(this.userProfile);\r\n            }\r\n\r\n        } else{\r\n            return null;\r\n        }\r\n        \r\n    }\r\n\r\n    renderLoggedInUser(userProfile, deleteAccount){\r\n\r\n        if(this.editMode){\r\n            return(\r\n                <div>\r\n                    <LoggedInUserEditView userProfile={userProfile} deleteAccount={deleteAccount}/>\r\n                    <Microblogs microblogs={userProfile.microblogs} username={userProfile.username} />\r\n                    \r\n                </div>\r\n            );\r\n        }\r\n\r\n        else{\r\n            return (\r\n                <div>\r\n                    <ProfilePicture strangername={this.username} visiting={false}/>\r\n                    <LoggedInUserView userProfile={userProfile} deleteAccount={deleteAccount}/>\r\n                    <Microblogs microblogs={userProfile.microblogs} username={userProfile.username} />\r\n                    \r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderVisitedUser(userProfile){\r\n\r\n        return(\r\n            <div>\r\n                <ProfilePicture strangername={this.username} visiting={true}/>\r\n                <VisitedUserView userProfile={userProfile}/>\r\n                <Microblogs microblogs={userProfile.microblogs} username={userProfile.username} />\r\n               \r\n            </div>\r\n        );\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport default withRouter(User);\r\n","import React from \"react\";\r\nimport User from \"../User/index\"\r\nimport UserData from \"../DataObjects/UserData\";\r\nconst ProfilePageView = (userData) => {  \r\n  \r\n    return(\r\n        <div>\r\n          <User user={userData}></User>\r\n          <form>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default ProfilePageView;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport ProfilePageView from \"./ProfilePageView\";\r\nimport UserData from \"../DataObjects/UserData\";\r\nimport TopBar from \"../TopBar\";\r\nimport ProfilePicture from \"../ProfilePicture\";\r\nimport firebase from \"firebase\";\r\nimport { resolve } from \"q\";\r\nimport CheckboxContainer from \"./checkBox.jsx\";\r\n\r\nclass ProfilePage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    //this.getUser = this.getUser.bind(this);\r\n    this.localProps = props;\r\n\r\n    this.state = {\r\n      //checkedItems: new Map(),\r\n      loaded: false\r\n    };\r\n    //this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.setUsername();\r\n    this.setState({ loaded: true });\r\n  }\r\n\r\n  async setUsername() {\r\n    await firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        var UIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n\r\n        if (\r\n          firebase.auth().currentUser == undefined ||\r\n          firebase.auth().currentUser == null\r\n        ) {\r\n          if (this.localProps.location.pathname != \"/profile\") {\r\n            this.path = this.localProps.location.pathname;\r\n            this.username = this.path.substring(9, this.path.length);\r\n            this.userData = new UserData(this.username, false);\r\n          } else {\r\n            this.localProps.history.push({\r\n              pathname: \"/login\"\r\n            });\r\n            return;\r\n          }\r\n        } else {\r\n          if (this.localProps.location.pathname != \"/profile\") {\r\n            this.path = this.localProps.location.pathname;\r\n            this.username = this.path.substring(9, this.path.length);\r\n\r\n            if (\r\n              this.username == UIDtoUsername[firebase.auth().currentUser.uid]\r\n            ) {\r\n              this.userData = new UserData(this.username, true, true);\r\n            } else {\r\n              this.userData = new UserData(this.username, true, false);\r\n            }\r\n          } else {\r\n            this.userData = new UserData(\r\n              UIDtoUsername[firebase.auth().currentUser.uid],\r\n              true,\r\n              true\r\n            );\r\n          }\r\n        }\r\n      });\r\n\r\n    resolve(\"done\");\r\n  }\r\n\r\n  //getUser(username){\r\n  //this.userData = new UserData(username, false, false);\r\n  //}\r\n\r\n  // handleChange(e) {\r\n  //   const item = e.target.name;\r\n  //   const isChecked = e.target.checked;\r\n  //   this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }));\r\n  // }\r\n\r\n  render() {\r\n    if (this.state.loaded) {\r\n      return (\r\n        <div>\r\n          <TopBar />\r\n\r\n          <ProfilePageView userData={this.userData} />\r\n          <CheckboxContainer username={this.username} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default withRouter(ProfilePage);\r\n","import React from 'react';\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass ProfilePageRouting extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.goToProfile = this.goToProfile.bind(this);\r\n    }\r\n\r\n    goToProfile() {\r\n        var userData = this.props.location.state.userData;\r\n        var text = this.props.location.state.text;\r\n        if (text != undefined) {\r\n            this.props.history.push({\r\n                pathname: \"/profile/\" + text,\r\n                state: { userData: userData }\r\n            });\r\n        }\r\n        else {\r\n            this.props.history.push({\r\n                pathname: \"/profile\",\r\n                state: { userData: userData }\r\n            }); \r\n        }\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                {this.goToProfile()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\nexport default withRouter(ProfilePageRouting);","import React from \"react\";\r\n\r\nconst DeleteAccountAuthenticationView = ({ onSubmit }) => {  \r\n  \r\n  return (\r\n    <div>\r\n        <h1>User verification</h1>\r\n        <form onSubmit={onSubmit}>      \r\n        \r\n        <label>\r\n          Email/Username\r\n          <input\r\n            name=\"email\"\r\n            //type=\"email\"\r\n            placeholder=\"Email/Username\"\r\n          />\r\n        </label>\r\n        <label>\r\n          Password\r\n          <input\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n          />          \r\n        </label>\r\n        <button type=\"submit\">Delete Account</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteAccountAuthenticationView;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport app from \"../base\";\r\nimport TopBarLoginSignup from \"../TopBarLoginSignup\";\r\nimport helperfunctions from '../helperfunctions.js'\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport firebase from \"firebase\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport DeleteAccountAuthenticationView from \"./DeleteAccountAuthenticationView\";\r\n\r\nclass DeleteAcountAuthenticationContainter extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.handleLogIn = this.handleLogIn.bind(this);\r\n    }\r\n  \r\n    handleLogIn = async event => {\r\n      event.preventDefault();\r\n      const { email, password } = event.target.elements;\r\n      try {\r\n        var user_exists = false;\r\n        var currentEmail = firebase.auth().currentUser.email;\r\n        var currentUsername = null;\r\n\r\n        if(email.value == currentEmail) {\r\n            user_exists = true;\r\n            await app\r\n            .database()\r\n            .ref()\r\n            .once(\"value\", snapshot => {\r\n                var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n                var username;\r\n                for (username in user_email_list) {\r\n                    if (user_email_list[username] == currentEmail) {\r\n                        currentUsername = username;\r\n                        break;\r\n                    }\r\n                }\r\n            }); \r\n        }\r\n        else {\r\n            await app\r\n            .database()\r\n            .ref()\r\n            .once(\"value\", snapshot => {\r\n                var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n                \r\n                console.log(user_email_list[email.value]);\r\n                if (user_email_list[email.value] != undefined) {\r\n                    if (user_email_list[email.value] == currentEmail) {\r\n                        currentUsername = email.value;\r\n                        user_exists = true;\r\n                    }\r\n                }\r\n            }); \r\n        }\r\n  \r\n        if (!user_exists) {\r\n          toast(\"The Email/Username or Password is incorrect\");\r\n          toast(\"The Email/Username or Password is incorrect\", { containerId: \"B\" });\r\n          return;\r\n        }\r\n  \r\n        var valid_password = true;\r\n        this.user = await app\r\n          .auth()\r\n          .signInWithEmailAndPassword(currentEmail, password.value).catch(function() {\r\n            valid_password = false;\r\n          });\r\n\r\n        if (!valid_password) {\r\n          toast(\"The Email/Username or Password is incorrect\");\r\n          toast(\"The Email/Username or Password is incorrect\", { containerId: \"B\" });\r\n          return;\r\n        }\r\n        \r\n        console.log(currentUsername);\r\n        helperfunctions.deleteUserData(currentUsername);\r\n        toast(\"User account deleted\");\r\n        this.loggedIn = false;\r\n\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n      } catch (error) {\r\n        toast(error);\r\n      }\r\n    };\r\n    render() {\r\n      return (\r\n        <div>\r\n          <ToastContainer\r\n            enableMultiContainer\r\n            containerId={\"B\"}\r\n            position={toast.POSITION.TOP_RIGHT}\r\n          />\r\n\r\n          <TopBarLoginSignup />\r\n          <DeleteAccountAuthenticationView onSubmit={this.handleLogIn} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default withRouter(DeleteAcountAuthenticationContainter);","import { Component } from \"react\";\r\nimport React from \"react\";\r\n\r\nclass Messages extends Component {\r\n  render() {\r\n    const { messages } = this.props;\r\n    return (\r\n      <ul id=\"messageslist\" className=\"Messages-list\">\r\n        {messages.map(m => this.renderMessage(m))}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  renderMessage(message) {\r\n    const { member, text } = message;\r\n    const { currentMember } = this.props;\r\n    const messageFromMe = member.id === currentMember.id;\r\n    const className = messageFromMe\r\n      ? \"Messages-message currentMember\"\r\n      : \"Messages-message\";\r\n    return (\r\n      <li className={className}>\r\n        <span\r\n          className=\"avatar\"\r\n          //style={{ backgroundColor: member.clientData.color }}\r\n        />\r\n        <div className=\"Message-content\">\r\n          <div className=\"username\">{member.username}</div>\r\n          <div className=\"text\">{text}</div>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Messages;\r\n","import { Component } from \"react\";\r\nimport React from \"react\";\r\n\r\nclass Input extends Component {\r\n  state = {\r\n    text: \"\"\r\n  };\r\n\r\n  onChange(e) {\r\n    this.setState({ text: e.target.value });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    this.setState({ text: \"\" });\r\n    this.props.onSendMessage(this.state.text);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Input\">\r\n        <form onSubmit={e => this.onSubmit(e)}>\r\n          <input\r\n            onChange={e => this.onChange(e)}\r\n            value={this.state.text}\r\n            id=\"placeholder\"\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            autofocus=\"true\"\r\n          />\r\n          <button id=\"send\">Send</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Input;\r\n","import React, { Component } from \"react\";\r\nimport \"./chat.css\";\r\nimport Messages from \"./Messages\";\r\nimport Input from \"./Input\";\r\nimport { resolve } from \"path\";\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport { timeout } from \"q\";\r\n\r\n// Current Issues ----\r\n// Refresh does not work well\r\n// the data is temporary, need to change to user data\r\n// need to fix the this.userData and how to understand it.\r\n\r\nfunction randomColor() {\r\n  return \"#\" + Math.floor(Math.random() * 0xffffff).toString(16);\r\n}\r\n\r\nclass Chat extends Component {\r\n  state = {\r\n    messages: [],\r\n    member: {\r\n      username: \"ABCD\",\r\n      color: randomColor()\r\n    }\r\n  };\r\n\r\n  async componentDidMount() {\r\n    //verify user is logged in before displaying page\r\n    this.updateUserName();\r\n    this.getUsernameOfOtherUser();\r\n\r\n    await firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").val();     \r\n      if (retrievedDMUsers != undefined || retrievedDMUsers != null) {\r\n        for (let i = 0; i < Object.keys(retrievedDMUsers).length; i++) {\r\n          this.addButton(Object.keys(retrievedDMUsers)[i]);\r\n        }\r\n      }\r\n\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        for (let i = 0; i < retrievedUnseenDMUsers.length; i++) {\r\n          this.changeButtonColor(retrievedUnseenDMUsers[i], \"#fff000\");\r\n        }\r\n      }\r\n    });\r\n\r\n    var buttons = document.getElementsByTagName('button');\r\n    for (var i = 0, len = buttons.length; i < len; i++) {\r\n      if (buttons[i].innerHTML != \"Send\") {\r\n        buttons[i].addEventListener('click', mouseEvt => {\r\n          this.userButtonClick(mouseEvt.toElement.id);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  addButton(username) {\r\n    var ul = document.getElementById(\"userlist\");\r\n    var button = ul.appendChild(document.createElement(\"button\"));\r\n    button.id = username;\r\n    button.innerHTML = username;\r\n    button.outerHTML = button.outerHTML + \"<br></br>\";\r\n    console.log(\"testcolor\");\r\n    button.style.background = \"#ff0000\";\r\n  }\r\n\r\n  changeButtonColor(buttonID, color) {\r\n    var button = document.getElementById(buttonID);\r\n    if (button == null) {\r\n      console.log(\"add new button\");\r\n      var ul = document.getElementById(\"userlist\");\r\n      var button = ul.appendChild(document.createElement(\"button\"));\r\n      button.id = buttonID;\r\n      button.innerHTML = buttonID;\r\n      button.outerHTML = button.outerHTML + \"<br></br>\";\r\n      console.log(color);\r\n      var property=document.getElementById(buttonID);\r\n      property.style.backgroundColor = color;\r\n      var buttons = document.getElementsByTagName('button');\r\n      for (var i = 0, len = buttons.length; i < len; i++) {\r\n        if (buttons[i].innerHTML == buttonID) {\r\n          buttons[i].addEventListener('click', mouseEvt => {\r\n            console.log(\"testclick\");\r\n            this.userButtonClick(mouseEvt.toElement.id);\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      button.style.background = color;\r\n    }\r\n  }\r\n\r\n  async getUsersBlocked(inputUsername) {\r\n    var blockedFrom = [];\r\n    await firebase.database().ref().once('value', (snapshot) => {\r\n      let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n      let otherUIDRetrieved = mapUsernameToUID[inputUsername];\r\n      if(snapshot.child(\"users\").child(otherUIDRetrieved).hasChild(\"blockedUsers\") === true)\r\n      {\r\n        blockedFrom = snapshot.child(\"users\").child(otherUIDRetrieved).child(\"blockedUsers\").val();\r\n      }\r\n    });\r\n    return blockedFrom;\r\n  }\r\n\r\n  async userButtonClick(username) {   \r\n    this.props.location.state.dmUsername = username; \r\n    var currBlocked = await helperfunctions.getBlockedUser();\r\n    var blockedFrom = await this.getUsersBlocked(username);\r\n    if(currBlocked.includes(username))\r\n    {\r\n      this.setPlaceholderInputBar(\"You are blocking \" + username);\r\n      document.getElementById(\"placeholder\").disabled = true;\r\n      document.getElementById(\"send\").disabled = true;\r\n    } else if (blockedFrom.includes(this.userData.username)) {\r\n      this.setPlaceholderInputBar(\"You are being blocked by \" + username);\r\n      document.getElementById(\"placeholder\").disabled = true;\r\n      document.getElementById(\"send\").disabled = true;\r\n    } else {\r\n      this.setPlaceholderInputBar(\"Send message to \" + username);\r\n      document.getElementById(\"placeholder\").disabled = false;\r\n      document.getElementById(\"placeholder\").focus();\r\n      document.getElementById(\"send\").disabled = false;\r\n    }\r\n\r\n    console.log(\"userbuttonclick() \" + username);\r\n    this.props.location.state.dmUsername = username;\r\n    this.props.location.state.topBar = false;\r\n    this.currentRetrievedData = null;\r\n    this.changeButtonColor(username, \"orangered\");\r\n    this.removeUserFromUnseenList(username);\r\n    this.getUsernameOfOtherUser();\r\n    this.fillWithPreviousMessages();\r\n    this.listenToPersistantMessages();\r\n    this.listenToUsersBlockedFrom();\r\n  }\r\n\r\n  async removeUserFromUnseenList(username) {\r\n    firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        if (retrievedUnseenDMUsers.indexOf(username) != -1) {\r\n          retrievedUnseenDMUsers.splice(retrievedUnseenDMUsers.indexOf(username), 1);\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async getUsernameOfOtherUser() {\r\n    await firebase.database().ref().once('value', (snapshot)  => {\r\n      let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n      let otherUIDRetrieved = mapUsernameToUID[this.props.location.state.dmUsername];\r\n      this.otherUID = otherUIDRetrieved;\r\n    });\r\n  }\r\n\r\n  async updateUserName() {\r\n    firebase.auth().onAuthStateChanged(async user => {\r\n      if (!user) {\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n        return null;\r\n      } else {\r\n        var loggedIn = true;\r\n        var user = firebase.auth().currentUser;\r\n        this.userData = await helperfunctions.getUserdataOfUser(\r\n          user.uid,\r\n          loggedIn\r\n        );\r\n        this.state.member.username = this.userData.username;\r\n        this.state.member.id = this.userData.username;\r\n        if (this.props.location.state.topBar == false) {\r\n          this.fillWithPreviousMessages();\r\n          this.listenToPersistantMessages();\r\n          this.setPlaceholderInputBar(\"Send message to \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = false;\r\n          document.getElementById(\"send\").disabled = false;\r\n          this.listenToUsersBlockedFrom();\r\n        } else {\r\n          this.setPlaceholderInputBar(\"To send a message, click on a username\");\r\n          document.getElementById(\"placeholder\").disabled = true;\r\n          document.getElementById(\"send\").disabled = true;\r\n        }\r\n        this.listenToUnseenUsersDM();\r\n      }\r\n    });\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let otherUID = \"\";\r\n    let currentRetrievedData = [];\r\n\r\n    this.userButtonClick = this.userButtonClick.bind(this);\r\n  }\r\n\r\n  render() {\r\n      return (\r\n      <div className=\"App\">\r\n        <div className=\"App-header\">\r\n          <h1>Twisster Chat</h1>\r\n        </div>\r\n\r\n        <ul id=\"userlist\">\r\n        \r\n        </ul>\r\n\r\n        <Messages\r\n          messages={this.state.messages}\r\n          currentMember={this.state.member}\r\n        />\r\n        <Input onSendMessage={this.onSendMessage} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setPlaceholderInputBar(text) {\r\n    document.getElementById(\"placeholder\").placeholder = text;\r\n  }\r\n\r\n  fillWithPreviousMessages() {\r\n    if (document.getElementById(\"messageslist\") == undefined || document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    document.getElementById(\"messageslist\").innerHTML = \"\";\r\n    firebase.database().ref().once('value', (snapshot) => {\r\n      var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).val();\r\n      this.currentRetrievedData = retrievedData;\r\n\r\n      if (retrievedData != undefined || retrievedData != null) {\r\n        for (let i = 0; i < retrievedData.length; i++) {\r\n          let username = retrievedData[i].substr(0, retrievedData[i].indexOf(','));\r\n          let message = retrievedData[i].substr(retrievedData[i].indexOf(',') + 1, retrievedData[i].length - 1 - retrievedData[i].indexOf(','));\r\n\r\n          if (username == this.userData.username) {\r\n            this.appendMessageFromMe(message, false);\r\n          } else {\r\n            this.appendMessageFromOtherUser(message);\r\n          }\r\n        }\r\n      }\r\n\r\n      setTimeout(function() {\r\n        if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n          var element = document.getElementById(\"messageslist\");\r\n          element.scrollTop = element.scrollHeight;\r\n        }\r\n      }, 200);\r\n    });\r\n  }\r\n\r\n  appendMessageFromMe(inputText, adjustData) {\r\n    const messages = this.state.messages;\r\n    messages.push({ member: this.state.member, text: inputText });\r\n    this.setState({ messages });\r\n\r\n    if (adjustData) {\r\n      if (this.currentRetrievedData == undefined || this.currentRetrievedData == null) {\r\n        this.currentRetrievedData = [this.userData.username + \",\" + inputText];\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"persistantmessages\").child(this.userData.username).set({\"0\": this.userData.username + \",\" + inputText});\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).set({\"0\": this.userData.username + \",\" + inputText});\r\n      } else {\r\n        this.currentRetrievedData.push(this.userData.username + \",\" + inputText);\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"persistantmessages\").child(this.userData.username).set(this.currentRetrievedData);\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).set(this.currentRetrievedData);\r\n      }\r\n    }\r\n  }\r\n\r\n  appendMessageFromOtherUser(inputText) {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    let member2 = {\r\n      username: this.props.location.state.dmUsername,\r\n      color: randomColor(),\r\n      id: this.props.location.state.dmUsername\r\n    };\r\n    const messages = this.state.messages;\r\n    messages.push({ member: member2, text: inputText });\r\n    this.setState({ messages });\r\n\r\n    setTimeout(function() {\r\n      if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n        var element = document.getElementById(\"messageslist\");\r\n        element.scrollTop = element.scrollHeight;\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  listenToPersistantMessages() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', (snapshot) => {\r\n        var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).val();\r\n        if (this.currentRetrievedData == null || retrievedData == null || this.currentRetrievedData[this.currentRetrievedData.length - 1] == retrievedData[retrievedData.length - 1]) {\r\n          return;\r\n        }\r\n        \r\n        this.currentRetrievedData = retrievedData;\r\n        if (retrievedData != undefined || retrievedData != null) {\r\n          if (this.userData.username != retrievedData[retrievedData.length - 1].substr(0, retrievedData[retrievedData.length - 1].indexOf(','))) {\r\n            this.appendMessageFromOtherUser(retrievedData[retrievedData.length - 1].substr(retrievedData[retrievedData.length - 1].indexOf(',') + 1, retrievedData[retrievedData.length - 1].length - 1 - retrievedData[retrievedData.length - 1].indexOf(',')));\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  listenToUsersBlockedFrom() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', async (snapshot) => {\r\n        var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").val();\r\n        if (retrievedData == undefined || retrievedData == null) {\r\n          this.setPlaceholderInputBar(\"Send message to \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = false;\r\n          document.getElementById(\"placeholder\").focus();\r\n          document.getElementById(\"send\").disabled = false;\r\n          return;\r\n        }\r\n        \r\n        for (let i = 0; i < retrievedData.length; i++) {\r\n          if (this.props.location.state.dmUsername == retrievedData[i]) {\r\n            var blockedFrom = await this.getUsersBlocked(retrievedData[i]);\r\n            if (blockedFrom.includes(this.userData.username)) {\r\n              this.setPlaceholderInputBar(\"You are being blocked by \" + retrievedData[i]);\r\n              document.getElementById(\"placeholder\").disabled = true;\r\n              document.getElementById(\"send\").disabled = true;\r\n            } else {\r\n              this.setPlaceholderInputBar(\"Send message to \" + retrievedData[i]);\r\n              document.getElementById(\"placeholder\").disabled = false;\r\n              document.getElementById(\"placeholder\").focus();\r\n              document.getElementById(\"send\").disabled = false;\r\n            }\r\n          }\r\n        }\r\n       \r\n      });\r\n    });\r\n  }\r\n\r\n  listenToUnseenUsersDM() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', (snapshot) => {\r\n        var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n        if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n          for (let i = 0; i < retrievedUnseenDMUsers.length; i++) {\r\n            console.log(this.props.location.state.dmUsername);\r\n            if (this.props.location.state.dmUsername != retrievedUnseenDMUsers[i]) {\r\n              console.log(\"listenToUnseenUsersDM changeButtonColor of : \" + retrievedUnseenDMUsers[i]);\r\n              this.changeButtonColor(retrievedUnseenDMUsers[i], \"#fff000\");\r\n            } else {\r\n              if (retrievedUnseenDMUsers.indexOf(this.props.location.state.dmUsername) != -1) {\r\n                retrievedUnseenDMUsers.splice(retrievedUnseenDMUsers.indexOf(this.props.location.state.dmUsername), 1);\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  onSendMessage = message => {\r\n\r\n    firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        if (!retrievedUnseenDMUsers.includes(this.userData.username)) {\r\n          retrievedUnseenDMUsers.push(this.userData.username);\r\n          firebase.database().ref().child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n        }\r\n      } else {\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").set({\"0\": this.userData.username });\r\n      }\r\n    });\r\n\r\n    //this.changeButtonColor(this.props.location.state.dmUsername, \"#fff000\");\r\n\r\n    this.appendMessageFromMe(message, true);\r\n\r\n    setTimeout(function() {\r\n      if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n        var element = document.getElementById(\"messageslist\");\r\n        element.scrollTop = element.scrollHeight;\r\n      }\r\n    }, 200);\r\n  };\r\n}\r\n\r\nexport default withRouter(Chat);\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\n\r\nimport Home from \"./Home\";\r\nimport Login from \"./LogIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport LandingPage from \"./LandingPage/index\";\r\nimport ProfilePage from \"./ProfilePage\";\r\nimport ProfilePageRouting from \"./ProfilePageRouting\";\r\nimport DeleteAccountAuthentication from \"./DeleteAccountAuthentication\"\r\nimport Chat from \"./Chat\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ntoast.configure();\r\n\r\nconst App = () => {\r\n  const notify = () => toast(\"Wow so easy !\");\r\n  return (\r\n    <Router>\r\n      <div>\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route exact path=\"/login\" component={Login} />\r\n        <Route exact path=\"/signup\" component={SignUp} />\r\n        <Route exact path=\"/landing\" component={LandingPage} />\r\n        <Route path=\"/profile\" component={ProfilePage} />\r\n        <Route path=\"/redirecttoaccount\" component={ProfilePageRouting} />\r\n        <Route path=\"/DeleteAccount\" component={DeleteAccountAuthentication} />\r\n        <Route path=\"/chat\" component={Chat} />\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport AlertTemplate from 'react-alert-template-basic'\r\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert'\r\n\r\n\r\n\r\n//ReactDOM.render(<App />, document.getElementById('root'));\r\nReactDOM.render((\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  ), document.getElementById('root'));\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/twisster_logo.d26fb7f2.png\";"],"sourceRoot":""}