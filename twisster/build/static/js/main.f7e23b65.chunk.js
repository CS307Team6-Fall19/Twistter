(window.webpackJsonpq=window.webpackJsonpq||[]).push([[0],{145:function(e,t,a){},169:function(e,t,a){e.exports=a(345)},174:function(e,t,a){},176:function(e,t,a){},190:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},332:function(e,t,a){},333:function(e,t){e.exports="data:image/png;base64,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"},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),o=a.n(s),c=(a(174),a(78)),i=a(17),l=a(4),u=a.n(l),d=a(7),h=a(11),m=a(9),p=a(13),f=a(14),g=a(16),b=(a(176),function(){return r.a.createElement("div",{className:"inner-body"},r.a.createElement("label",{className:"top-bar-twisster"},"Twistter"))}),v=a(2),U=a.n(v),k=function(e){function t(e){return Object(h.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"top-bar"},r.a.createElement(b,null))}}]),t}(r.a.Component),E=Object(i.e)(k),w=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).goLogIn=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push({pathname:"/login"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.goSignUp=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push({pathname:"/signup"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement("h1",null,"Home"),r.a.createElement("form",null,r.a.createElement("button",{onClick:this.goLogIn},"Login"),r.a.createElement("button",{onClick:this.goSignUp},"Signup")))}}]),t}(n.Component),y=Object(i.e)(w),O=a(10),j=U.a.initializeApp({apiKey:"AIzaSyBz9SOr8DjfgATYDORi2l185jmlbzKLsKk",authDomain:"twistter.firebaseapp.com",databaseURL:"https://twistter.firebaseio.com",projectId:"twistter",storageBucket:"gs://twistter.appspot.com/",messagingSenderId:"71618548828"}),x=(a(190),a(60)),I=a(74),B=a.n(I),D=function(e){return r.a.createElement("img",{className:"logo-twisster",src:B.a},e.children)},C=function(e){return r.a.createElement("label",{className:"name-twisster"},"twisster")},T=function(e){return r.a.createElement("div",{className:"login-prompt"},e.children)},A=function(e){return r.a.createElement("input",{name:"email",className:"login-textbox",placeholder:"Email/Username",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Email/Username"}},e.children)},P=function(e){return r.a.createElement("input",{name:"password",className:"password-textbox",type:"password",placeholder:"Password",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Password"},focus:!0},e.children)},M=function(e){var t=e.onSubmit,a=e.onClick;return r.a.createElement("div",{className:"main-body"},r.a.createElement("div",{className:"body"},r.a.createElement(T,null,r.a.createElement(D,null),r.a.createElement(C,null),r.a.createElement("form",{onSubmit:t},r.a.createElement(A,null),r.a.createElement(P,null),r.a.createElement(x.a,{className:"login-button",variant:"outline-dark",type:"submit"},r.a.createElement("span",null,"Login "))),r.a.createElement(x.a,{className:"signup-button",variant:"outline-dark",type:"submit",onClick:a},r.a.createElement("span",null,"Sign Up ")))))},L=a(18),F=(a(37),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLogIn=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,s,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,r=n.email,s=n.password,e.prev=2,o=!0,e.next=6,j.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();if(1!=r.value.includes("@"))void 0==t[r.value]&&(o=!1),c=t[r.value];else for(var a in c=r.value,o=!1,t)if(t[a]==r.value){o=!0;break}}));case 6:if(o){e.next=10;break}return Object(L.b)("User Account does not exist"),Object(L.b)("User Account does not exist",{containerId:"B"}),e.abrupt("return");case 10:return e.next=12,j.auth().signInWithEmailAndPassword(c,s.value);case 12:if(a.user=e.sent,a.user.user.emailVerified){e.next=17;break}return Object(L.b)("email is not verified! resending verification link..."),U.a.auth().currentUser.sendEmailVerification({url:"http://localhost:3000/login",handleCodeInApp:!0}).then((function(){console.log("sent verification email")})).catch((function(e){Object(L.b)(e)})),e.abrupt("return");case 17:a.props.history.push({pathname:"/landing"}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),Object(L.b)(e.t0);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),a.goSignUp=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push({pathname:"/signup"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLogIn=a.handleLogIn.bind(Object(O.a)(a)),a.goSignUp=a.goSignUp.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L.a,{color:"danger",enableMultiContainer:!0,containerId:"B",position:L.b.POSITION.TOP_RIGHT}),r.a.createElement(M,{onSubmit:this.handleLogIn,onClick:this.goSignUp}))}}]),t}(n.Component)),S=Object(i.e)(F),N=(a(193),function(e){return r.a.createElement("img",{className:"logo-twisster",src:B.a},e.children)}),H=function(e){return r.a.createElement("label",{className:"name-twisster"},"twisster")},R=function(e){return r.a.createElement("input",{name:"email",className:"s_email-textbox",placeholder:"Email",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Email"}},e.children)},z=function(e){return r.a.createElement("div",null,r.a.createElement("label",{className:"return-login"},"Already a member?",r.a.createElement("button",{type:"submit",className:"return-login_b",onClick:e.onClick},"Login")))},Q=function(e){return r.a.createElement("input",{name:"username",className:"s_username-textbox",placeholder:"Username",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Username"}},e.children)},q=function(e){return r.a.createElement("input",{name:"password",type:"password",className:"s_password-textbox",placeholder:"Password",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Password"}},e.children)},K=function(e){return r.a.createElement("div",{className:"s_login-prompt"},e.children)},G=function(e){var t=e.onSubmit,a=e.onClick;return r.a.createElement(K,null,r.a.createElement("form",{onSubmit:t},r.a.createElement(N,null),r.a.createElement(H,null),r.a.createElement(R,null),r.a.createElement(Q,null),r.a.createElement(q,null),r.a.createElement(x.a,{className:"s_signup-button",variant:"outline-dark",type:"submit"},r.a.createElement("span",null,"Sign Up "))),r.a.createElement(z,{onClick:a}))},V=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleSignUp=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,s,o,c,i,l,d,h,m,p,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,r=n.email,s=n.username,o=n.password,e.prev=2,c=!1,e.next=6,U.a.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();void 0!=t&&void 0!=t[s.value]&&(Object(L.b)("Username already exists"),c=!0)}));case 6:if(1!=c){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,U.a.auth().createUserWithEmailAndPassword(r.value,o.value);case 10:e.sent,(i={})[s.value]=r.value,U.a.database().ref().child("mapUsernameToEmail").update(i),(l={})[s.value]=U.a.auth().currentUser.uid,U.a.database().ref().child("mapUsernameToUID").update(l),(d={})[U.a.auth().currentUser.uid]=s.value,U.a.database().ref().child("mapUIDtoUsername").update(d),h={url:"http://localhost:3000/login",handleCodeInApp:!0},U.a.auth().currentUser.sendEmailVerification(h).then((function(){console.log("sent verification email")})).catch((function(e){Object(L.b)(e.message)})),m=new Date,p=m.getTime(),f=U.a.database(),f.ref().child("users").child(U.a.auth().currentUser.uid).set({email:r.value,signupTimestamp:p,picture:"default.jpg"}),U.a.auth().signOut(),a.props.history.push("/login"),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(2),Object(L.b)(e.t0.message);case 34:case"end":return e.stop()}}),e,null,[[2,31]])})));return function(t){return e.apply(this,arguments)}}(),a.goLogin=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push({pathname:"/login"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.goLogin=a.goLogin.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-body"},r.a.createElement(G,{onSubmit:this.handleSignUp,onClick:this.goLogin}))}}]),t}(n.Component),J=Object(i.e)(V),X=(a(194),function(e){function t(e){return Object(h.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tweet-body"},this.props.children)}}]),t}(r.a.Component)),W=(a(195),a(385)),Y=a(151),Z=a.n(Y),_=a(387),$=a(383),ee=a(382),te=a(379),ae=a(384),ne=a(388),re=a(152),se=a.n(re),oe=a(161),ce=a(15),ie=(Object(oe.a)({palette:{primary:te.a,secondary:{main:"#1F3648"}}}),function(e){return r.a.createElement(pe,null,r.a.createElement("div",{className:"inner-body",style:{height:"80%"}},r.a.createElement(fe,{image:e.image}),r.a.createElement("div",{className:"body",style:{flex:"0 0 456px"}},r.a.createElement("div",{className:"inner-body"},r.a.createElement(be,{name:e.name,id:"name"}),r.a.createElement(ge,{handle:e.handle})),r.a.createElement("div",{className:"body"},r.a.createElement(me,{id:"content",placeholder:"How are you feeling today?",rows:"5",multiline:!0,margin:"dense",variant:"standard",color:"primary"}),r.a.createElement(le,{disableUnderline:!0,disabled:!0,id:"showTopics",label:"Added Topics",placeholder:"Added Topics Show Up Here",onSubmit:e.addTopic,variant:"standard"})),r.a.createElement("div",{className:"body",style:{minHeight:"48px"}},r.a.createElement("div",{className:"inner-body"},r.a.createElement(ue,{id:"addTopics",style:{width:"300px"},placeholder:"Add Topics Here",endAdornment:r.a.createElement(ne.a,{position:"end"},r.a.createElement(de,{"aria-label":"add",onClick:e.addTopic},r.a.createElement(Z.a,null)))}),r.a.createElement(he,{size:"large",variant:"extended",onClick:e.submitMicroblog,color:"secondary"},"Post",r.a.createElement(se.a,{style:{margin:"0px 10px 0px"}})))))))}),le=Object(ce.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{"&::placeholder":{color:"gray"},color:"white"}}}))(ee.a),ue=Object(ce.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{color:"white"}}}))(ee.a),de=Object(ce.a)((function(e){return{root:{backgroundColor:"transparent"}}}))($.a),he=Object(ce.a)((function(e){return{root:{backgroundColor:ae.a[800],top:"-20px",left:"2%"}}}))(W.a),me=Object(ce.a)((function(e){return{root:{margin:"14px 12px 4px"},"&::placeholder":{fontStyle:"italic"},multiline:{input:{color:"white"}}}}))(_.a),pe=function(e){return r.a.createElement("div",{className:"new-tweet-body"},e.children)},fe=function(e){return r.a.createElement("img",{src:e,id:"img3",alt:"Logo",className:"picture"})},ge=function(e){return r.a.createElement("div",{className:"handle"},e.handle)},be=function(e){return r.a.createElement("div",{className:"name"},e.name)},ve=a(25),Ue=function(){function e(t,a,n){Object(h.a)(this,e),this.username=t,this.viewingOwnProfile=n,this.loggedIn=a}return Object(m.a)(e,[{key:"getUsername",value:function(){return this.username}},{key:"getUid",value:function(){return this.uid}}]),e}(),ke=a(59),Ee={retrieveUserUid:function(e){console.log("Entered retrieveUserUid");var t=U.a.database.ref().child("mapUsernameToUid")[e];return console.log("Exited retrieveUserUid"),t},retrieveUserEmail:function(e){console.log("Entered retrieveUserEmail");var t=U.a.database().ref().child("mapUsernameToEmail")[e];return console.log("Exited retrieveUserEmail"),t},retrieveUsername:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered retrieveUsername"),e.next=3,U.a.database().ref().once("value",(function(e){var n=e.child("mapUIDtoUsername").val();a=n[t]}));case 3:return console.log("Exited retrieveUsername"),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addMicroBlogToCurrentUser:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,s,o,c,i,l,d,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",console.log("Entered addMicroBlogToCurrentUser"),r=U.a.auth().currentUser.uid,e.next=5,U.a.database().ref().once("value",(function(e){var t=e.child("mapUIDtoUsername").val();n=t[r],console.log("USERNAME:",n)}));case 5:for(s=new Date,o=s.getTime(),t.length>250&&console.log("ERROR: content of microblog cannot exceed 250 characters --\x3e will not store in firebase"),c=[],i=0;i<a.length;i++)c.push({topics:a[i],timestamp:o});return e.next=12,U.a.database().ref().once("value",(function(e){var t=e.child("users").child(U.a.auth().currentUser.uid).child("writtenTopics").val();if(console.log("TYPE:",typeof t),null==t||0===t.length)U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("writtenTopics").set(c);else{for(var a=0;a<c.length;a++){for(var n=0;n<t.length&&t[n].topics!=c[a].topics;n++);n==t.length&&t.push(c[a])}U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("writtenTopics").set(t)}}));case 12:for(l=[],i=0;i<a.length;i++)l.push(a[i]);return 0,(d=[]).push("hello"),h={userLikes:d,id:n+o,user:n,content:t,topics:l,timestamp:o,numLikes:0},e.next=20,U.a.database().ref().once("value",(function(e){var t=e.child("users").child(U.a.auth().currentUser.uid).child("Microblogs").val();null==t||0===t.length?U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("Microblogs").set({0:h}):(t.push(h),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("Microblogs").set(t))}));case 20:return Object(ve.resolve)("done"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),likeMicroblog:function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered likeMicroblog"),e.next=3,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t.name];e.child("users").child(n).child("Microblogs").forEach((function(e){var r=0,s=[];e.val().id===t.id&&(void 0===e.val().userLikes?s.push(a):!1===e.val().userLikes.includes(a)?0===e.val().numLikes||e.val().userLikes.includes("hello")?(s=e.val().userLikes)[0]=a:(s=e.val().userLikes).push(a):!0===e.val().userLikes.includes(a)&&(s=e.val().userLikes),r=s.length,U.a.database().ref().child("users").child(n).child("Microblogs").child(e.key).update({userLikes:s}),U.a.database().ref().child("users").child(n).child("Microblogs").child(e.key).update({numLikes:r}))}))}));case 3:Object(ve.resolve)("done"),console.log("Exited likeMicroblog");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),unlikeMicroblog:function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered unlikeMicroblog"),e.next=3,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t.name];e.child("users").child(n).child("Microblogs").forEach((function(e){var r=0,s=[];if(e.val().id===t.id){if(void 0===e.val().userLikes)r=0;else if(!0===e.val().userLikes.includes(a)){var o=(s=e.val().userLikes).indexOf(a);s.splice(o,1)}r=s.length,U.a.database().ref().child("users").child(n).child("Microblogs").child(e.key).update({userLikes:s}),U.a.database().ref().child("users").child(n).child("Microblogs").child(e.key).update({numLikes:r})}}))}));case 3:Object(ve.resolve)("done"),console.log("Exited unlikeMicroblog");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getBio:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t],r=e.child("users").child(n).child("bio").val();if(void 0!=r)return a=r,r}));case 2:return e.sent,Object(ve.resolve)("done"),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getFollowersAndFollowing:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t],r=[];e.child("users").child(n).child("following").forEach((function(e){r.push(e.key)}));var s=e.child("users").child(n).child("followers").val(),o="";if(null==s)o="";else{for(var c=0;c<s.length-1;c++)o+=s[c]+", ";o+=s[s.length-1]}var i="";if(null==r||void 0===r||0===r.length)i="";else{for(c=0;c<r.length-1;c++)i+=r[c]+", ";i+=r[r.length-1]}a={followers:o,following:i}}));case 2:return Object(ve.resolve)("done"),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),followUserIAmViewing:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var a=U.a.auth().currentUser.uid,n=e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],r=t,s=e.child("mapUsernameToUID").val()[r],o=(new Date).getTime();U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("followingTimestamp").child(r).set(o);var c=e.child("users").child(a).child("following").val(),i=e.child("users").child(s).child("followers").val();if(s!==a){var l;if(null==c||0==c.length)(l=[]).push("None"),!1===e.child("users").child(U.a.auth().currentUser.uid).child("following").hasChild(r)&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("following").child(r).set(l);else(l=[]).push("None"),!1===e.child("users").child(U.a.auth().currentUser.uid).child("following").hasChild(r)&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("following").child(r).set(l);if(null==i||0===i.length){var u=[];u.push(n),U.a.database().ref().child("users").child(s).child("followers").set(u)}else!1===i.includes(n)&&(i.push(n),U.a.database().ref().child("users").child(s).child("followers").set(i))}}));case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unfollowUserIAmViewing:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var a=e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],n=t,r=e.child("mapUsernameToUID").val()[n],s=e.child("users").child(r).child("followers").val();if(null!=U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("following").child(n)&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("following").child(n).remove(),s.includes(a)){for(var o=[],c=0;c<s.length;c++)s[c]!==a&&o.push(s[c]);U.a.database().ref().child("users").child(r).child("followers").set(o)}}));case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addBlockedUser:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){U.a.auth().currentUser.uid;for(var a=e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],n=[],r=0;r<t.length;r++)n.push(t[r]);var s=[];!0===e.child("users").child(U.a.auth().currentUser.uid).hasChild("blockedUsers")&&(s=e.child("users").child(U.a.auth().currentUser.uid).child("blockedUsers").val());for(r=0;r<s.length;r++)n.includes(s[r])||n.push(s[r]);U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("blockedUsers").set(n);for(r=0;r<t.length;r++){var o=e.child("mapUsernameToUID").val()[t[r]],c=[];!0===e.child("users").child(o).hasChild("usersBlockedFrom")&&(c=e.child("users").child(o).child("usersBlockedFrom").val()),c.includes(a)||c.push(a),U.a.database().ref().child("users").child(o).child("usersBlockedFrom").set(c)}}));case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeBlockedUser:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){U.a.auth().currentUser.uid;var a=e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],n=[],r=[];!0===e.child("users").child(U.a.auth().currentUser.uid).hasChild("blockedUsers")&&(r=e.child("users").child(U.a.auth().currentUser.uid).child("blockedUsers").val());for(var s=0;s<r.length;s++)t.includes(r[s])||n.push(r[s]);U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("blockedUsers").set(n);for(s=0;s<t.length;s++){var o=e.child("mapUsernameToUID").val()[t[s]],c=[],i=[];!0===e.child("users").child(o).hasChild("usersBlockedFrom")&&(c=e.child("users").child(o).child("usersBlockedFrom").val());for(var l=0;l<c.length;l++)c[l]!==a&&i.push(c[l]);U.a.database().ref().child("users").child(o).child("usersBlockedFrom").set(i)}}));case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBlockedUser:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,U.a.database().ref().once("value",(function(e){U.a.auth().currentUser.uid;!0===e.child("users").child(U.a.auth().currentUser.uid).hasChild("blockedUsers")&&(t=e.child("users").child(U.a.auth().currentUser.uid).child("blockedUsers").val())}));case 3:return Object(ve.resolve)("done"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUsersBlockedFrom:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,U.a.database().ref().once("value",(function(e){U.a.auth().currentUser.uid;!0===e.child("users").child(U.a.auth().currentUser.uid).hasChild("usersBlockedFrom")&&(t=e.child("users").child(U.a.auth().currentUser.uid).child("usersBlockedFrom").val())}));case 3:return Object(ve.resolve)("done"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addAndRemoveTopicsFromFollowedUser:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var r=U.a.auth().currentUser.uid,s=(e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],t);e.child("mapUsernameToUID").val()[s];if(!1===e.child("users").child(r).child("following").hasChild(t));else{for(var o=[],c=0;c<a.length;c++)o.push(a[c]);for(c=0;c<n.length;c++)if(o.includes(n[c])){var i=o.indexOf(n[c]);i>-1&&o.splice(i,1)}U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("following").child(s).set(o)}}));case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),getFollowedAndUnfollowedTopics:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var n=U.a.auth().currentUser.uid,r=(e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid],t),s=e.child("mapUsernameToUID").val()[r],o=e.child("users").child(s).child("writtenTopics").val(),c=[];if(null!=o&&void 0!==o)for(var i=0;i<o.length;i++)void 0!==o[i]&&c.push(o[i].topics);console.log("WRITTEN TOPICS",c);var l=e.child("users").child(n).child("following").child(r).val(),u=[];if(null!=l&&0!==l.length)for(var d=0;d<l.length;d++)"None"!==l[d]&&u.push(l[d]);var h=[];if(null!=c&&0!==c.length&&null!=u&&0!==u.length)for(var m=0;m<c.length;m++)!1===u.includes(c[m])&&void 0!==c[m]&&h.push(c[m]);else{for(m=0;m<c.length;m++)h.push(c[m]);u=[]}console.log("FOLLOWED TOPICS",u),console.log("UNFOLLOWED TOPICS",h),a={followedTopicsList:u,unfollowedTopics:h}}));case 2:return Object(ve.resolve)("done"),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postCurrentUserBio:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("bio").set(t);case 2:Object(ve.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUserData:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.a.database().ref().child("mapUIDtoUsername").child(U.a.auth().currentUser.uid).remove(),U.a.database().ref().child("mapUsernameToEmail").child(t).remove(),U.a.database().ref().child("mapUsernameToUID").child(t).remove(),e.next=5,U.a.database().ref().once("value",(function(e){var a=e.child("users").child(U.a.auth().currentUser.uid).child("followers").val(),n=e.child("users").child(U.a.auth().currentUser.uid).child("following").val();for(var r in a){console.log(a[r]);var s=e.child("mapUsernameToUID").child(a[r]).val();console.log(s),U.a.database().ref().child("users").child(s).child("following").child(t).remove()}for(var r in n){var o=e.child("mapUsernameToUID").child(r).val();console.log(o);var c=e.child("users").child(o).child("followers").val();for(var i in console.log(c),c)if(c[i]===t){console.log(i),U.a.database().ref().child("users").child(o).child("followers").child(i).remove();break}}}));case 5:U.a.auth().currentUser.delete(),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).remove();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForUserTimeline:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val(),r=n[t];e.child("users").child(r).child("following").forEach((function(t){var s=t.key,o=t.val(),c=n[s],i=e.child("users").child(c).child("Microblogs").val(),l=e.child("users").child(r).child("followingTimestamp").val()[s],u=e.child("users").child(c).child("writtenTopics").val();if(void 0!=i||null!=i)for(var d=0;d<i.length;d++){var h=i[d],m=h.topics;if(void 0!=m||null!=m){for(var p=!1,f=0;f<m.length;f++)for(var g=0;g<u.length;g++)u[g].topics==m[f]&&u[g].timestamp==i[d].timestamp&&l<u[g].timestamp&&(i[d].topics[f]="/h"+i[d].topics[f],p=!0);if(p){a.push(h);continue}for(var b=0;b<m.length;b++)if(o.includes(m[b])){a.push(h);break}}}}))}));case 3:return Object(ve.resolve)("done"),a.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForCurrentUser:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t];a=e.child("users").child(n).child("Microblogs").val()})),null!=a&&0!==a.length&&a.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForUser:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t];a=e.child("users").child(n).child("Microblogs").val()}));case 2:return e.sent,Object(ve.resolve)("done"),null!=a&&0!==a.length&&a.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserdataOfLoggedInUser:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0,U.a.auth().onAuthStateChanged(function(){var e=Object(d.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,Ee.getUserdataOfUser(a.uid,!0);case 3:return t=e.sent,Object(ve.resolve)("done"),e.abrupt("return",t);case 8:console.log("null");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserdataOfUser:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var r=e.child("mapUIDtoUsername").val()[t];n=new Ue(r,a,!0)}));case 2:return Object(ve.resolve)("done"),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},we=Ee,ye=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).microblogData=new Object,a.microblogPosted=e.microblogPosted,a.microblogData.name=e.username,a.microblogData.handle=e.username,a.microblogData.image="props.image",a.submitMicroblog=a.submitMicroblog.bind(Object(O.a)(a)),a.addTopic=a.addTopic.bind(Object(O.a)(a)),a.topics=[],a.numTopics=0,a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"addTopic",value:function(e){""!=document.getElementById("addTopics").value&&","!=document.getElementById("addTopics").value&&(this.topics.push(document.getElementById("addTopics").value),""==document.getElementById("showTopics").value?document.getElementById("showTopics").value=document.getElementById("addTopics").value:document.getElementById("showTopics").value=document.getElementById("showTopics").value+", "+document.getElementById("addTopics").value,document.getElementById("addTopics").value="")}},{key:"submitMicroblog",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById("content").value,console.log(a),!(a.length>250||a.length<=0)){e.next=6;break}Object(L.b)("Cannot post microblog. Make sure the content is 250 characters or less"),e.next=10;break;case 6:return e.next=8,we.addMicroBlogToCurrentUser(a,this.topics);case 8:this.microblogPosted(),this.topics=[];case 10:document.getElementById("content").value="",document.getElementById("showTopics").value="",document.getElementById("addTopics").value="";case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="".concat(this.microblogData.name),t="@".concat(this.microblogData.name),a=this.microblogData.image;return r.a.createElement(ie,{name:e,handle:t,image:a,submitMicroblog:this.submitMicroblog,addTopic:this.addTopic})}}]),t}(r.a.Component),Oe=(a(332),a(333),a(156)),je=a.n(Oe),xe=a(155),Ie=a.n(xe),Be=a(154),De=a.n(Be),Ce=(a(334),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).onTextChanged=function(e){var t=a.props.items,n=e.target.value,r=[];if(n.length>0){var s=new RegExp("^".concat(n),"i");r=t.sort().filter((function(e){return s.test(e)}))}a.setState((function(){return{suggestions:r,text:n}}))},a.state={suggestions:[],text:"",onFocus:!1,clickoption:!1},a.searchForUser=a.searchForUser.bind(Object(O.a)(a)),a.checkIfFocused=a.checkIfFocused.bind(Object(O.a)(a)),a.changeFocus=a.changeFocus.bind(Object(O.a)(a)),a.keyPress=a.keyPress.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"suggestionSelected",value:function(e){this.setState((function(){return{text:e,suggestions:[],onFocus:!1,clickoption:!0}}))}},{key:"renderSuggestions",value:function(){var e=this,t=this.state.suggestions;return 0===t.length?null:r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t,onMouseDown:function(){return e.suggestionSelected(t)}},t)})))}},{key:"searchForUser",value:function(){var e,t=this.state.text,a=this.props.items,n=this.props.username,r=!1;for(e in a)if(a[e]==t){r=!0;break}r?this.props.history.push({pathname:"/redirecttoaccount",state:{userData:this.userData,text:t}}):t!=n?Object(L.b)("Username not found!"):Object(L.b)("You can visit your profile page by clicking the profile button")}},{key:"checkIfFocused",value:function(){console.log("checking focus"),this.setState((function(){return{onFocus:!1}}));0==this.state.clickoption&&this.setState((function(){return{suggestions:[]}})),this.setState((function(){return{onFocus:!1,clickoption:!1}}))}},{key:"changeFocus",value:function(){this.setState((function(){return{onFocus:!0}}))}},{key:"keyPress",value:function(e){13==e.keyCode&&this.searchForUser()}},{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",null,r.a.createElement("div",{className:"AutoCompleteSearchBar",onBlur:this.checkIfFocused},r.a.createElement("input",{value:e,onClick:this.changeFocus,onKeyDown:this.keyPress,onChange:this.onTextChanged,type:"text"}),r.a.createElement("button",{onClick:this.searchForUser},"Search"),this.renderSuggestions()))}}]),t}(r.a.Component)),Te=Object(i.e)(Ce),Ae=Object(ce.a)((function(e){return{root:{color:e.palette.getContrastText(ae.a[500]),backgroundColor:"#1F3648"}}}))($.a),Pe=(Object(oe.a)({palette:{primary:te.a,secondary:{main:"#1F3648"}}}),function(e){var t=e.getAllUsernames,a=e.getCurrentUsername,n=(e.goLogout,e.goToProfile),s=e.goToChat,o=e.goToLanding;return r.a.createElement("div",{className:"inner-body"},r.a.createElement("label",{className:"top-bar-twisster"},"Twistter"),r.a.createElement("div",null,r.a.createElement(Te,{items:t,username:a})),r.a.createElement("div",{className:"top-bar-chat"},r.a.createElement(Ae,{size:"medium","aria-label":"chat",id:"chat",onClick:s,className:"top-bar-chat-btn"},r.a.createElement(De.a,{fontSize:"large"}))),r.a.createElement("div",{className:"top-bar-profile"},r.a.createElement(Ae,{size:"medium","aria-label":"profile",id:"profile",onClick:n},r.a.createElement(Ie.a,{fontSize:"large"}))),r.a.createElement("div",{className:"top_bar_home"},r.a.createElement(Ae,{size:"medium","aria-label":"home",id:"Home",onClick:o},r.a.createElement(je.a,{fontSize:"large"}))))}),Me=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).goLogout=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.a.auth().signOut().then((function(){console.log("Signout succesful")})).catch((function(e){console.log("Error")})),a.props.history.push({pathname:"/login"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.userData=e.userData,a.goLogout=a.goLogout.bind(Object(O.a)(a)),a.goToProfile=a.goToProfile.bind(Object(O.a)(a)),a.goToChat=a.goToChat.bind(Object(O.a)(a)),a.goToLanding=a.goToLanding.bind(Object(O.a)(a)),a.getAllUsernames=a.getAllUsernames.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"goToProfile",value:function(){this.props.history.push({pathname:"/redirecttoaccount",state:{userData:this.userData}})}},{key:"goToChat",value:function(){this.props.history.push({pathname:"/chat",state:{topBar:!0}})}},{key:"goToLanding",value:function(){this.props.history.push({pathname:"/landing",state:{userData:this.userData}})}},{key:"getAllUsernames",value:function(){var e=[];U.a.database().ref().once("value",(function(t){var a,n=t.child("mapUsernameToEmail").val();for(a in n)n[a]!=U.a.auth().currentUser.email&&e.push(a)}));return e}},{key:"getCurrentUsername",value:function(){var e;U.a.database().ref().once("value",(function(t){var a,n=t.child("mapUsernameToEmail").val();for(a in n)if(n[a]==U.a.auth().currentUser.email){e=a;break}}));return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"top-bar"},r.a.createElement(Pe,{getAllUsernames:this.getAllUsernames(),getCurrentUsername:this.getCurrentUsername(),goLogout:this.goLogout,goToProfile:this.goToProfile,goToChat:this.goToChat,goToLanding:this.goToLanding}))}}]),t}(r.a.Component),Le=Object(i.e)(Me),Fe=(a(335),a(386)),Se=a(158),Ne=a.n(Se),He=a(157),Re=a.n(He),ze=Object(ce.a)((function(e){return{badge:{right:-3,border:"0px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(Fe.a),Qe=function(e){e.image;var t=e.theid;return console.log(t),r.a.createElement("img",{id:t,alt:"Logo",className:"picture"})},qe=function(e){return r.a.createElement("div",{className:"handle"},e.handle)},Ke=function(e){return r.a.createElement("div",{className:"name"},e.name)},Ge=function(e){return r.a.createElement("div",{className:"tweet"},e.tweet)},Ve=function(e){return r.a.createElement("div",{className:"topics"},e.topics)};Object(ce.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{color:"white"}}}))(ee.a);var Je=function(e){return r.a.createElement(X,null,r.a.createElement("div",{className:"inner-body",style:{height:"100%"}},r.a.createElement(Qe,{image:e.image,theid:e.unitid}),r.a.createElement("div",{className:"body",style:{width:"80%"}},r.a.createElement("div",{className:"inner-body",style:{height:"60px"}},r.a.createElement(Ke,{name:e.name}),r.a.createElement(qe,{handle:e.handle})),r.a.createElement("div",{className:"body"},r.a.createElement(Ge,{tweet:e.tweet}),r.a.createElement("div",{className:"inner-body"},r.a.createElement(Ve,{topics:e.topics}),r.a.createElement($.a,{"aria-label":"cart",onClick:e.likeButtonClicked},r.a.createElement(ze,{badgeContent:e.numLikes,color:"primary"},e.likeButtonText?r.a.createElement(Re.a,{color:"secondary",fontSize:"large"}):r.a.createElement(Ne.a,{color:"secondary",fontSize:"large"}))))))))},Xe=(a(145),function(e){return r.a.createElement("div",{className:"topic"},e.text)}),We=function(e){return r.a.createElement("div",{className:"topic-highlighted"},e.text)},Ye=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).topic=new Object,a.topic.text=e.data,a.topic.highlight=e.highlight,a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e="".concat(this.topic.text);return this.topic.highlight?r.a.createElement(We,{text:e}):r.a.createElement(Xe,{text:e})}}]),t}(r.a.Component),Ze=(a(336),function(e){function t(e){return Object(h.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.children)}}]),t}(r.a.Component)),_e=(a(337),r.a.Component,function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).microblogData=new Object,void 0==t.counter&&(t.counter=0),a.counter=t.counter,a.blogid="blogid"+a.counter,t.counter++,a.microblogData.name=e.username,a.microblogData.handle=e.username,a.microblogData.tweet=e.data.content,a.microblogData.image="props.image",a.microblogData.id=e.id,a.fetchImage=a.fetchImage.bind(Object(O.a)(a)),a.likeButtonClicked=a.likeButtonClicked.bind(Object(O.a)(a)),a.microblogData.topics=e.data.topics,a.microblogData.numLikes=e.numLikes,a.state={like:e.liked},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"likeButtonClicked",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.retrieveUsername(U.a.auth().currentUser.uid);case 2:if(t=e.sent,!this.state.like){e.next=10;break}return this.microblogData.numLikes--,e.next=7,we.unlikeMicroblog(this.microblogData,t);case 7:this.setState({like:!1}),e.next=14;break;case 10:return this.microblogData.numLikes++,e.next=13,we.likeMicroblog(this.microblogData,t);case 13:this.setState({like:!0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchImage",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchImage running"),e.next=3,U.a.database().ref().once("value",(function(e){console.log(s.microblogData.name),n=e.child("mapUsernameToUID").child(s.microblogData.name).val(),t=e.child("users").child(n).child("picture").val(),a=e.child("users").child(U.a.auth().currentUser.uid).child("picture").val(),console.log("was here hello world")}));case 3:return console.log(t),console.log(a),r=this.blogid,e.next=9,U.a.storage().ref().child(t).getDownloadURL().then((function(e){var t=e;console.log(r),document.querySelectorAll("img").forEach((function(e){e.id==r&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 9:return e.next=11,U.a.storage().ref().child(a).getDownloadURL().then((function(e){var t=e;document.querySelectorAll("img").forEach((function(e){"img3"==e.id&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 11:e.next=14;break;case 13:return e.abrupt("return",U.a.storage().ref(t));case 14:console.log("ends now");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchImage()}},{key:"render",value:function(){this.state.like;var e="".concat(this.microblogData.name),t="@".concat(this.microblogData.name),a=this.microblogData.tweet,n=this.microblogData.topics,s=this.microblogData.numLikes,o=this.likeButtonClicked;return r.a.createElement(Je,{key:this.microblogData.key,name:e,handle:t,image:ke.nullLiteral,unitid:this.blogid,tweet:a,likeButtonClicked:o,likeButtonText:this.state.like,numLikes:s,topics:n})}}]),t}(r.a.Component)),$e=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).createMicroblogs=function(e,t){for(var a=[],n=0;n<e.length;n++){var s=!1;void 0!==e[n].userLikes&&e[n].userLikes.includes(t)&&(s=!0),a.push(r.a.createElement(_e,{key:n,data:e[n],username:e[n].user,id:e[n].id,liked:s,numLikes:e[n].numLikes}))}return r.a.createElement("div",{className:"body"},a)},a.microblogs=e.microblogs,a.username=e.username,a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return null!=this.props.microblogs?r.a.createElement("div",{className:"body"},this.createMicroblogs(this.props.microblogs,this.username)):null}}]),t}(r.a.Component),et=a(49),tt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={loaded:!1},a.editMode=!1,a.microblogPosted=a.microblogPosted.bind(Object(O.a)(a)),a.getAllUsernames=a.getAllUsernames.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"microblogPosted",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMicroblogs();case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMicroblogs",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(L.b)("Microblog posted!"),e.next=3,we.getMicroblogsForUserTimeline(this.userData.username);case 3:this.microblogs=e.sent,Object(et.resolve)("done");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.a.auth().onAuthStateChanged(function(){var e=Object(d.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return t.props.history.push({pathname:"/login"}),e.abrupt("return",null);case 5:return!0,a=U.a.auth().currentUser,e.next=9,we.getUserdataOfUser(a.uid,!0);case 9:return t.userData=e.sent,e.next=12,we.getMicroblogsForUserTimeline(t.userData.username);case 12:t.microblogs=e.sent,t.setState({loaded:!0});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"goToProfile",value:function(){this.props.history.push({pathname:"/profile",state:{userData:this.userData}})}},{key:"getAllUsernames",value:function(){var e=[];U.a.database().ref().once("value",(function(t){var a,n=t.child("mapUsernameToEmail").val();for(a in n)n[a]!=U.a.auth().currentUser.email&&e.push(a)}));return e}},{key:"render",value:function(){return this.state.loaded?r.a.createElement("div",{className:"main-body"},r.a.createElement(Le,{userData:this.userData}),r.a.createElement(ye,{username:this.userData.username,microblogPosted:this.microblogPosted}),r.a.createElement($e,{microblogs:this.microblogs,username:this.userData.username})):null}}]),t}(n.Component),at=Object(i.e)(tt),nt=function(e){function t(e){return Object(h.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(at,null))}}]),t}(r.a.Component),rt=a(162),st=[],ot=function(e){var t=e.type,a=void 0===t?"checkbox":t,n=e.name,s=e.checked,o=e.onChange;return r.a.createElement("input",{type:a,name:n,checked:s,onChange:o})},ct=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={checkedItems:new Map,loaded:!1},a.username=e.username,a.handleChange=a.handleChange.bind(Object(O.a)(a)),a.save=a.save.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,a)}}))}},{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,s,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.getFollowedAndUnfollowedTopics(this.username);case 2:for(this.topics=e.sent,t=0;t<this.topics.followedTopicsList.length;t++)!0,a=this.topics.followedTopicsList[t],n=this.topics.followedTopicsList[t]+""+t,r={name:a,key:n,label:"Check Box "+t},this.state.checkedItems.set(a,!0),st.push(r);for(t=0;t<this.topics.unfollowedTopics.length;t++)!1,s=this.topics.unfollowedTopics[t],o=this.topics.unfollowedTopics[t]+""+t,c={name:s,key:o,label:"Check Box "+t},this.state.checkedItems.set(s,!1),st.push(c);this.setState({loaded:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,s,o,c,i,l,d,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("REACHED HERE"),t=[],a=[],n=!0,r=!1,s=void 0,e.prev=6,o=this.state.checkedItems.entries()[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)i=c.value,l=Object(rt.a)(i,2),d=l[0],h=l[1],console.log(d,h),!0===h?t.push(d):!1===h&&a.push(d);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,s=e.t0;case 14:e.prev=14,e.prev=15,n||null==o.return||o.return();case 17:if(e.prev=17,!r){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,we.addAndRemoveTopicsFromFollowedUser(this.username,t,a);case 24:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loaded?r.a.createElement(r.a.Fragment,null,st.map((function(t){return r.a.createElement("label",{key:t.key},t.name,r.a.createElement(ot,{name:t.name,checked:e.state.checkedItems.get(t.name),onChange:e.handleChange}))})),r.a.createElement("button",{type:"button",onClick:this.save},"Save")):null}}]),t}(r.a.Component),it=(a(340),function(e){e.image;var t=e.changeProfPic,a=e.deletePic,n=e.name;return console.log(n),r.a.createElement("div",null,r.a.createElement("img",{id:"img1",height:"125",width:"125"}),r.a.createElement("div",{className:"hold_text"},r.a.createElement("text",{className:"user_name",thename:n}," ",n," ")),r.a.createElement("div",null,r.a.createElement("button",{onClick:t},"Change profile picture ")),r.a.createElement("div",{className:"del_bt"},r.a.createElement("button",{onClick:a},"Delete Picture / Change to default")))}),lt=function(e){e.image;var t=e.changeProfPic;return r.a.createElement("div",null,r.a.createElement("img",{id:"img1",height:"125",width:"125"}),r.a.createElement("div",null,r.a.createElement("button",{onClick:t},"Change profile picture"),r.a.createElement("input",{type:"file",name:"input",id:"input",onChange:t})))},ut=function(e){var t=e.image;return r.a.createElement("div",null,r.a.createElement("img",{src:t,height:"125",width:"125"}))},dt=function(e){var t=e.userProfile;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h1",{id:"welcome"}),r.a.createElement("br",null),r.a.createElement("label",null,"Followers:"),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers),r.a.createElement("br",null),r.a.createElement("label",null,"Following:"),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"followbutton",onClick:t.followUser},"Follow"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"directmessagebutton",onClick:t.dmUser},"Direct Message"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"blockbutton",onClick:t.blockUser},"Block"),r.a.createElement("br",null),r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("br",null)))},ht=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).uploadImage=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("upLoadImage running"),n=document.getElementById("input"),null!=(r=n.files[0])&&(U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("picture").set(a.username),U.a.storage().ref().child(a.username).put(r).then((function(e){console.log("file uploaded")})).then((function(e){a.toUpload=!1,a.forceUpdate()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deletePicture=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("deletePicture running"),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("picture").set("default.jpg").then((function(e){a.forceUpdate()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.username=a.props.strangername,a.visiting=a.props.visiting,a.strangername=a.props.strangername,a.toUpload=!1,a.upLoadImage=a.uploadImage.bind(Object(O.a)(a)),a.fetchImage=a.fetchImage.bind(Object(O.a)(a)),a.changePic=a.changePic.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"fetchImage",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchImage running"),e.next=3,U.a.database().ref().once("value",(function(e){a.username=e.child("mapUIDtoUsername").child(U.a.auth().currentUser.uid).val(),t=e.child("users").child(U.a.auth().currentUser.uid).child("picture").val(),console.log("was here hello world")}));case 3:return console.log(t),e.next=7,U.a.storage().ref().child(t).getDownloadURL().then((function(e){var t=e;document.querySelectorAll("img").forEach((function(e){"img1"==e.id&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 7:e.next=10;break;case 9:return e.abrupt("return",U.a.storage().ref(t));case 10:console.log("ends now");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"visiterImage",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){a=e.child("mapUsernameToUID").child(r.strangername).val(),console.log("helloworld"),console.log(r.strangername),n=e.child("users").child(a).child("picture").val()}));case 2:return console.log("Yupdupbug"),console.log(n),e.next=6,U.a.storage().ref().child(n).getDownloadURL().then((function(e){t=e,document.querySelector("img").src=t})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changePic",value:function(){console.log("changePic running"),this.toUpload=!0,this.forceUpdate()}},{key:"render",value:function(){return 0==this.visiting?0==this.toUpload?(console.log("here first"),r.a.createElement("div",null,r.a.createElement(it,{image:this.fetchImage(),changeProfPic:this.changePic,deletePic:this.deletePicture,name:this.username}))):(console.log("wrong place"),r.a.createElement("div",null,r.a.createElement(lt,{image:this.fetchImage(),changeProfPic:this.upLoadImage}))):r.a.createElement("div",null,r.a.createElement(ut,{image:this.visiterImage()}))}}]),t}(n.Component),mt=Object(i.e)(ht),pt=function(e){var t=e.userProfile,a=e.deleteAccount;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("button",{onClick:t.editProfile},"Edit"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",style:{marginLeft:"365px"},onClick:a},"Delete account")),r.a.createElement("div",null,r.a.createElement("label",null,"Followers :  "),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers)),r.a.createElement("div",null,r.a.createElement("label",null," Following :  "),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following)))},ft=function(e){var t=e.userProfile,a=e.deleteAccount;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Username:"),r.a.createElement("label",{id:"username"},t.username),r.a.createElement("button",{type:"button",style:{marginLeft:"365px"},onClick:a},"Delete account"),r.a.createElement("br",null),r.a.createElement("label",null,"Followers:"),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers),r.a.createElement("br",null),r.a.createElement("label",null,"Following:"),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following),r.a.createElement("br",null),r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("br",null),r.a.createElement("input",{id:"bioTextBox",name:"Bio",type:"bio",placeholder:"New bio"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:t.saveChanges},"Save Changes"),r.a.createElement("br",null)))},gt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).username=e.user.userData.username,a.loggedIn=e.user.userData.loggedIn,a.loggedInViewingOwnProfile=e.user.userData.viewingOwnProfile,a.editProfile=a.editProfile.bind(Object(O.a)(a)),a.deleteAccount=a.deleteAccount.bind(Object(O.a)(a)),a.saveChanges=a.saveChanges.bind(Object(O.a)(a)),a.followOrUnfollowUser=a.followOrUnfollowUser.bind(Object(O.a)(a)),a.directMessageUser=a.directMessageUser.bind(Object(O.a)(a)),a.blockUser=a.blockUser.bind(Object(O.a)(a)),a.renderLoggedInUser=a.renderLoggedInUser.bind(Object(O.a)(a)),a.renderVisitedUser=a.renderVisitedUser.bind(Object(O.a)(a)),a.state={loaded:!1},a.editMode=!1,a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"editProfile",value:function(){this.editMode=!0,this.setState({editMode:1})}},{key:"deleteAccount",value:function(){this.loggedIn=!1,this.props.history.push({pathname:"/DeleteAccount"})}},{key:"saveChanges",value:function(){var e=document.getElementById("bioTextBox").value;we.postCurrentUserBio(e),this.editMode=!1,this.setState({mustUpdate:1})}},{key:"followOrUnfollowUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Follow"!=document.getElementById("followbutton").textContent){e.next=7;break}return e.next=3,we.followUserIAmViewing(this.username);case 3:document.getElementById("followbutton").textContent="Unfollow",this.setState({follow:0}),e.next=12;break;case 7:return e.next=9,we.unfollowUserIAmViewing(this.username);case 9:document.getElementById("followbutton").textContent="Unfollow",this.setState({follow:1}),document.getElementById("followbutton").textContent="Follow";case 12:return e.next=14,we.getFollowersAndFollowing(this.username);case 14:this.followersAndFollowing=e.sent,this.userProfile.followersAndFollowing=this.followersAndFollowing,this.setState({mustUpdate:1});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"directMessageUser",value:function(){this.props.history.push({pathname:"/chat",state:{dmUsername:this.username,topBar:!1}})}},{key:"blockUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Block"!==document.getElementById("blockbutton").textContent){e.next=13;break}return e.next=3,we.getBlockedUser();case 3:if(e.sent.includes(this.username)){e.next=9;break}return(t=[]).push(this.username),e.next=9,we.addBlockedUser(t);case 9:document.getElementById("blockbutton").textContent="Unblock",document.getElementById("directmessagebutton").disabled=!0,e.next=24;break;case 13:if("Unblock"!==document.getElementById("blockbutton").textContent){e.next=24;break}return e.next=16,we.getBlockedUser();case 16:if(!e.sent.includes(this.username)){e.next=22;break}return(t=[]).push(this.username),e.next=22,we.removeBlockedUser(t);case 22:document.getElementById("blockbutton").textContent="Block",document.getElementById("directmessagebutton").disabled=!1;case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userProfile=new Object,this.userProfile.saveChanges=this.saveChanges,this.userProfile.editProfile=this.editProfile,this.userProfile.followUser=this.followOrUnfollowUser,this.userProfile.dmUser=this.directMessageUser,this.userProfile.blockUser=this.blockUser,e.next=8,this.downloadUserProfile(this.userProfile);case 8:return this.setState({loaded:!0}),this.loggedIn||(document.getElementById("followbutton").disabled=!0,document.getElementById("logout").disabled=!0,document.getElementById("profile").disabled=!0),e.next=12,we.getBlockedUser();case 12:return t=e.sent,e.next=15,we.getUsersBlockedFrom();case 15:if(a=e.sent,!1===this.loggedInViewingOwnProfile&&(void 0!==a&&0!==a.length&&a.includes(this.username)?(document.getElementById("directmessagebutton").disabled=!0,void 0!==t&&0!==t.length&&t.includes(this.username)?document.getElementById("blockbutton").textContent="Unblock":document.getElementById("blockbutton").textContent="Block"):void 0!==t&&0!==t.length&&t.includes(this.username)?(document.getElementById("directmessagebutton").disabled=!0,document.getElementById("blockbutton").textContent="Unblock"):(document.getElementById("directmessagebutton").disabled=!1,document.getElementById("blockbutton").textContent="Block")),!1!==this.loggedInViewingOwnProfile){e.next=20;break}return e.next=20,U.a.database().ref().once("value",(function(e){var t=e.child("mapUIDtoUsername").val()[U.a.auth().currentUser.uid];n.userProfile.followersAndFollowing.followers.includes(t)&&(document.getElementById("followbutton").textContent="Unfollow")}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.downloadUserProfile(this.userProfile);case 2:this.props.userID!==t.userID&&this.fetchData(this.props.userID),1==this.state.mustUpdate&&this.setState({mustUpdate:0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadUserProfile",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.username=this.username,e.next=3,we.getBio(this.username);case 3:return this.bio=e.sent,t.bio=this.bio,e.next=7,we.getFollowersAndFollowing(this.username);case 7:return this.followersAndFollowing=e.sent,t.followersAndFollowing=this.followersAndFollowing,e.next=11,we.getMicroblogsForUser(this.username);case 11:this.microblogs=e.sent,t.microblogs=this.microblogs,Object(et.resolve)("done");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loaded?this.loggedIn&&this.loggedInViewingOwnProfile?this.renderLoggedInUser(this.userProfile,this.deleteAccount):this.renderVisitedUser(this.userProfile):null}},{key:"renderLoggedInUser",value:function(e,t){return this.editMode?r.a.createElement("div",null,r.a.createElement(ft,{userProfile:e,deleteAccount:t}),r.a.createElement($e,{microblogs:e.microblogs,username:e.username})):r.a.createElement("div",null,r.a.createElement(mt,{strangername:this.username,visiting:!1}),r.a.createElement(pt,{userProfile:e,deleteAccount:t}),r.a.createElement($e,{microblogs:e.microblogs,username:e.username}))}},{key:"renderVisitedUser",value:function(e){return r.a.createElement("div",null,r.a.createElement(mt,{strangername:this.username,visiting:!0}),r.a.createElement(dt,{userProfile:e}),r.a.createElement($e,{microblogs:e.microblogs,username:e.username}))}}]),t}(r.a.Component),bt=Object(i.e)(gt),vt=function(e){return r.a.createElement("div",null,r.a.createElement(bt,{user:e}),r.a.createElement("form",null))},Ut=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).localProps=e,a.state={loaded:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setUsername();case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUsername",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var a=e.child("mapUIDtoUsername").val();if(void 0==U.a.auth().currentUser||null==U.a.auth().currentUser){if("/profile"==t.localProps.location.pathname)return void t.localProps.history.push({pathname:"/login"});t.path=t.localProps.location.pathname,t.username=t.path.substring(9,t.path.length),t.userData=new Ue(t.username,!1)}else"/profile"!=t.localProps.location.pathname?(t.path=t.localProps.location.pathname,t.username=t.path.substring(9,t.path.length),t.username==a[U.a.auth().currentUser.uid]?t.userData=new Ue(t.username,!0,!0):t.userData=new Ue(t.username,!0,!1)):t.userData=new Ue(a[U.a.auth().currentUser.uid],!0,!0)}));case 2:Object(et.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loaded?r.a.createElement("div",null,r.a.createElement(Le,null),r.a.createElement(vt,{userData:this.userData}),r.a.createElement(ct,{username:this.username})):null}}]),t}(r.a.Component),kt=Object(i.e)(Ut),Et=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).goToProfile=a.goToProfile.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"goToProfile",value:function(){var e=this.props.location.state.userData,t=this.props.location.state.text;void 0!=t?this.props.history.push({pathname:"/profile/"+t,state:{userData:e}}):this.props.history.push({pathname:"/profile",state:{userData:e}})}},{key:"render",value:function(){return r.a.createElement("div",null,this.goToProfile())}}]),t}(r.a.Component),wt=Object(i.e)(Et),yt=function(e){var t=e.onSubmit;return r.a.createElement("div",null,r.a.createElement("h1",null,"User verification"),r.a.createElement("form",{onSubmit:t},r.a.createElement("label",null,"Email/Username",r.a.createElement("input",{name:"email",placeholder:"Email/Username"})),r.a.createElement("label",null,"Password",r.a.createElement("input",{name:"password",type:"password",placeholder:"Password"})),r.a.createElement("button",{type:"submit"},"Delete Account")))},Ot=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLogIn=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,s,o,c,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements,r=n.email,s=n.password,e.prev=2,o=!1,c=U.a.auth().currentUser.email,i=null,r.value!=c){e.next=12;break}return o=!0,e.next=10,j.database().ref().once("value",(function(e){var t,a=e.child("mapUsernameToEmail").val();for(t in a)if(a[t]==c){i=t;break}}));case 10:e.next=14;break;case 12:return e.next=14,j.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();console.log(t[r.value]),void 0!=t[r.value]&&t[r.value]==c&&(i=r.value,o=!0)}));case 14:if(o){e.next=18;break}return Object(L.b)("The Email/Username or Password is incorrect"),Object(L.b)("The Email/Username or Password is incorrect",{containerId:"B"}),e.abrupt("return");case 18:return l=!0,e.next=21,j.auth().signInWithEmailAndPassword(c,s.value).catch((function(){l=!1}));case 21:if(a.user=e.sent,l){e.next=26;break}return Object(L.b)("The Email/Username or Password is incorrect"),Object(L.b)("The Email/Username or Password is incorrect",{containerId:"B"}),e.abrupt("return");case 26:console.log(i),we.deleteUserData(i),Object(L.b)("User account deleted"),a.loggedIn=!1,a.props.history.push({pathname:"/login"}),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(2),Object(L.b)(e.t0);case 36:case"end":return e.stop()}}),e,null,[[2,33]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLogIn=a.handleLogIn.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L.a,{enableMultiContainer:!0,containerId:"B",position:L.b.POSITION.TOP_RIGHT}),r.a.createElement(E,null),r.a.createElement(yt,{onSubmit:this.handleLogIn}))}}]),t}(n.Component),jt=Object(i.e)(Ot),xt=(a(341),function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages;return r.a.createElement("ul",{id:"messageslist",className:"Messages-list"},t.map((function(t){return e.renderMessage(t)})))}},{key:"renderMessage",value:function(e){var t=e.member,a=e.text,n=this.props.currentMember,s=t.id===n.id?"Messages-message currentMember":"Messages-message";return r.a.createElement("li",{className:s},r.a.createElement("span",{className:"avatar"}),r.a.createElement("div",{className:"Message-content"},r.a.createElement("div",{className:"username"},t.username),r.a.createElement("div",{className:"text"},a)))}}]),t}(n.Component)),It=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({text:""}),this.props.onSendMessage(this.state.text)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Input"},r.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("input",{onChange:function(t){return e.onChange(t)},value:this.state.text,id:"placeholder",type:"text",placeholder:"",autofocus:"true"}),r.a.createElement("button",{id:"send"},"Send")))}}]),t}(n.Component);a(342);function Bt(){return"#"+Math.floor(16777215*Math.random()).toString(16)}var Dt=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={messages:[],member:{username:"ABCD",color:Bt()}},a.onSendMessage=function(e){U.a.database().ref().once("value",(function(e){var t=e.child("users").child(a.otherUID).child("unseenUsersDM").val();void 0!=t||null!=t?t.includes(a.userData.username)||(t.push(a.userData.username),U.a.database().ref().child("users").child(a.otherUID).child("unseenUsersDM").set(t)):U.a.database().ref().child("users").child(a.otherUID).child("unseenUsersDM").set({0:a.userData.username})})),a.appendMessageFromMe(e,!0),setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200)};return a.userButtonClick=a.userButtonClick.bind(Object(O.a)(a)),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateUserName(),this.getUsernameOfOtherUser(),e.next=4,U.a.database().ref().once("value",(function(e){var t=e.child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").val();if(void 0!=t||null!=t)for(var a=0;a<Object.keys(t).length;a++)r.addButton(Object.keys(t)[a]);var n=e.child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").val();if(void 0!=n||null!=n)for(var s=0;s<n.length;s++)r.changeButtonColor(n[s],"#fff000")}));case 4:for(t=document.getElementsByTagName("button"),a=0,n=t.length;a<n;a++)"Send"!=t[a].innerHTML&&t[a].addEventListener("click",(function(e){r.userButtonClick(e.toElement.id)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addButton",value:function(e){var t=document.getElementById("userlist").appendChild(document.createElement("button"));t.id=e,t.innerHTML=e,t.outerHTML=t.outerHTML+"<br></br>",console.log("testcolor"),t.style.background="#ff0000"}},{key:"changeButtonColor",value:function(e,t){var a=this;if(null==(n=document.getElementById(e))){var n;console.log("add new button"),(n=document.getElementById("userlist").appendChild(document.createElement("button"))).id=e,n.innerHTML=e,n.outerHTML=n.outerHTML+"<br></br>",console.log(t),document.getElementById(e).style.backgroundColor=t;for(var r=document.getElementsByTagName("button"),s=0,o=r.length;s<o;s++)r[s].innerHTML==e&&r[s].addEventListener("click",(function(e){console.log("testclick"),a.userButtonClick(e.toElement.id)}))}else n.style.background=t}},{key:"getUsersBlocked",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,U.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t];!0===e.child("users").child(n).hasChild("blockedUsers")&&(a=e.child("users").child(n).child("blockedUsers").val())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"userButtonClick",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.location.state.dmUsername=t,e.next=3,we.getBlockedUser();case 3:return a=e.sent,e.next=6,this.getUsersBlocked(t);case 6:n=e.sent,a.includes(t)?(this.setPlaceholderInputBar("You are blocking "+t),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):n.includes(this.userData.username)?(this.setPlaceholderInputBar("You are being blocked by "+t),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):(this.setPlaceholderInputBar("Send message to "+t),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1),console.log("userbuttonclick() "+t),this.props.location.state.dmUsername=t,this.props.location.state.topBar=!1,this.currentRetrievedData=null,this.changeButtonColor(t,"orangered"),this.removeUserFromUnseenList(t),this.getUsernameOfOtherUser(),this.fillWithPreviousMessages(),this.listenToPersistantMessages(),this.listenToUsersBlockedFrom();case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeUserFromUnseenList",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.a.database().ref().once("value",(function(e){var a=e.child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").val();void 0==a&&null==a||-1!=a.indexOf(t)&&(a.splice(a.indexOf(t),1),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").set(a))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsernameOfOtherUser",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t.props.location.state.dmUsername];t.otherUID=a}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUserName",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.a.auth().onAuthStateChanged(function(){var e=Object(d.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return t.props.history.push({pathname:"/login"}),e.abrupt("return",null);case 5:return!0,a=U.a.auth().currentUser,e.next=9,we.getUserdataOfUser(a.uid,!0);case 9:t.userData=e.sent,t.state.member.username=t.userData.username,t.state.member.id=t.userData.username,0==t.props.location.state.topBar?(t.fillWithPreviousMessages(),t.listenToPersistantMessages(),t.setPlaceholderInputBar("Send message to "+t.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!1,document.getElementById("send").disabled=!1,t.listenToUsersBlockedFrom()):(t.setPlaceholderInputBar("To send a message, click on a username"),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0),t.listenToUnseenUsersDM();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h1",null,"Twisster Chat")),r.a.createElement("ul",{id:"userlist"}),r.a.createElement(xt,{messages:this.state.messages,currentMember:this.state.member}),r.a.createElement(It,{onSendMessage:this.onSendMessage}))}},{key:"setPlaceholderInputBar",value:function(e){document.getElementById("placeholder").placeholder=e}},{key:"fillWithPreviousMessages",value:function(){var e=this;void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")&&(document.getElementById("messageslist").innerHTML="",U.a.database().ref().once("value",(function(t){var a=t.child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").child(e.props.location.state.dmUsername).val();if(e.currentRetrievedData=a,void 0!=a||null!=a)for(var n=0;n<a.length;n++){var r=a[n].substr(0,a[n].indexOf(",")),s=a[n].substr(a[n].indexOf(",")+1,a[n].length-1-a[n].indexOf(","));r==e.userData.username?e.appendMessageFromMe(s,!1):e.appendMessageFromOtherUser(s)}setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200)})))}},{key:"appendMessageFromMe",value:function(e,t){var a=this.state.messages;a.push({member:this.state.member,text:e}),this.setState({messages:a}),t&&(void 0==this.currentRetrievedData||null==this.currentRetrievedData?(this.currentRetrievedData=[this.userData.username+","+e],U.a.database().ref().child("users").child(this.otherUID).child("persistantmessages").child(this.userData.username).set({0:this.userData.username+","+e}),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).set({0:this.userData.username+","+e})):(this.currentRetrievedData.push(this.userData.username+","+e),U.a.database().ref().child("users").child(this.otherUID).child("persistantmessages").child(this.userData.username).set(this.currentRetrievedData),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).set(this.currentRetrievedData)))}},{key:"appendMessageFromOtherUser",value:function(e){if(null!=document.getElementById("messageslist")){var t={username:this.props.location.state.dmUsername,color:Bt(),id:this.props.location.state.dmUsername},a=this.state.messages;a.push({member:t,text:e}),this.setState({messages:a}),setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200)}}},{key:"listenToPersistantMessages",value:function(){var e=this;null!=document.getElementById("messageslist")&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).on("value",(function(t){U.a.database().ref().once("value",(function(t){var a=t.child("users").child(U.a.auth().currentUser.uid).child("persistantmessages").child(e.props.location.state.dmUsername).val();null!=e.currentRetrievedData&&null!=a&&e.currentRetrievedData[e.currentRetrievedData.length-1]!=a[a.length-1]&&(e.currentRetrievedData=a,void 0==a&&null==a||e.userData.username!=a[a.length-1].substr(0,a[a.length-1].indexOf(","))&&e.appendMessageFromOtherUser(a[a.length-1].substr(a[a.length-1].indexOf(",")+1,a[a.length-1].length-1-a[a.length-1].indexOf(","))))}))}))}},{key:"listenToUsersBlockedFrom",value:function(){var e=this;null!=document.getElementById("messageslist")&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("usersBlockedFrom").on("value",(function(t){U.a.database().ref().once("value",function(){var t=Object(d.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!=(n=a.child("users").child(U.a.auth().currentUser.uid).child("usersBlockedFrom").val())&&null!=n){t.next=7;break}return e.setPlaceholderInputBar("Send message to "+e.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1,t.abrupt("return");case 7:r=0;case 8:if(!(r<n.length)){t.next=17;break}if(e.props.location.state.dmUsername!=n[r]){t.next=14;break}return t.next=12,e.getUsersBlocked(n[r]);case 12:t.sent.includes(e.userData.username)?(e.setPlaceholderInputBar("You are being blocked by "+n[r]),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):(e.setPlaceholderInputBar("Send message to "+n[r]),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1);case 14:r++,t.next=8;break;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},{key:"listenToUnseenUsersDM",value:function(){var e=this;null!=document.getElementById("messageslist")&&U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").on("value",(function(t){U.a.database().ref().once("value",(function(t){var a=t.child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").val();if(void 0!=a||null!=a)for(var n=0;n<a.length;n++)console.log(e.props.location.state.dmUsername),e.props.location.state.dmUsername!=a[n]?(console.log("listenToUnseenUsersDM changeButtonColor of : "+a[n]),e.changeButtonColor(a[n],"#fff000")):-1!=a.indexOf(e.props.location.state.dmUsername)&&(a.splice(a.indexOf(e.props.location.state.dmUsername),1),U.a.database().ref().child("users").child(U.a.auth().currentUser.uid).child("unseenUsersDM").set(a))}))}))}}]),t}(n.Component),Ct=Object(i.e)(Dt);L.b.configure();var Tt=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i.a,{exact:!0,path:"/",component:y}),r.a.createElement(i.a,{exact:!0,path:"/login",component:S}),r.a.createElement(i.a,{exact:!0,path:"/signup",component:J}),r.a.createElement(i.a,{exact:!0,path:"/landing",component:nt}),r.a.createElement(i.a,{path:"/profile",component:kt}),r.a.createElement(i.a,{path:"/redirecttoaccount",component:wt}),r.a.createElement(i.a,{path:"/DeleteAccount",component:jt}),r.a.createElement(i.a,{path:"/chat",component:Ct})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(343),a(344);o.a.render(r.a.createElement(c.a,null,r.a.createElement(Tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,t,a){e.exports=a.p+"static/media/twisster_logo.d26fb7f2.png"}},[[169,1,2]]]);
//# sourceMappingURL=main.f7e23b65.chunk.js.map