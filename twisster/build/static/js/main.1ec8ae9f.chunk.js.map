{"version":3,"sources":["logo192.png","TopBarLoginSignup/TopBarLoginSignupView.js","TopBarLoginSignup/index.js","Home.js","base.js","LogIn/LogInView.js","LogIn/index.js","SignUp/SignUpView.js","SignUp/index.js","MicroblogBox/index.js","MicroblogWriter/MicroblogWriterView.js","DataObjects/UserData.js","helperfunctions.js","MicroblogWriter/index.js","AutoCompleteSearchBar/AutoCompleteSearchBar.js","TopBar/TopBarView.js","TopBar/index.js","Topic/TopicView.js","Topic/TopicHighlightedView.js","Topic/index.js","Topics/TopicsBox.js","Topics/index.js","Microblog/MicroblogView.js","QuotingMicroblogBox/index.js","Microblog/index.js","QuotedMicroblog/index.js","Microblogs/index.js","Landing/index.js","LandingPage/index.js","ProfilePage/checkBox.js","ProfilePage/checkBox.jsx","ProfilePicture/ProfilepicView.js","ProfilePicture/NewProfilepicView.js","ProfilePicture/VisitedProfilepic.js","User/UserProfileViews/VisitedUserView.js","ProfilePicture/index.js","User/UserProfileViews/LoggedInUserView.js","User/UserProfileViews/LoggedInUserEditView.js","User/index.js","ProfilePage/ProfilePageView.js","PageNotFound.js","ProfilePage/index.js","ProfilePageRouting.js","DeleteAccountAuthentication/DeleteAccountAuthenticationView.js","DeleteAccountAuthentication/index.js","Chat/Messages.js","Chat/Input.js","Chat/index.js","App.js","serviceWorker.js","index.js","assets/twisster_logo.png"],"names":["module","exports","TopBarTwissterLoginSignup","className","TopBarLoginSignup","props","React","Component","withRouter","Home","goLogIn","event","a","history","push","pathname","goSignUp","onClick","this","app","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","MainLogo","src","logo","children","MainName","CenterUiBox","EmailField","name","placeholder","onFocus","e","target","onBlur","PasswordField","type","focus","LogInView","onSubmit","Button","variant","LogInContainer","handleLogIn","preventDefault","elements","email","password","user_exists","database","ref","once","snapshot","user_email_list","child","val","value","includes","undefined","username_or_email","key","toast","containerId","auth","signInWithEmailAndPassword","user","emailVerified","currentUser","sendEmailVerification","url","handleCodeInApp","then","console","log","catch","error","message","bind","SignupEmail","ReturnToLogin","SignupUsername","SignupPassword","SignUpView","SignUpContainer","handleSignUp","username","username_exists","createUserWithEmailAndPassword","username_email_combo","update","username_uid_combo","uid","uid_username_combo","actionCodeSettings","date","Date","timestamp","getTime","set","signupTimestamp","picture","signOut","goLogin","MicroblogBox","MicroblogWriterView","createMuiTheme","palette","primary","green","secondary","main","style","height","image","flex","id","handle","NewTweet","contentId","rows","multiline","margin","color","ListedTopics","disableUnderline","disabled","showTopicsId","label","addTopic","minHeight","AddTopics","addTopicsId","width","endAdornment","InputAdornment","position","AddTopic","aria-label","PostButton","size","submitMicroblog","withStyles","theme","root","input","Input","backgroundColor","IconButton","blue","top","left","Fab","fontStyle","TextField","NewTweetBox","Image","alt","Handle","Name","UserData","loggedIn","viewingOwnProfile","helperfunctions","retrieveUserUid","uid_follow","retrieveUserEmail","retrieveUsername","mapUIDtoUsername","getAllUsers","usernames","forEach","childSnapshot","currUsername","resolve","getAllOtherUsers","addMicroBlogToCurrentUser","content","topics","uid_current","length","wTopics","index","writtenTopics","w","topicsList","userLikes","microblog","microblog_list","addQuotedMicroblogToCurrentUser","microblogAdd","tweet","numLikes","likeMicroblog","UIDofUserIAmViewing","countLikes","unlikeMicroblog","indexOf","splice","getBio","uid_val","bio_cont","bio_text","fetchImageForCurrentUser","uid_curr","picname","getFollowersAndFollowing","usersTheUserIsFollowing","followersTheUserHas","followers","i","following","result","getFollowersAndFollowingForCurrentUser","followUserIAmViewing","currUserUID","currUserName","followedUserName","followedUserUID","usersIAmFollowing","followersOfUserIamFollowing","hasChild","usersList","unfollowUserIAmViewing","remove","addBlockedUser","blockedUsers","blockedList","currBlockedList","uid_blocked","blockedFromList","removeBlockedUser","newBlockedFromList","r","getBlockedUser","getUsersBlockedFrom","blockedFrom","addAndRemoveTopicsFromFollowedUser","topicsFollow","topicsUnFollow","getFollowedAndUnfollowedTopics","tList","v","followedTopicsList","unfollowedTopics","followedTopics","postCurrentUserBio","deleteUserData","followingUsers","followedUsers","profilePic","followerUid","followingUserUid","followerlist","localeCompare","storage","delete","getMicroblogsForUserTimeline","Microblogs","mapUsernameToUID","uidOfUser","followedUsername","uidOfFollowedUser","microblogs","followingTimestampOfFollowedUser","currMicroblog","foundNewTopic","t","j","sort","m1","m2","getMicroblogsForCurrentUser","getMicroblogsForUser","getUserdataOfLoggedInUser","onAuthStateChanged","getUserdataOfUser","userData","getUserdataOfUserDiff","MicroblogWriter","microblogData","Object","isQuoted","quotedMicroblog","numOfMicroblog","microblogPosted","fetchImage","numTopics","document","getElementById","picname2","blogid","getDownloadURL","toReturn","querySelectorAll","item","code","AutoCompleteSearchBar","onTextChanged","items","suggestions","regex","RegExp","filter","test","setState","text","state","clickoption","searchForUser","checkIfFocused","changeFocus","keyPress","map","onMouseDown","suggestionSelected","userexists","keyCode","onKeyDown","onChange","renderSuggestions","ColorButton","getContrastText","TopBarTwisster","getAllUsernames","getCurrentUsername","goToProfile","goLogout","goToChat","goToLanding","fontSize","TopBar","topBar","user_list","all_users","TopicView","TopicHighlightedView","Topic","topic","data","highlight","TopicsBox","Topics","createTopics","topicsArray","num","highlightbool","substr","StyledBadge1","badge","right","border","background","paper","padding","Badge","theid","Tweet","MicroblogView","unitid","likeButtonClicked","badgeContent","isLiked","class","quoteButtonClicked","quoteButtonText","QuotingMicroblogBox","Microblog","counter","like","liked","quote","strangeruid","toMatch","loggedInUser","nullLiteral","QuotedMicroblog","quotedContent","quotedTopics","quotedUserLikes","quotedNumLikes","quotedUser","profilePicture","createMicroblogs","microblogsArray","Landing","loaded","editMode","updateMicroblogs","LandingPage","checkboxes","Checkbox","checked","CheckboxContainer","checkedItems","Map","handleChange","save","isChecked","prevState","checkbox_new","unFollowedTopics","entries","k","Fragment","get","ProfilepicView","changeProfPic","deletePic","thename","NewProfilepicView","VisitedProfilepic","VisitedUserView","userProfile","followersAndFollowing","followUser","dmUser","blockUser","bio","ProfilePicture","uploadImage","inpFile","file","files","put","response","toUpload","forceUpdate","deletePicture","strangername","visiting","upLoadImage","changePic","toRet","querySelector","visiterImage","LoggedInUserView","deleteAccount","submitRestrictDM","logout","editProfile","marginLeft","LoggedInUserEditView","saveChanges","User","loggedInViewingOwnProfile","followOrUnfollowUser","directMessageUser","renderLoggedInUser","renderVisitedUser","objList","blockUsers","mustUpdate","textContent","check","unblockedUsers","follow","dmUsername","downloadUserProfile","usersBlockedFrom","prevProps","userID","fetchData","ProfilePageView","PageNotFound","ProfilePage","localProps","doesNotExist","setUsername","allUsers","UIDtoUsername","location","path","substring","ProfilePageRouting","replace","DeleteAccountAuthenticationView","DeleteAcountAuthenticationContainter","currentEmail","currentUsername","valid_password","enableMultiContainer","POSITION","TOP_RIGHT","Messages","messages","m","renderMessage","member","currentMember","onSendMessage","autofocus","randomColor","Math","floor","random","toString","Chat","retrievedUnseenDMUsers","otherUID","changeButtonColor","appendMessageFromMe","setTimeout","innerHTML","element","scrollTop","scrollHeight","userButtonClick","updateUserName","getUsernameOfOtherUser","retrievedDMUsers","keys","addButton","buttons","getElementsByTagName","len","addEventListener","mouseEvt","toElement","button","appendChild","createElement","outerHTML","buttonID","inputUsername","otherUIDRetrieved","currBlocked","getUsersBlocked","setPlaceholderInputBar","currentRetrievedData","removeUserFromUnseenList","fillWithPreviousMessages","listenToPersistantMessages","listenToUsersBlockedFrom","listenToUnseenUsersDM","minWidth","retrievedData","appendMessageFromOtherUser","inputText","adjustData","member2","on","retrievedData2","configure","App","exact","component","Login","SignUp","DeleteAccountAuthentication","Boolean","window","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1ec8ae9f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React from \"react\";\r\nimport './TopBar.css'\r\n\r\nconst TopBarTwissterLoginSignup = () => {\r\n    return (\r\n      <div className=\"inner-body\">\r\n        <label className=\"top-bar-twisster\" >Twistter</label>\r\n        {/* <input className=\"top-bar-search\" placeholder=\"Search\"/>\r\n        <button className=\"top-bar-button\" type=\"button\" onClick={onClickProfile}>Go to your profile</button>  */}   \r\n      </div>\r\n    )\r\n}\r\nexport default TopBarTwissterLoginSignup;\r\n","import TopBarTwissterLoginSignup from './TopBarLoginSignupView'\r\nimport React, { PureComponent } from 'react'\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport firebase from \"firebase\";\r\nclass TopBarLoginSignup extends React.Component{\r\n\r\n    constructor(props) {\r\n  \r\n      super(props);\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"top-bar\">\r\n                <TopBarTwissterLoginSignup  />\r\n            </div>\r\n          )\r\n    }\r\n}\r\nexport default withRouter(TopBarLoginSignup);","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport TopBarLoginSignup from \"./TopBarLoginSignup\"\r\n\r\n\r\nclass Home extends Component {\r\n\r\n  goLogIn = async event => {\r\n    \r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  goSignUp = async event => {\r\n\r\n    this.props.history.push({\r\n      pathname: '/signup'\r\n    })\r\n  };\r\n \r\n  render() {\r\n    return (\r\n      <div>\r\n        <TopBarLoginSignup />\r\n        <h1>Home</h1>\r\n        <form>\r\n        <button onClick={this.goLogIn}>Login</button>\r\n        <button onClick={this.goSignUp}>Signup</button>\r\n        </form>\r\n      </div>\r\n  );\r\n  }\r\n  \r\n}\r\n\r\nexport default withRouter(Home);\r\n\r\n","import firebase from \"firebase\";\r\n\r\nconst app = firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: 'gs://twistter.appspot.com/',\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n    \r\n});\r\n\r\nexport default app;","import React from \"react\";\r\nimport \"./LoginView.css\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport logo from \"../assets/twisster_logo.png\";\r\n\r\nconst MainLogo = props => {\r\n  return (\r\n    <img className=\"logo-twisster\" src={logo}>\r\n      {props.children}\r\n    </img>\r\n  );\r\n};\r\n\r\nconst MainName = props => {\r\n  return <label className=\"name-twisster\">twisster</label>;\r\n};\r\n\r\nconst CenterUiBox = props => {\r\n  return <div className=\"login-prompt\">{props.children}</div>;\r\n};\r\n\r\nconst EmailField = props => {\r\n  return (\r\n    <input\r\n      name=\"email\"\r\n      className=\"login-textbox\"\r\n      placeholder=\"Email/Username\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Email/Username\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst PasswordField = props => {\r\n  return (\r\n    <input\r\n      name=\"password\"\r\n      className=\"password-textbox\"\r\n      type=\"password\"\r\n      placeholder=\"Password\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Password\")}\r\n      focus\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst LogInView = ({ onSubmit, onClick }) => {\r\n  return (\r\n    <div className=\"main-body\">\r\n      <div className=\"body\">\r\n        <CenterUiBox>\r\n          {/* <h1>Login</h1> */}\r\n          <MainLogo></MainLogo>\r\n          <MainName></MainName>\r\n          <form onSubmit={onSubmit}>\r\n            <EmailField />\r\n            <PasswordField />\r\n            <Button\r\n              className=\"login-button\"\r\n              variant=\"outline-dark\"\r\n              type=\"submit\"\r\n            >\r\n              <span>Login </span>\r\n            </Button>\r\n          </form>\r\n          <Button\r\n            className=\"signup-button\"\r\n            variant=\"outline-dark\"\r\n            type=\"submit\"\r\n            onClick={onClick}\r\n          >\r\n            <span>Sign Up </span>\r\n          </Button>\r\n        </CenterUiBox>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogInView;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport app from \"../base\";\r\nimport TopBarLoginSignup from \"../TopBarLoginSignup\";\r\n\r\nimport LogInView from \"./LogInView\";\r\nimport firebase from \"firebase\";\r\n\r\nimport { toast } from 'react-toastify';\r\n// goLogIn = async event => {\r\n\r\n//   this.props.history.push({\r\n//     pathname: \"/login\"\r\n//   });\r\n// };\r\n\r\nclass LogInContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleLogIn = this.handleLogIn.bind(this);\r\n    this.goSignUp = this.goSignUp.bind(this);\r\n  }\r\n\r\n  handleLogIn = async event => {\r\n\r\n    event.preventDefault();\r\n    const { email, password } = event.target.elements;\r\n    try {\r\n      var user_exists = true;\r\n      var username_or_email;\r\n      await app\r\n        .database()\r\n        .ref()\r\n        .once(\"value\", snapshot => {\r\n          var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n          if (email.value.includes(\"@\") != true) {\r\n            if (user_email_list[email.value] == undefined) {\r\n              user_exists = false;\r\n            }\r\n            username_or_email = user_email_list[email.value];\r\n          } else {\r\n            username_or_email = email.value;\r\n            user_exists = false;\r\n            var value;\r\n            for (var key in user_email_list) {\r\n              value = user_email_list[key];\r\n              if (value == email.value) {\r\n                user_exists = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n      if (!user_exists) {\r\n        toast(\"User Account does not exist\");\r\n        toast(\"User Account does not exist\", { containerId: \"B\" });\r\n        return;\r\n      }\r\n\r\n      this.user = await app\r\n        .auth()\r\n        .signInWithEmailAndPassword(username_or_email, password.value);\r\n\r\n        if(!this.user){\r\n          toast(\"Error\")\r\n        }\r\n\r\n      if (!this.user.user.emailVerified) {\r\n        toast(\"email is not verified! resending verification link...\");\r\n        firebase\r\n          .auth()\r\n          .currentUser.sendEmailVerification({\r\n            url: \"http://localhost:3000/login\",\r\n            handleCodeInApp: true\r\n          })\r\n          .then(function() {\r\n            console.log(\"sent verification email\");\r\n            toast(\"sent verification email\");\r\n          })\r\n          .catch(function(error) {\r\n            toast(error);\r\n          });\r\n        return;\r\n      }\r\n\r\n      this.props.history.push({\r\n        pathname: \"/landing\"\r\n      });\r\n    } catch (error) {\r\n      toast(error.message);\r\n      \r\n    }\r\n  };\r\n\r\n  goSignUp = async event => {\r\n    this.props.history.push({\r\n      pathname: \"/signup\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        \r\n\r\n        {/* <TopBarLoginSignup /> */}\r\n        <LogInView onSubmit={this.handleLogIn} onClick={this.goSignUp} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(LogInContainer);\r\n","import React from \"react\";\r\nimport \"./SignUp.css\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport logo from \"../assets/twisster_logo.png\";\r\n\r\nconst MainLogo = props => {\r\n  return (\r\n    <img className=\"logo-twisster\" src={logo}>\r\n      {props.children}\r\n    </img>\r\n  );\r\n};\r\n\r\nconst MainName = props => {\r\n  return <label className=\"name-twisster\">twisster</label>;\r\n};\r\n\r\nconst SignupEmail = props => {\r\n  return (\r\n    <input\r\n      name=\"email\"\r\n      className=\"s_email-textbox\"\r\n      placeholder=\"Email\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Email\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst ReturnToLogin = props => {\r\n  return (\r\n    <div>\r\n      <label className=\"return-login\">\r\n        Already a member?\r\n        <button\r\n          type=\"submit\"\r\n          className=\"return-login_b\"\r\n          onClick={props.onClick}\r\n        >\r\n          Login\r\n        </button>\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SignupUsername = props => {\r\n  return (\r\n    <input\r\n      name=\"username\"\r\n      className=\"s_username-textbox\"\r\n      placeholder=\"Username\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Username\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst SignupPassword = props => {\r\n  return (\r\n    <input\r\n      name=\"password\"\r\n      type=\"password\"\r\n      className=\"s_password-textbox\"\r\n      placeholder=\"Password\"\r\n      onFocus={e => (e.target.placeholder = \"\")}\r\n      onBlur={e => (e.target.placeholder = \"Password\")}\r\n    >\r\n      {props.children}\r\n    </input>\r\n  );\r\n};\r\n\r\nconst CenterUiBox = props => {\r\n  return <div className=\"s_login-prompt\">{props.children}</div>;\r\n};\r\n\r\nconst SignUpView = ({ onSubmit, onClick }) => {\r\n  return (\r\n    <CenterUiBox>\r\n      <form onSubmit={onSubmit}>\r\n        <MainLogo></MainLogo>\r\n        <MainName></MainName>\r\n        <SignupEmail />\r\n        <SignupUsername />\r\n        <SignupPassword />\r\n        <Button\r\n          className=\"s_signup-button\"\r\n          variant=\"outline-dark\"\r\n          type=\"submit\"\r\n        >\r\n          <span>Sign Up </span>\r\n        </Button>\r\n      </form>\r\n      <ReturnToLogin onClick={onClick} />\r\n    </CenterUiBox>\r\n  );\r\n};\r\n\r\nexport default SignUpView;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport firebase from \"firebase\";\r\nimport SignUpView from \"./SignUpView\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nclass SignUpContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.goLogin = this.goLogin.bind(this);\r\n  }\r\n\r\n  handleSignUp = async event => {\r\n    event.preventDefault();\r\n    const { email, username, password } = event.target.elements;\r\n    try {\r\n      //check to see if email, and username is a unique combination\r\n      var username_exists = false;\r\n      await firebase\r\n        .database()\r\n        .ref()\r\n        .once(\"value\", snapshot => {\r\n          var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n          if (user_email_list != undefined) {\r\n            if (user_email_list[username.value] != undefined) {\r\n              toast(\"Username already exists\");\r\n              username_exists = true;\r\n            }\r\n          }\r\n        });\r\n\r\n      if (username_exists == true) {\r\n        return;\r\n      }\r\n\r\n      //if email and password are unique, make a new user\r\n      const user = await firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email.value, password.value);\r\n\r\n      //if successful, add username / email combination to database\r\n      let username_email_combo = {};\r\n      username_email_combo[username.value] = email.value;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUsernameToEmail\")\r\n        .update(username_email_combo);\r\n\r\n      //add username / uid combination to database\r\n      let username_uid_combo = {};\r\n      username_uid_combo[username.value] = firebase.auth().currentUser.uid;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUsernameToUID\")\r\n        .update(username_uid_combo);\r\n\r\n      //add uid / username combination to database\r\n      let uid_username_combo = {};\r\n      uid_username_combo[firebase.auth().currentUser.uid] = username.value;\r\n      firebase\r\n        .database()\r\n        .ref()\r\n        .child(\"mapUIDtoUsername\")\r\n        .update(uid_username_combo);\r\n\r\n      //set redirect page\r\n      var actionCodeSettings = {\r\n        url: \"http://localhost:3000/login\",\r\n        handleCodeInApp: true\r\n      };\r\n\r\n      //send verification email\r\n      firebase\r\n        .auth()\r\n        .currentUser.sendEmailVerification(actionCodeSettings)\r\n        .then(function() {\r\n          console.log(\"sent verification email\");\r\n        })\r\n        .catch(function(error) {\r\n          toast(error.message);\r\n        });\r\n\r\n      //add timestamp for when they first signed up (used for automatic deletion)\r\n      var date = new Date();\r\n      var timestamp = date.getTime();\r\n\r\n      //create a new user from the data and set default fields and arrays\r\n      var database = firebase.database();\r\n      var newUserRef = database\r\n        .ref()\r\n        .child(\"users\")\r\n        .child(firebase.auth().currentUser.uid);\r\n      newUserRef.set({ email: email.value, signupTimestamp: timestamp, picture: \"default.jpg\" });\r\n\r\n      firebase.auth().signOut();\r\n\r\n      this.props.history.push(\"/login\");\r\n    } catch (error) {\r\n      toast(error.message);\r\n    }\r\n  };\r\n\r\n  goLogin = async event => {\r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"main-body\">\r\n        <SignUpView onSubmit={this.handleSignUp} onClick={this.goLogin} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(SignUpContainer);\r\n","import React, { Component } from \"react\";\r\nimport \"./Landing.css\";\r\nclass MicroblogBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"tweet-body\">{this.props.children}</div>;\r\n  }\r\n}\r\nexport default MicroblogBox;\r\n","import React from \"react\";\r\nimport MicroblogBox from \"../MicroblogBox\";\r\nimport \"./Landing.css\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport { green, blue, purple } from \"@material-ui/core/colors\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport { Icon } from \"@material-ui/core\";\r\nimport { width } from \"@material-ui/system\";\r\n\r\nconst styles = {\r\n  multilineColor: {\r\n    color: \"red\"\r\n  },\r\n  input: {\r\n    color: \"white\",\r\n    currentColor: \"white\"\r\n  }\r\n};\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: green,\r\n    secondary: {\r\n      main: \"#1F3648\"\r\n    }\r\n  }\r\n});\r\n\r\nconst MicroblogWriterView = props => {\r\n  return (\r\n    <NewTweetBox>\r\n      <div className=\"inner-body\" style={{ height: \"80%\" }}>\r\n        <Image image={props.image} />\r\n        <div className=\"body\" style={{ flex: \"0 0 456px\" }}>\r\n          <div className=\"inner-body\">\r\n            <Name name={props.name} id=\"name\" />\r\n            <Handle handle={props.handle} />\r\n          </div>\r\n          <div className=\"body\">\r\n            {/* <textarea id=\"content\" className=\"new-tweet\" placeholder=\"Hello\" /> */}\r\n\r\n            <NewTweet\r\n              id={props.contentId}\r\n              placeholder=\"How are you feeling today?\"\r\n              rows=\"5\"\r\n              multiline\r\n              margin=\"dense\"\r\n              variant=\"standard\"\r\n              color=\"primary\"\r\n            />\r\n            <ListedTopics\r\n              disableUnderline\r\n              disabled\r\n              id={props.showTopicsId}\r\n              label=\"Added Topics\"\r\n              placeholder=\"Added Topics Show Up Here\"\r\n              onSubmit={props.addTopic}\r\n              variant=\"standard\"\r\n            />\r\n\r\n            {/* <textarea\r\n              disabled\r\n              id=\"showTopics\"\r\n              className=\"added-topic\"\r\n              placeholder=\"Topics Listed Here\"\r\n            /> */}\r\n          </div>\r\n          <div className=\"body\" style={{ minHeight: \"48px\" }}>\r\n            <div className=\"inner-body\">\r\n              <AddTopics\r\n                id={props.addTopicsId}\r\n                style={{ width: \"300px\" }}\r\n                placeholder=\"Add Topics Here\"\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <AddTopic aria-label=\"add\" onClick={props.addTopic}>\r\n                      <AddIcon />\r\n                    </AddTopic>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n              <PostButton\r\n                size=\"large\"\r\n                variant=\"extended\"\r\n                onClick={props.submitMicroblog}\r\n                color=\"secondary\"\r\n              >\r\n                Post\r\n                <SendIcon style={{ margin: \"0px 10px 0px\" }} />\r\n              </PostButton>\r\n\r\n              {/* <button type=\"submit\" onClick={props.addTopic}>\r\n              Add New Topics\r\n            </button> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </NewTweetBox>\r\n  );\r\n};\r\nconst ListedTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    \"&::placeholder\": {\r\n      color: \"gray\"\r\n    },\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nconst AddTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nconst AddTopic = withStyles(theme => ({\r\n  root: {\r\n    backgroundColor: \"transparent\"\r\n  }\r\n}))(IconButton);\r\n\r\nconst PostButton = withStyles(theme => ({\r\n  root: {\r\n    backgroundColor: blue[800],\r\n    top: \"-20px\",\r\n    left: \"2%\"\r\n  }\r\n}))(Fab);\r\n\r\nconst NewTweet = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"14px 12px 4px\"\r\n  },\r\n  \"&::placeholder\": {\r\n    fontStyle: \"italic\"\r\n  },\r\n  multiline: {\r\n    input: {\r\n      color: \"white\"\r\n    }\r\n  }\r\n}))(TextField);\r\n\r\nconst NewTweetBox = props => {\r\n  return <div className=\"new-tweet-body\">{props.children}</div>;\r\n};\r\n\r\nconst Image = image => {\r\n  return <img src={image} id=\"img3\" alt=\"Logo\" className=\"picture\"></img>;\r\n};\r\n\r\nconst Handle = props => {\r\n  return <div className=\"handle\">{props.handle}</div>;\r\n};\r\n\r\nconst Name = props => {\r\n  return <div className=\"name\">{props.name}</div>;\r\n};\r\nexport { MicroblogWriterView };\r\n","class UserData{  \r\n\r\n    constructor(username, loggedIn, viewingOwnProfile){\r\n        this.username = username;\r\n        this.viewingOwnProfile = viewingOwnProfile;\r\n        this.loggedIn = loggedIn;\r\n    }\r\n\r\n    getUsername(){\r\n        return this.username;\r\n    }\r\n\r\n    getUid(){\r\n        return this.uid;\r\n    }\r\n}\r\nexport default UserData;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport ReactDOM from 'react-dom';\r\nimport firebase from \"firebase\";\r\nimport { resolve } from \"dns\";\r\nimport UserData from \"./DataObjects/UserData\";\r\nimport { isFlowDeclaration } from \"@babel/types\";\r\n/*\r\nTODO\r\nHow to use this class:\r\n\r\n*/\r\nconst helperfunctions =\r\n    {\r\n    //Create a new user\r\n    // //@Params\r\n    // //email: user's email\r\n    // //username: user's username\r\n    // //password: user's password\r\n    // createNewUser(email, username, password)\r\n    // {\r\n    //     console.log(\"Entered createNewUser\");\r\n    //     //create email and password\r\n    //     const user = await firebase.auth().createUserWithEmailAndPassword(email.value, password.value);\r\n    //     //update username:email combo\r\n    //     let username_email_combo = {};\r\n    //     username_email_combo[username.value] = email.value;\r\n    //     firebase.database.ref().child('mapUsernameToEmail').update(username_email_combo);\r\n    //     //update username:uid combo\r\n    //     let username_uid_combo = {};\r\n    //     username_uid_combo[username.value] = uid.value;\r\n    //     firebase.database.ref().child('mapUsernameToUid').update(username_uid_combo);\r\n    //     console.log(\"Exited createNewUser\");\r\n    // }\r\n\r\n    //Description: Retrieve uid of a specific user\r\n    //@Params\r\n    //username: username of the specific user\r\n    //@Return\r\n    //uid_follow: uid of the specific user\r\n    retrieveUserUid: function(username)\r\n    {\r\n        console.log(\"Entered retrieveUserUid\");\r\n        var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n        var uid_follow = username_uid_map[username];\r\n        console.log(\"Exited retrieveUserUid\");\r\n        return uid_follow;\r\n    },\r\n\r\n    //Description: Retrieve email of a specific user\r\n    //@Params\r\n    //username: username of the specific user\r\n    //@Return\r\n    //email: email of the specific user\r\n    retrieveUserEmail: function(username) \r\n    {\r\n        console.log(\"Entered retrieveUserEmail\");\r\n        var username_email_map = firebase.database().ref().child(\"mapUsernameToEmail\");\r\n        var email = username_email_map[username];\r\n        console.log(\"Exited retrieveUserEmail\");\r\n        return email;\r\n    },\r\n\r\n    retrieveUsername: async function(uid)\r\n    {\r\n      console.log(\"Entered retrieveUsername\");\r\n      var username;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        username = mapUIDtoUsername[uid];\r\n      });\r\n      console.log(\"Exited retrieveUsername\");\r\n      return username;\r\n    },\r\n\r\n    getAllUsers: async function(username)\r\n    {\r\n      var usernames = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        snapshot.child(\"users\").forEach(function(childSnapshot)\r\n        {\r\n          var currUsername = mapUIDtoUsername[childSnapshot.key];\r\n          if(currUsername !== username)\r\n          {\r\n            usernames.push(currUsername);\r\n          }\r\n        });\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return usernames;\r\n    },\r\n\r\n    getAllOtherUsers: async function()\r\n    {\r\n      var usernames = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        snapshot.child(\"users\").forEach(function(childSnapshot)\r\n        {\r\n          var currUsername = mapUIDtoUsername[childSnapshot.key];\r\n          usernames.push(currUsername);\r\n        });\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return usernames;\r\n    },\r\n\r\n    //Description: Add a user to follow to the current user's list of followers\r\n    //@Params\r\n    //usernameFollow: username of the individual you want to follow\r\n    //DEPRECATED\r\n    // addFollowedUser: function(usernameFollow)\r\n    // {\r\n    //     console.log(\"Entered addFollowedUser\");\r\n    //     //get the uid of the current user\r\n    //     var uid_current = firebase.auth().currentUser.uid;\r\n    //     //get the uid of the user to follow\r\n    //     var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n    //     var uid_follow = username_uid_map[usernameFollow];\r\n    //     //put it in the appropriate spot in the databasee under followedUsers\r\n    //     //add uid and an empty list of followedTopics\r\n    //     var followedUserRef = firebase.database().ref().child(\"users\").child(uid_current).child(\"followedUsers\").child(uid_follow);\r\n    //     followedUserRef.push ({\r\n    //         followedTopics: []\r\n    //     });\r\n    //     console.log(\"Exited addFollowedUser\");\r\n    // },\r\n\r\n    //Description: Add a topic that the current user follows to the already followed user\r\n    //@Params\r\n    //usernameFollow: username of the individual the current user has followed, type: string\r\n    //topicsFollow: the topic(s) that the current user wants to follow from the given usernameFollow, type: array\r\n    //DEPRECATED\r\n    // addFollowedTopicToFollowedUser: function(usernameFollow, topicsFollow)\r\n    // {\r\n    //     console.log(\"Entered addFollowedTopicToFollowedUser\");\r\n    //     //get the uid of the current user\r\n    //     var uid_current = firebase.auth().currentUser.uid;\r\n    //     //get the uid of the user to follow\r\n    //     var username_uid_map = firebase.database.ref().child(\"mapUsernameToUid\");\r\n    //     var uid_follow = username_uid_map[usernameFollow];\r\n    //     //add followedTopic to the list of followedTopics within the followedUser\r\n    //     firebase.database().ref().once('value', (snapshot) => {\r\n    //         var followedTopics = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"followedUsers\").child(uid_follow).child(\"followedTopics\").val();\r\n    //         for(var index = 0; index < topicsFollow.length; index++)\r\n    //         {\r\n    //             followedTopics.push(topicsFollow[index]);\r\n    //         }\r\n    //     });\r\n    //     console.log(\"Exited addFollowedTopicToFollowedUser\");\r\n    // },\r\n\r\n    //Description: Add a topic to current user (when current user decides to write and post a microblog)\r\n    //@Params\r\n    //content: a string that represents the blog itself (must be a string of less than 250 characters), type: string\r\n    //topic(s): a list of topics associated to the blog, type: array\r\n    addMicroBlogToCurrentUser: async function(content, topics)\r\n    {\r\n        var username = \"\";\r\n        console.log(\"Entered addMicroBlogToCurrentUser\");\r\n        //get the current user's uid\r\n        var uid_current = firebase.auth().currentUser.uid;\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          username = mapUIDtoUsername[uid_current];\r\n          console.log(\"USERNAME:\", username);\r\n        });\r\n        //fetch the current timestamp\r\n        var date = new Date();\r\n        var timestamp = date.getTime();\r\n        //check if the length of the microblog does not exceed 250 characters\r\n        if(content.length > 250)\r\n        {\r\n            console.log(\"ERROR: content of microblog cannot exceed 250 characters --> will not store in firebase\");\r\n        }\r\n        //add uid, microblog content, and list of topics to Microblogs\r\n        var wTopics = [];\r\n\r\n        for(var index = 0; index < topics.length; index++)\r\n        {\r\n            wTopics.push({\"topics\":topics[index], \"timestamp\":timestamp});\r\n        }\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            var writtenTopics = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").val();\r\n            console.log(\"TYPE:\", typeof(writtenTopics));\r\n            //console.log(\"VALUES:\", Object.values(writtenTopics));\r\n            if(writtenTopics == null || writtenTopics.length === 0)\r\n            {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(wTopics);\r\n            }\r\n            else\r\n            {\r\n                for(var index = 0; index < wTopics.length; index++)\r\n                {\r\n                  var w = 0;\r\n                  for (; w < writtenTopics.length; w++) {\r\n                    if (writtenTopics[w].topics == wTopics[index].topics) {\r\n                      break;\r\n                    }\r\n                  }\r\n                  if (w == writtenTopics.length) {\r\n                    writtenTopics.push(wTopics[index]);\r\n                  }\r\n                }\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(writtenTopics);\r\n            }\r\n        });\r\n        var topicsList = [];\r\n        for(var index = 0; index < topics.length; index++)\r\n        {\r\n            topicsList.push(topics[index]);\r\n        }\r\n        var numLikes = 0;\r\n        var userLikes = [];\r\n        userLikes.push(\"hello\");\r\n        var microblog = {'userLikes': userLikes, 'id': username + timestamp, 'user': username, 'content': content, 'topics': topicsList, 'timestamp': timestamp, 'numLikes': numLikes};\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            var microblog_list = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").val();\r\n            //console.log(microblog_list);\r\n            if(microblog_list == null || microblog_list.length === 0)\r\n            {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set({'0': microblog});\r\n            }\r\n            else\r\n            {\r\n                microblog_list.push(microblog);\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set(microblog_list);\r\n            }\r\n        });\r\n\r\n        resolve(\"done\");\r\n        return;\r\n        console.log(\"Exited addMicroBlogToCurrentUser\");\r\n    },\r\n\r\n    addQuotedMicroblogToCurrentUser: async function(microblog, content, topics)\r\n    {\r\n      console.log(\"Entered addQuotedMicroblogToCurrentUser\");\r\n      var username = \"\";\r\n      var uid_current = firebase.auth().currentUser.uid;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        username = mapUIDtoUsername[uid_current];\r\n        console.log(\"USERNAME:\", username);\r\n      });\r\n\r\n      var date = new Date();\r\n      var timestamp = date.getTime();\r\n      if(content.length > 250)\r\n      {\r\n        console.log(\"ERROR: content of microblog cannot exceed 250 characters --> will note store in firebase\");\r\n      }\r\n\r\n      var wTopics = [];\r\n\r\n      for(var index = 0; index < topics.length; index++)\r\n      {\r\n        wTopics.push({\"topics\": topics[index], \"timestamp\": timestamp});\r\n      }\r\n\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var writtenTopics = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").val();\r\n        console.log(\"TYPE:\", typeof(writtenTopics));\r\n        //console.log(\"VALUES:\", Object.values(writtenTopics));\r\n        if(writtenTopics == null || writtenTopics.length === 0)\r\n        {\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(wTopics);\r\n        }\r\n        else\r\n        {\r\n            for(var index = 0; index < wTopics.length; index++)\r\n            {\r\n              var w = 0;\r\n              for (; w < writtenTopics.length; w++) {\r\n                if (writtenTopics[w].topics == wTopics[index].topics) {\r\n                  break;\r\n                }\r\n              }\r\n              if (w == writtenTopics.length) {\r\n                writtenTopics.push(wTopics[index]);\r\n              }\r\n            }\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"writtenTopics\").set(writtenTopics);\r\n        }\r\n      });\r\n\r\n      var topicsList = [];\r\n      for(var index = 0; index < topics.length; index++)\r\n      {\r\n          topicsList.push(topics[index]);\r\n      }\r\n      var numLikes = 0;\r\n      var userLikes = [];\r\n      userLikes.push(\"hello\");\r\n\r\n      var microblogAdd = {};\r\n      if(microblog.userLikes !== undefined)\r\n      {\r\n        microblogAdd = {'quotedUserLikes': userLikes, 'quotedId': username + timestamp, 'quotedUser': username, 'quotedContent': content, 'quotedTopics': topicsList, 'timestamp': timestamp, 'quotedNumLikes': numLikes, 'quote': true, 'userLikes': microblog.userLikes, 'id': microblog.id, 'user': microblog.name, 'content': microblog.tweet, 'topics': microblog.topics, 'numLikes': microblog.numLikes};\r\n      }\r\n      else\r\n      {\r\n        microblogAdd = {'quotedUserLikes': userLikes, 'quotedId': username + timestamp, 'quotedUser': username, 'quotedContent': content, 'quotedTopics': topicsList, 'timestamp': timestamp, 'quotedNumLikes': numLikes, 'quote': true, 'id': microblog.id, 'user': microblog.name, 'content': microblog.tweet, 'topics': microblog.topics, 'numLikes': microblog.numLikes};\r\n      }\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var microblog_list = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").val();\r\n        //console.log(microblog_list);\r\n        if(microblog_list == null || microblog_list.length === 0)\r\n        {\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set({'0': microblogAdd});\r\n        }\r\n        else\r\n        {\r\n            microblog_list.push(microblogAdd);\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").set(microblog_list);\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n\r\n      console.log(\"Exited addQuotedMicroblogToCurrentUser\");\r\n    },\r\n\r\n    likeMicroblog: async function(microblog, username)\r\n    {\r\n      console.log(\"Entered likeMicroblog\");\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var UIDofUserIAmViewing = mapUsernameToUID[microblog.name];\r\n        snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").forEach((function(child)\r\n        {\r\n          //console.log(username);\r\n          // console.log(child);\r\n          // console.log(child.key);\r\n          // console.log(child.val().id);\r\n          var countLikes = 0;\r\n          var userLikes = [];\r\n          if(child.val().id === microblog.id)\r\n          {\r\n            if(child.val().userLikes === undefined)\r\n            {\r\n              userLikes.push(username);\r\n            }\r\n            else if(child.val().userLikes.includes(username) === false)\r\n            {\r\n              if(child.val().numLikes === 0 || child.val().userLikes.includes(\"hello\"))\r\n              {\r\n                userLikes = child.val().userLikes;\r\n                userLikes[0] = username;\r\n              }\r\n              else\r\n              {\r\n                userLikes = child.val().userLikes;\r\n                userLikes.push(username);\r\n              }\r\n            }\r\n            else if(child.val().userLikes.includes(username) === true)\r\n            {\r\n              userLikes = child.val().userLikes;\r\n            }\r\n            countLikes = userLikes.length;\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'userLikes': userLikes});\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'numLikes': countLikes});\r\n          }\r\n        }));\r\n      });\r\n\r\n      resolve(\"done\");\r\n      console.log(\"Exited likeMicroblog\");\r\n    },\r\n\r\n    unlikeMicroblog: async function(microblog, username)\r\n    {\r\n      console.log(\"Entered unlikeMicroblog\");\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var UIDofUserIAmViewing = mapUsernameToUID[microblog.name];\r\n        snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").forEach((function(child)\r\n        {\r\n          var countLikes = 0;\r\n          var userLikes = [];\r\n          if(child.val().id === microblog.id)\r\n          {\r\n            if(child.val().userLikes === undefined)\r\n            {\r\n              countLikes = 0;\r\n            }\r\n            else if(child.val().userLikes.includes(username) === true)\r\n            {\r\n              userLikes = child.val().userLikes;\r\n              var index = userLikes.indexOf(username);\r\n              userLikes.splice(index, 1);\r\n            }\r\n            countLikes = userLikes.length;\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'userLikes': userLikes});\r\n            firebase.database().ref().child(\"users\").child(UIDofUserIAmViewing).child(\"Microblogs\").child(child.key).update({'numLikes': countLikes});\r\n          }\r\n        }));\r\n      });\r\n      resolve(\"done\");\r\n      console.log(\"Exited unlikeMicroblog\");\r\n    },\r\n    \r\n    //Description: fetch another Users bio (when current user visits another profile)\r\n    //@Params\r\n    //username: string containing Username of profile page current User is visiting\r\n    /* getBio: function(username) \r\n    {\r\n        var bio_content;\r\n        //fetch user's uid from the username to uid list and then fetch bio from coresponding uid.\r\n        firebase.database().ref().once('value', (snapshot) => {\r\n            var user_uid_list = snapshot.child('mapUsernameToUID').val();\r\n            var uid_val = user_uid_list[username];\r\n            bio_content = snapshot.child(\"users\").child(uid_val).child(\"bio\").val();\r\n        });\r\n\r\n        return bio_content;\r\n    }, */\r\n\r\n    getBio: async function(username) {\r\n\r\n      var bio_text;\r\n  \r\n      const bio = await firebase.database().ref().once('value', (snapshot) => {\r\n        var user_uid_list = snapshot.child('mapUsernameToUID').val();\r\n        var uid_val = user_uid_list[username];\r\n        var bio_cont = snapshot.child(\"users\").child(uid_val).child(\"bio\").val();\r\n        if (bio_cont != undefined) {\r\n          //resolve(bio_cont);\r\n          bio_text = bio_cont;\r\n          return bio_cont;\r\n        }\r\n      });\r\n\r\n        resolve(\"done\")\r\n        return bio_text;\r\n    },\r\n\r\n    fetchImageForCurrentUser: async function(username)\r\n    {\r\n      var picname;\r\n      await firebase.database().ref().once('value', (snapshot) =>\r\n      {\r\n        var uid_curr = snapshot.child(\"mapUsernametoUid\").child(username).val();\r\n        picname = snapshot.child(\"users\").child(uid_curr).child(\"picture\").val();\r\n      });\r\n      return picname;\r\n    },\r\n\r\n    //Method to get list of followers and following\r\n    getFollowersAndFollowing: async function(username){\r\n\r\n        var result;\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n    \r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var UIDofUserIAmViewing = mapUsernameToUID[username];\r\n          var usersTheUserIsFollowing = [];\r\n          snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"following\").forEach((function(child)\r\n          {\r\n            usersTheUserIsFollowing.push(child.key);\r\n          }));\r\n          var followersTheUserHas = snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"followers\").val();\r\n          var followers = \"\";\r\n          if(followersTheUserHas == null)\r\n          {\r\n            followers = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < followersTheUserHas.length - 1; i++)\r\n            {\r\n              followers += followersTheUserHas[i] + \", \";\r\n            }\r\n            followers += followersTheUserHas[followersTheUserHas.length - 1];\r\n          }\r\n          var following = \"\";\r\n          if(usersTheUserIsFollowing == null || usersTheUserIsFollowing === undefined || usersTheUserIsFollowing.length === 0)\r\n          {\r\n            following = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < usersTheUserIsFollowing.length - 1; i++)\r\n            {\r\n              following += usersTheUserIsFollowing[i] + \", \";\r\n            }\r\n            following += usersTheUserIsFollowing[usersTheUserIsFollowing.length - 1];\r\n          }\r\n          result = {followers, following};\r\n          \r\n        });\r\n\r\n        resolve(\"done\");\r\n        return result;\r\n    },\r\n\r\n    getFollowersAndFollowingForCurrentUser: async function()\r\n    {\r\n        var result;\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n    \r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var UIDofUserIAmViewing = firebase.auth().currentUser.uid;\r\n          var usersTheUserIsFollowing = [];\r\n          snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"following\").forEach((function(child)\r\n          {\r\n            usersTheUserIsFollowing.push(child.key);\r\n          }));\r\n          var followersTheUserHas = snapshot.child(\"users\").child(UIDofUserIAmViewing).child(\"followers\").val();\r\n          var followers = \"\";\r\n          if(followersTheUserHas == null)\r\n          {\r\n            followers = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < followersTheUserHas.length - 1; i++)\r\n            {\r\n              followers += followersTheUserHas[i] + \", \";\r\n            }\r\n            followers += followersTheUserHas[followersTheUserHas.length - 1];\r\n          }\r\n          var following = \"\";\r\n          if(usersTheUserIsFollowing == null || usersTheUserIsFollowing === undefined || usersTheUserIsFollowing.length === 0)\r\n          {\r\n            following = \"\";\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < usersTheUserIsFollowing.length - 1; i++)\r\n            {\r\n              following += usersTheUserIsFollowing[i] + \", \";\r\n            }\r\n            following += usersTheUserIsFollowing[usersTheUserIsFollowing.length - 1];\r\n          }\r\n          result = {followers, following};\r\n          \r\n        });\r\n\r\n        resolve(\"done\");\r\n        return result;\r\n    },\r\n\r\n    //Method to follow user I am viewing\r\n    followUserIAmViewing: async function(username){\r\n        \r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var currUserUID = firebase.auth().currentUser.uid;\r\n          var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n          var followedUserName = username;\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n          var date = new Date();\r\n          var timestamp = date.getTime();\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"followingTimestamp\").child(followedUserName).set(timestamp);\r\n\r\n          var usersIAmFollowing = snapshot.child(\"users\").child(currUserUID).child(\"following\").val();\r\n          // var usersIAmFollowing = snapshot.child(\"users\").child(currUserUID).child(\"following\").forEach(function(childSnapshot) \r\n          // {\r\n          //   var childKey = childSnapshot.key;\r\n          //   toast(\"CHILD KEY: \" + childKey);\r\n          //   var childData = childSnapshot.val();\r\n          //   toast(\"CHILD VALUE: \" + childData);\r\n          // });\r\n\r\n          var followersOfUserIamFollowing = snapshot.child(\"users\").child(followedUserUID).child(\"followers\").val();\r\n\r\n          if(followedUserUID !== currUserUID)\r\n          {\r\n            if(usersIAmFollowing == null || usersIAmFollowing.length == 0)\r\n            {\r\n              var topicsList = [];\r\n              topicsList.push(\"None\");\r\n              if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").hasChild(followedUserName) === false)\r\n              {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n              }\r\n            }\r\n            else\r\n            {\r\n              var topicsList = [];\r\n              topicsList.push(\"None\");\r\n              if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").hasChild(followedUserName) === false)\r\n              {\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n              }\r\n            }\r\n\r\n            if(followersOfUserIamFollowing == null || followersOfUserIamFollowing.length === 0)\r\n            {\r\n                var usersList = [];\r\n                usersList.push(currUserName);\r\n                firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(usersList);\r\n            }\r\n            else\r\n            {\r\n              if(followersOfUserIamFollowing.includes(currUserName) === false)\r\n              {\r\n                followersOfUserIamFollowing.push(currUserName);\r\n                firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(followersOfUserIamFollowing);\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        resolve(\"done\");\r\n      },\r\n\r\n    //Method to unfollow user I am viewing\r\n    unfollowUserIAmViewing: async function(username)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        var followersOfUserIamFollowing = snapshot.child(\"users\").child(followedUserUID).child(\"followers\").val();\r\n\r\n        if(firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName) != null)\r\n        {\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).remove();\r\n        }\r\n\r\n        if(followersOfUserIamFollowing.includes(currUserName))\r\n        {\r\n          var usersList = [];\r\n          for(var i = 0; i < followersOfUserIamFollowing.length; i++)\r\n          {\r\n            if(followersOfUserIamFollowing[i] !== currUserName)\r\n            {\r\n              usersList.push(followersOfUserIamFollowing[i]);\r\n            }\r\n          }\r\n          firebase.database().ref().child(\"users\").child(followedUserUID).child(\"followers\").set(usersList);\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    addBlockedUser: async function(blockedUsers)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        \r\n        var blockedList = [];\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          blockedList.push(blockedUsers[index]);\r\n        }\r\n\r\n        var currBlockedList = [];\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          currBlockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n\r\n        for(var index = 0; index < currBlockedList.length; index++)\r\n        {\r\n          if(!blockedList.includes(currBlockedList[index]))\r\n          {\r\n            blockedList.push(currBlockedList[index]);\r\n          }\r\n        }\r\n\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").set(blockedList);\r\n\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var uid_blocked = mapUsernameToUID[blockedUsers[index]];\r\n          var blockedFromList = [];\r\n          if(snapshot.child(\"users\").child(uid_blocked).hasChild(\"usersBlockedFrom\") === true)\r\n          {\r\n            blockedFromList = snapshot.child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").val();\r\n          }\r\n          if(!blockedFromList.includes(currUserName))\r\n          {\r\n            blockedFromList.push(currUserName);\r\n          }\r\n\r\n          firebase.database().ref().child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").set(blockedFromList);\r\n          \r\n        }\r\n\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    removeBlockedUser: async function(blockedUsers)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n\r\n        var blockedList = [];\r\n\r\n        var currBlockedList = [];\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          currBlockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n\r\n        for(var index = 0; index < currBlockedList.length; index++)\r\n        {\r\n          if(!blockedUsers.includes(currBlockedList[index]))\r\n          {\r\n            blockedList.push(currBlockedList[index]);\r\n          }\r\n        }\r\n\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").set(blockedList);\r\n\r\n        for(var index = 0; index < blockedUsers.length; index++)\r\n        {\r\n          var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          var uid_blocked = mapUsernameToUID[blockedUsers[index]];\r\n          var blockedFromList = [];\r\n          var newBlockedFromList = [];\r\n          if(snapshot.child(\"users\").child(uid_blocked).hasChild(\"usersBlockedFrom\") === true)\r\n          {\r\n            blockedFromList = snapshot.child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").val();\r\n          }\r\n          for(var r = 0; r < blockedFromList.length; r++)\r\n          {\r\n            if(blockedFromList[r] !== currUserName)\r\n            {\r\n              newBlockedFromList.push(blockedFromList[r]);\r\n            }\r\n          }\r\n\r\n          firebase.database().ref().child(\"users\").child(uid_blocked).child(\"usersBlockedFrom\").set(newBlockedFromList);\r\n          \r\n        }\r\n\r\n      });\r\n\r\n      resolve(\"done\");\r\n    },\r\n\r\n    getBlockedUser: async function()\r\n    {\r\n      var blockedList = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"blockedUsers\") === true)\r\n        {\r\n          blockedList = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return blockedList;\r\n    },\r\n\r\n    getUsersBlockedFrom: async function()\r\n    {\r\n      var blockedFrom = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        if(snapshot.child(\"users\").child(firebase.auth().currentUser.uid).hasChild(\"usersBlockedFrom\") === true)\r\n        {\r\n          blockedFrom = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").val();\r\n        }\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return blockedFrom;\r\n    },\r\n    \r\n    //Description: Method to add and remove topics from a followed user\r\n    addAndRemoveTopicsFromFollowedUser: async function(username, topicsFollow, topicsUnFollow)\r\n    {\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = firebase.auth().currentUser.uid;\r\n        var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n        var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        if(snapshot.child(\"users\").child(currUserUID).child(\"following\").hasChild(username) === false)\r\n        {\r\n          //ERROR: cannot find username - user should be followed before adding/removing topics from that user\r\n        }\r\n        else\r\n        {\r\n           //user has been verified as followed\r\n          var topicsList = [];\r\n          for(var i = 0; i < topicsFollow.length; i++)\r\n          {\r\n            topicsList.push(topicsFollow[i]);\r\n          }\r\n          for(var i = 0; i < topicsUnFollow.length; i++)\r\n          {\r\n            if(topicsList.includes(topicsUnFollow[i]))\r\n            {\r\n              var index = topicsList.indexOf(topicsUnFollow[i]);\r\n              if(index > -1)\r\n              {\r\n                topicsList.splice(index, 1);\r\n              }\r\n            }\r\n          }\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"following\").child(followedUserName).set(topicsList);\r\n        }\r\n      });\r\n      \r\n      resolve(\"done\");\r\n    },\r\n\r\n    getFollowedAndUnfollowedTopics: async function(username)\r\n    {\r\n      var result;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var currUserUID = \"\";\r\n        if(firebase.auth().currentUser != null)\r\n        {\r\n          currUserUID = firebase.auth().currentUser.uid;\r\n          var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n        }\r\n        var followedUserName = username;\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var followedUserUID = mapUsernameToUID[followedUserName];\r\n\r\n        var writtenTopics = snapshot.child(\"users\").child(followedUserUID).child(\"writtenTopics\").val();\r\n        var tList = [];\r\n        if(writtenTopics != null && writtenTopics !== undefined)\r\n        {\r\n          for(var v = 0; v < writtenTopics.length; v++)\r\n          {\r\n            if(writtenTopics[v] !== undefined)\r\n            {\r\n              tList.push(writtenTopics[v].topics);\r\n            }\r\n          }\r\n        }\r\n        console.log(\"WRITTEN TOPICS\", tList);\r\n        var followedTopicsList = [];\r\n        var unfollowedTopics = [];\r\n        if(currUserUID !== \"\")\r\n        {\r\n          var followedTopics = snapshot.child(\"users\").child(currUserUID).child(\"following\").child(followedUserName).val();\r\n          if(followedTopics != null && followedTopics.length !== 0)\r\n          {\r\n            for(var index = 0; index < followedTopics.length; index++)\r\n            {\r\n              if(followedTopics[index] !== \"None\")\r\n              {\r\n                followedTopicsList.push(followedTopics[index]);\r\n              }\r\n            }\r\n          }\r\n          if(tList != null && tList.length !== 0 && followedTopicsList != null && followedTopicsList.length !== 0)\r\n          {\r\n            for(var i = 0; i < tList.length; i++)\r\n            {\r\n              if(followedTopicsList.includes(tList[i]) === false)\r\n              {\r\n                if(tList[i] !== undefined)\r\n                {\r\n                  unfollowedTopics.push(tList[i]);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else\r\n          {\r\n            for(var i = 0; i < tList.length; i++)\r\n            {\r\n              unfollowedTopics.push(tList[i]);\r\n            }\r\n            followedTopicsList = [];\r\n          }\r\n        }\r\n        console.log(\"FOLLOWED TOPICS\", followedTopicsList);\r\n        console.log(\"UNFOLLOWED TOPICS\", unfollowedTopics);\r\n\r\n        result = {followedTopicsList, unfollowedTopics};\r\n      });\r\n\r\n      resolve(\"done\");\r\n      return result;\r\n    },\r\n    //Description: save current Users bio on database.\r\n    //@Params\r\n    //content: string which contians users bio.\r\n    postCurrentUserBio: async function(content) {\r\n        //save current users bio on firebase\r\n        await firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"bio\").set(content);\r\n        resolve(\"done\");\r\n    },\r\n\r\n    //Delete users data and authentication\r\n    //@Params\r\n    //content: string which contains username\r\n    deleteUserData: async function(username) {\r\n      firebase.database().ref().child(\"mapUIDtoUsername\").child(firebase.auth().currentUser.uid).remove();\r\n      firebase.database().ref().child(\"mapUsernameToEmail\").child(username).remove();\r\n      firebase.database().ref().child(\"mapUsernameToUID\").child(username).remove();\r\n\r\n      var profilePic;\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var followingUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child('followers').val();\r\n        var followedUsers =  snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child('following').val();\r\n        profilePic =  snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child('picture').val();\r\n        //remove users name from the following list of the users who follow them\r\n        for (var key in followingUsers) {\r\n          console.log(followingUsers[key])\r\n          var followerUid = snapshot.child(\"mapUsernameToUID\").child(followingUsers[key]).val();\r\n          console.log(followerUid);\r\n          firebase.database().ref().child('users').child(followerUid).child('following').child(username).remove();\r\n        }\r\n\r\n        //remove users name from the followers list of the users who they follow\r\n        for (var key in followedUsers) {\r\n          var followingUserUid = snapshot.child(\"mapUsernameToUID\").child(key).val();\r\n          console.log(followingUserUid);\r\n          var followerlist = snapshot.child('users').child(followingUserUid).child('followers').val();\r\n          console.log(followerlist);\r\n          for (var index in followerlist) {\r\n            if(followerlist[index] === username) {\r\n              console.log(index);\r\n              firebase.database().ref().child('users').child(followingUserUid).child('followers').child(index).remove();\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      if(profilePic.localeCompare(\"default.jpg\") != 0) {\r\n        firebase.storage().ref().child(profilePic).delete();\r\n      }\r\n      firebase.auth().currentUser.delete();\r\n      firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).remove();\r\n    },\r\n    \r\n    /*\r\n    //gets a list of all the microblogs that the current user has posted and the posts he/she follows\r\n    getMicroblogsForCurrentUserAsync: async function() {\r\n    let result;\r\n    await firebase.database().ref().once('value', (snapshot) => {\r\n      var mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n      var usernameOfUser = mapUIDtoUsername[firebase.auth().currentUser.uid];\r\n      var Microblogs = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"Microblogs\").val();\r\n\r\n      result = {usernameOfUser, Microblogs};\r\n    });\r\n\r\n    return result;\r\n    }*/\r\n\r\n    //use this function to get all related microblogs for a user's timeline (including following)\r\n    getMicroblogsForUserTimeline: async function(username)\r\n    {\r\n      var Microblogs = [];\r\n      await firebase.database().ref().once('value', (snapshot) => {\r\n        var mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n        var uidOfUser = mapUsernameToUID[username];\r\n        snapshot.child(\"users\").child(uidOfUser).child(\"following\").forEach(function(childSnapshot)\r\n        {\r\n          var followedUsername = childSnapshot.key;\r\n          var followedTopics = childSnapshot.val();\r\n          var uidOfFollowedUser = mapUsernameToUID[followedUsername];\r\n          var microblogs = snapshot.child(\"users\").child(uidOfFollowedUser).child(\"Microblogs\").val();\r\n\r\n          var followingTimestamp = snapshot.child(\"users\").child(uidOfUser).child(\"followingTimestamp\").val();\r\n          var followingTimestampOfFollowedUser = followingTimestamp[followedUsername];\r\n          var writtenTopics = snapshot.child(\"users\").child(uidOfFollowedUser).child(\"writtenTopics\").val();\r\n          \r\n          if(microblogs != undefined || microblogs != null)\r\n          {\r\n            for(var i = 0; i < microblogs.length; i++)\r\n            {\r\n\r\n              //first check if any new topics were added and include the first microblog with that new topic highlighted\r\n              var currMicroblog = microblogs[i];\r\n              var topicsList = currMicroblog.topics;\r\n\r\n              if (topicsList != undefined || topicsList != null) {\r\n\r\n                var foundNewTopic = false;\r\n                for (var t = 0; t < topicsList.length; t++) {\r\n                  \r\n                  for (var w = 0; w < writtenTopics.length; w++) {\r\n                    if (writtenTopics[w].topics == topicsList[t]) {\r\n                      if (writtenTopics[w].timestamp == microblogs[i].timestamp) {\r\n                        if (followingTimestampOfFollowedUser < writtenTopics[w].timestamp) {\r\n                          //console.log(\"true\", microblogs[i].timestamp);\r\n                          microblogs[i].topics[t] = \"/h\" + microblogs[i].topics[t];\r\n                          foundNewTopic = true;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n\r\n                }\r\n\r\n                if (foundNewTopic) {\r\n                  Microblogs.push(currMicroblog);\r\n                  continue;\r\n                }\r\n\r\n\r\n                for(var j = 0; j < topicsList.length; j++)\r\n                {\r\n                  if(followedTopics.includes(topicsList[j]))\r\n                  {\r\n                    Microblogs.push(currMicroblog);\r\n                    break;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      resolve(\"done\");\r\n      //Sort Microblogs based on timestamp\r\n      Microblogs.sort(function(m1, m2)\r\n      {\r\n        return m1.timestamp > m2.timestamp ? -1 : 1;\r\n      });\r\n      return Microblogs;\r\n    },\r\n\r\n    getMicroblogsForCurrentUser: async function(username) {\r\n        var Microblogs;\r\n        firebase.database().ref().once('value', (snapshot) => {\r\n          let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          //let mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          let uidOfUser = mapUsernameToUID[username];\r\n          Microblogs = snapshot.child(\"users\").child(uidOfUser).child(\"Microblogs\").val();\r\n          if(Microblogs != null)\r\n          {\r\n              \r\n            \r\n          }\r\n        });\r\n        if(Microblogs != null && Microblogs.length !== 0)\r\n        {\r\n          Microblogs.sort(function(m1, m2)\r\n          {\r\n            return m1.timestamp > m2.timestamp ? -1 : 1;\r\n          });\r\n        }\r\n        return Microblogs;\r\n      },\r\n\r\n      getMicroblogsForUser: async function(username) {\r\n        var Microblogs;\r\n        const t = await firebase.database().ref().once('value', (snapshot) => {\r\n          let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n          //let mapUIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n          let uidOfUser = mapUsernameToUID[username];\r\n          Microblogs = snapshot.child(\"users\").child(uidOfUser).child(\"Microblogs\").val();\r\n          if(Microblogs != null)\r\n          {\r\n              \r\n            \r\n          }\r\n        });\r\n        resolve(\"done\");\r\n        if(Microblogs != null && Microblogs.length !== 0)\r\n        {\r\n          Microblogs.sort(function(m1, m2)\r\n          {\r\n            return m1.timestamp > m2.timestamp ? -1 : 1;\r\n          });\r\n        }\r\n        return Microblogs;\r\n      },\r\n\r\n      getUserdataOfLoggedInUser: async function() {\r\n        var userData;\r\n\r\n        var loggedIn = true;\r\n\r\n        \r\n\r\n        firebase.auth().onAuthStateChanged(async function(user) {          \r\n          if (user) {\r\n\r\n            userData = await helperfunctions.getUserdataOfUser(user.uid, loggedIn);\r\n            resolve(\"done\");\r\n            return userData;\r\n          } else {\r\n            console.log(\"null\");\r\n            // No user is signed in.\r\n          }\r\n        });\r\n\r\n        \r\n        /* while(userData == undefined){\r\n          console.log(\"undefined\")\r\n        } */\r\n        \r\n      },\r\n\r\n      getUserdataOfUser : async function(uid, loggedIn) {\r\n        var userData;\r\n\r\n        \r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          var UIDtoUsername = snapshot.child('mapUIDtoUsername').val();\r\n          var username = UIDtoUsername[uid];\r\n          userData = new UserData(username, loggedIn, true);\r\n          //this.email = user.email;\r\n        });\r\n\r\n        resolve(\"done\");\r\n        return userData;\r\n      },\r\n\r\n      getUserdataOfUserDiff : async function(username, loggedIn) {\r\n        var userData;\r\n\r\n        \r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n          userData = new UserData(username, loggedIn, true);\r\n          //this.email = user.email;\r\n        });\r\n\r\n        resolve(\"done\");\r\n        return userData;\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default helperfunctions;\r\n","import React, { Component } from \"react\";\r\nimport { MicroblogWriterView } from \"./MicroblogWriterView\";\r\nimport helperfunctions from \"../helperfunctions\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport firebase from \"firebase\";\r\n\r\nclass MicroblogWriter extends React.Component {\r\n  constructor(props) {\r\n    //TODO: THIS\r\n    super(props);\r\n\r\n    this.microblogData = new Object();\r\n\r\n    this.isQuoted = props.isQuoted;\r\n    if(this.isQuoted){\r\n      this.quotedMicroblog = props.quotedMicroblog;\r\n      this.numOfMicroblog = props.numOfMicroblog;\r\n    }\r\n\r\n   \r\n    this.microblogPosted = props.microblogPosted;\r\n\r\n    this.microblogData.name = props.username;\r\n    this.microblogData.handle = props.username;\r\n    this.microblogData.image = \"props.image\";\r\n\r\n    this.submitMicroblog = this.submitMicroblog.bind(this);\r\n    this.addTopic = this.addTopic.bind(this);\r\n    this.fetchImage = this.fetchImage.bind(this);\r\n\r\n    this.topics = [];\r\n    this.numTopics = 0;\r\n\r\n    if(this.isQuoted){\r\n      this.addTopicsId = \"addTopicsQuoted\" + this.numOfMicroblog\r\n      this.showTopicsId = \"showTopicsQuoted\" + this.numOfMicroblog\r\n      this.contentId = \"contentQuoted\" + this.numOfMicroblog\r\n    }\r\n    else{\r\n      this.addTopicsId = \"addTopics\"\r\n      this.showTopicsId = \"showTopics\"\r\n      this.contentId = \"content\"\r\n    }\r\n  }\r\n\r\n  addTopic(event) {\r\n    if (\r\n      document.getElementById(this.addTopicsId).value != \"\" &&\r\n      document.getElementById(this.addTopicsId).value != \",\"\r\n    ) {\r\n      this.topics.push(document.getElementById(this.addTopicsId).value);\r\n      if (document.getElementById(this.showTopicsId).value == \"\") {\r\n        document.getElementById(this.showTopicsId).value = document.getElementById(\r\n          this.addTopicsId\r\n        ).value;\r\n      } else {\r\n        document.getElementById(this.showTopicsId).value =\r\n          document.getElementById(this.showTopicsId).value +\r\n          \", \" +\r\n          document.getElementById(this.addTopicsId).value;\r\n      }\r\n      document.getElementById(this.addTopicsId).value = \"\";\r\n    }\r\n  }\r\n\r\n  async submitMicroblog(event) {\r\n    var content = document.getElementById(this.contentId).value;\r\n    console.log(content);\r\n    if (content.length > 250 || content.length <= 0) {\r\n      //toast(\"Cannot post microblog\");\r\n        toast(\r\n          \"Cannot post microblog. Make sure the content is 250 characters or less\"\r\n        );\r\n\r\n    }  \r\n    else \r\n    {\r\n\r\n      if(this.isQuoted){\r\n        await helperfunctions.addQuotedMicroblogToCurrentUser(this.quotedMicroblog, content, this.topics);\r\n      }\r\n\r\n      else {\r\n        await helperfunctions.addMicroBlogToCurrentUser(content, this.topics);\r\n        this.microblogPosted();\r\n      }\r\n    \r\n      this.topics = [];\r\n    }\r\n\r\n    document.getElementById(this.contentId).value = \"\";\r\n    document.getElementById(this.showTopicsId).value = \"\";\r\n    document.getElementById(this.contentId).value = \"\";\r\n  }\r\n\r\n\r\n  async fetchImage() {\r\n    var picname;\r\n    var picname2;\r\n    var strangeruid;\r\n    console.log(\"fetchImage running\");\r\n\r\n    await firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        /*var userList = snapshot.child(\"users\").val();\r\n            let user = userList[firebase.auth().currentUser.id];*/\r\n        console.log(this.microblogData.name);\r\n        picname2 = snapshot\r\n          .child(\"users\")\r\n          .child(firebase.auth().currentUser.uid)\r\n          .child(\"picture\")\r\n          .val();\r\n        //picname = user[\"picture\"].val();\r\n        console.log(\"was here hello world\");\r\n      });\r\n\r\n \r\n    console.log(picname2);\r\n    //console.log(this.blogid);\r\n    var toMatch = this.blogid;\r\n\r\n    if (true) {\r\n \r\n\r\n      await firebase\r\n        .storage()\r\n        .ref()\r\n        .child(picname2)\r\n        .getDownloadURL()\r\n        .then(function(url) {\r\n          var toReturn = url;\r\n          document.querySelectorAll(\"img\").forEach(function(item) {\r\n            if (item.id == \"img3\") {\r\n              item.src = toReturn;\r\n            }\r\n          });\r\n          //return toReturn;\r\n        })\r\n        .catch(function(error) {\r\n          switch (error.code) {\r\n            case \"storage/object-not-found\":\r\n              console.log(\"object not found\");\r\n              break;\r\n            case \"storage/unauthorized\":\r\n              console.log(\"unauthorized\");\r\n              break;\r\n            case \"storage/unknown\":\r\n              console.log(\"unknown\");\r\n              break;\r\n          }\r\n        });\r\n    } else {\r\n      return firebase.storage().ref(picname);\r\n    }\r\n\r\n    console.log(\"ends now\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchImage();\r\n  }\r\n\r\n\r\n  render() {\r\n    let name = `${this.microblogData.name}`;\r\n    let handle = `@${this.microblogData.name}`;\r\n    let image = this.microblogData.image;\r\n\r\n    return (\r\n      <MicroblogWriterView\r\n        name={name}\r\n        handle={handle}\r\n        image={image}\r\n        submitMicroblog={this.submitMicroblog}\r\n        addTopic={this.addTopic}\r\n\r\n        addTopicsId={this.addTopicsId}\r\n        showTopicsId={this.showTopicsId}\r\n        contentId={this.contentId}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default MicroblogWriter;\r\n","import React from 'react';\r\nimport './AutoCompleteSearchBar.css';\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass AutoCompleteSearchBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            suggestions: [],\r\n            text: '',\r\n            onFocus: false,\r\n            clickoption: false,\r\n        }\r\n        this.searchForUser = this.searchForUser.bind(this);\r\n        this.checkIfFocused = this.checkIfFocused.bind(this);\r\n        this.changeFocus = this.changeFocus.bind(this);\r\n        this.keyPress = this.keyPress.bind(this);\r\n    }\r\n\r\n    onTextChanged = (e) => {\r\n        const { items } = this.props;\r\n        const value = e.target.value;\r\n        let suggestions = [];\r\n        if (value.length > 0) {\r\n            const regex  = new RegExp(`^${value}`, 'i');\r\n            suggestions = items.sort().filter(v => regex.test(v));\r\n        }\r\n        this.setState(() => ({ suggestions, text: value }));\r\n    }\r\n\r\n    suggestionSelected (value) {    \r\n        this.setState(() => ({\r\n            text: value,\r\n            suggestions: [],\r\n            onFocus: false,\r\n            clickoption: true,\r\n        }))\r\n    }\r\n\r\n    renderSuggestions () {\r\n        const {suggestions} = this.state;\r\n        if (suggestions.length === 0) {\r\n            return null;\r\n        }\r\n        return (\r\n            <ul>\r\n                {suggestions.map((item) => <li key={item} onMouseDown ={() => this.suggestionSelected(item)}>{item}</li>)}\r\n            </ul>\r\n        )\r\n    }\r\n    \r\n    searchForUser() {\r\n        const {text} = this.state;\r\n        const {items} = this.props;\r\n        const {username} = this.props;\r\n        var userexists = false;\r\n        var index;\r\n        for (index in items) {\r\n            if(items[index] == text) {\r\n                userexists = true;\r\n                break;\r\n            }\r\n        }\r\n        if (userexists) {\r\n            this.props.history.push({\r\n                pathname: \"/redirecttoaccount\",\r\n                state: { userData: this.userData, text: text} ,\r\n            });\r\n        }\r\n        else {\r\n            if (text != username) {\r\n                toast(\"Username not found!\");\r\n            }\r\n            else {\r\n                toast(\"You can visit your profile page by clicking the profile button\");\r\n            }\r\n        }\r\n    }\r\n\r\n    checkIfFocused() {\r\n        console.log(\"checking focus\");\r\n        this.setState(() => ({\r\n            onFocus: false,\r\n        }))\r\n        var onFocus = false;\r\n        const {clickoption} = this.state;\r\n        if(onFocus == false && clickoption == false) {\r\n            this.setState(() => ({ suggestions: []}));\r\n        }\r\n        this.setState(() => ({\r\n            onFocus: false,\r\n            clickoption: false,\r\n        }))\r\n    }\r\n\r\n    changeFocus() {\r\n        this.setState(() => ({\r\n            onFocus: true,\r\n        }))\r\n    }\r\n\r\n    keyPress(e) {\r\n        if(e.keyCode == 13){\r\n            this.searchForUser();\r\n        }\r\n    }\r\n\r\n    render ()  {\r\n        const {text} = this.state;\r\n        return (\r\n            <div>\r\n                <div className=\"AutoCompleteSearchBar\" onBlur={this.checkIfFocused}>\r\n                    <input value={text} onClick={this.changeFocus} onKeyDown={this.keyPress} onChange={this.onTextChanged} type=\"text\"/><button onClick={this.searchForUser}>Search</button>\r\n                        {this.renderSuggestions()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(AutoCompleteSearchBar);","import React from \"react\";\r\nimport \"./TopBar.css\";\r\nimport logo from \"../logo192.png\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport { green, blue, purple } from \"@material-ui/core/colors\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport AutoCompleteSearchBar from \"../AutoCompleteSearchBar/AutoCompleteSearchBar\"\r\n\r\nconst ColorButton = withStyles(theme => ({\r\n  root: {\r\n    color: theme.palette.getContrastText(blue[500]),\r\n    backgroundColor: \"#1F3648\"\r\n    // \"&:hover\": {\r\n    //   backgroundColor: blue[700]\r\n    // }\r\n  }\r\n}))(IconButton);\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: green,\r\n    secondary: {\r\n      main: \"#1F3648\"\r\n    }\r\n  }\r\n});\r\n\r\nconst TopBarTwisster = ({\r\n  getAllUsernames,\r\n  getCurrentUsername,\r\n  goLogout,\r\n  goToProfile,\r\n  goToChat,\r\n  goToLanding\r\n}) => {\r\n  return (\r\n    <div className=\"inner-body\">\r\n      <label className=\"top-bar-twisster\">Twistter</label>\r\n      {/* <button className=\"top-bar-logout\" id=\"logout\" onClick={goLogout}>\r\n        Logout\r\n      </button> */}\r\n      <div>\r\n        <AutoCompleteSearchBar items={getAllUsernames} username={getCurrentUsername}/>\r\n      </div>\r\n      <div className=\"top-bar-chat\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"chat\"\r\n          id=\"chat\"\r\n          onClick={goToChat}\r\n          className=\"top-bar-chat-btn\"\r\n        >\r\n          <ChatIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      <div className=\"top-bar-profile\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"profile\"\r\n          id=\"profile\"\r\n          onClick={goToProfile}\r\n        >\r\n          <AccountCircleIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      <div className=\"top_bar_home\">\r\n        <ColorButton\r\n          size=\"medium\"\r\n          aria-label=\"home\"\r\n          id=\"Home\"\r\n          onClick={goToLanding}\r\n        >\r\n          <HomeIcon fontSize=\"large\" />\r\n        </ColorButton>\r\n      </div>\r\n      {/* <button className=\"top_bar_home\" id=\"Home\" onClick={goToLanding}>\r\n        Home\r\n      </button> */}\r\n    </div>\r\n  );\r\n};\r\nexport default TopBarTwisster;\r\n","import TopBarTwisster from \"./TopBarView\";\r\nimport React, { PureComponent } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport firebase from \"firebase\";\r\nimport { throwStatement } from \"@babel/types\";\r\nclass TopBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.userData = props.userData;\r\n    this.goLogout = this.goLogout.bind(this);\r\n    this.goToProfile = this.goToProfile.bind(this);\r\n    this.goToChat = this.goToChat.bind(this);\r\n    this.goToLanding = this.goToLanding.bind(this);\r\n    this.getAllUsernames = this.getAllUsernames.bind(this);\r\n  }\r\n\r\n  goLogout = async event => {\r\n    firebase\r\n      .auth()\r\n      .signOut()\r\n      .then(function() {\r\n        console.log(\"Signout succesful\");\r\n      })\r\n      .catch(function(error) {\r\n        console.log(\"Error\");\r\n      });\r\n\r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  };\r\n\r\n  goToProfile() {\r\n    this.props.history.push({\r\n      pathname: \"/redirecttoaccount\",\r\n      state: { userData: this.userData} ,\r\n    });\r\n  }\r\n\r\n  goToChat() {\r\n    this.props.history.push({\r\n      pathname: \"/chat\",\r\n      state: { topBar: true }\r\n    });\r\n  }\r\n\r\n  goToLanding() {\r\n    this.props.history.push({\r\n      pathname: \"/landing\",\r\n      state: { userData: this.userData}\r\n    });\r\n  }\r\n\r\n  getAllUsernames(){\r\n    var user_list = [];\r\n    const promise = firebase.database().ref().once('value', (snapshot)=> {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n            if (all_users[key] != firebase.auth().currentUser.email) {\r\n                user_list.push(key);\r\n            }\r\n        }\r\n    });\r\n    return user_list;\r\n  }\r\n\r\n  getCurrentUsername(){\r\n    var username;\r\n    const promise = firebase.database().ref().once('value', (snapshot)=> {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n            if (all_users[key] == firebase.auth().currentUser.email) {\r\n                username = key;\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    return username;\r\n  }\r\n\r\n  render() {\r\n    if(firebase.auth().currentUser !== null)\r\n    {\r\n      return (\r\n        <div className=\"top-bar\">\r\n          <TopBarTwisster\r\n            getAllUsernames={this.getAllUsernames()}\r\n            getCurrentUsername={this.getCurrentUsername()}\r\n            goLogout={this.goLogout}\r\n            goToProfile={this.goToProfile}\r\n            goToChat={this.goToChat}\r\n            goToLanding={this.goToLanding}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    else\r\n    {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default withRouter(TopBar);\r\n","import React from \"react\";\r\nimport './Landing.css'\r\n\r\nconst TopicView = (props) => {\r\n    return(\r\n      \r\n          <div className=\"topic\">\r\n            {props.text}\r\n          </div>\r\n        \r\n    )\r\n}\r\nexport default TopicView \r\n","import React from \"react\";\r\nimport './Landing.css'\r\n\r\nconst TopicHighlightedView = (props) => {\r\n    return(\r\n      \r\n          <div className=\"topic-highlighted\">\r\n            {props.text}\r\n          </div>\r\n        \r\n    )\r\n}\r\nexport default TopicHighlightedView \r\n","import React, { Component } from 'react';\r\n\r\nimport  TopicView  from './TopicView.js';\r\nimport  TopicHighlightedView  from './TopicHighlightedView.js';\r\n\r\n\r\nclass Topic extends React.Component{\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.topic = new Object();\r\n\r\n\r\n      this.topic.text = props.data;\r\n      this.topic.highlight = props.highlight;\r\n    }\r\n\r\n    render(){\r\n        let text = `${this.topic.text}`\r\n        if(this.topic.highlight){\r\n            return(\r\n                <TopicHighlightedView \r\n                    text={text}\r\n                />\r\n            );\r\n        }\r\n        else{\r\n            return(\r\n                <TopicView \r\n                    text={text}\r\n                />\r\n            );\r\n        }\r\n    }\r\n}\r\nexport default Topic;\r\n","import React, { Component } from 'react';\r\nimport '../css/Landing.css'\r\nclass TopicsBox extends React.Component{\r\n\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n\r\n    render(){        \r\n        return(\r\n            <div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default TopicsBox;","import React, { PureComponent } from 'react'\r\nimport Topic from \"../Topic\"\r\nimport TopicsBox from \"./TopicsBox.js\"\r\n\r\nimport './Topics.css';\r\nclass Topics extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.topics = props.topics;\r\n\r\n        this.num = 0;\r\n        //this.username = props.username;\r\n    }\r\n\r\n    createTopics = (topicsArray) => {\r\n        var topics = [];\r\n        for (var i = 0; i < topicsArray.length; i++) {\r\n            // note: we add a key prop here to allow react to uniquely identify each\r\n            // element in this array. see: https://reactjs.org/docs/lists-and-keys.html\r\n            this.num++;\r\n            var highlightbool = false;\r\n            if (topicsArray[i].length > 2) {\r\n              if (topicsArray[i].substr(0, 2) == \"/h\") {\r\n                topicsArray[i] = topicsArray[i].substr(2, topicsArray[i].length - 2);\r\n                highlightbool = true;\r\n              }\r\n            }\r\n            topics.push(<Topic key={i} data={topicsArray[i]} highlight={highlightbool} />);\r\n        }\r\n        return <div>{topics}</div>;\r\n    }\r\n\r\n    render() {\r\n      if(this.props.topics != null){\r\n        return(\r\n          <div>\r\n              <TopicsBox>\r\n                {/* <table id=\"topics\"> */}\r\n                  {/* <tr>\r\n                    <th>Topics</th>\r\n                  </tr> */}\r\n                  {this.createTopics(this.props.topics)}\r\n                {/* </table> */}\r\n              </TopicsBox>    \r\n          </div>\r\n        )\r\n      }\r\n      else{\r\n        return null;\r\n      }\r\n    }\r\n}\r\nexport default Topics;","import React from \"react\";\r\nimport MicroblogBox from \"../MicroblogBox\";\r\nimport \"./Landing.css\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\n\r\nimport Topics from \"../Topics\"\r\nimport {\r\n  createMuiTheme,\r\n  withStyles,\r\n  makeStyles,\r\n  ThemeProvider\r\n} from \"@material-ui/core/styles\";\r\nimport { func } from \"prop-types\";\r\n\r\nconst StyledBadge1 = withStyles(theme => ({\r\n  badge: {\r\n    right: -3,\r\n    border: `0px solid ${theme.palette.background.paper}`,\r\n    padding: \"0 4px\"\r\n  }\r\n}))(Badge);\r\n\r\nconst Image = ({ image, theid }) => {\r\n  console.log(theid);\r\n\r\n  return <img id={theid} alt=\"Logo\" className=\"picture\"></img>;\r\n};\r\n\r\nconst Handle = props => {\r\n  return <div className=\"handle\">{props.handle}</div>;\r\n};\r\n\r\nconst Name = props => {\r\n  return <div className=\"name\">{props.name}</div>;\r\n};\r\n\r\nconst Tweet = props => {\r\n  return <div className=\"tweet\">{props.tweet}</div>;\r\n};\r\n\r\n/* const Topics = props => {\r\n  return <div className=\"topics\">{props.topics}</div>;\r\n}; */\r\nconst ListedTopics = withStyles(theme => ({\r\n  root: {\r\n    // color: theme.palette.getContrastText(blue[500]),\r\n    margin: \"0px 12px 20px\"\r\n  },\r\n  input: {\r\n    color: \"white\"\r\n  }\r\n}))(Input);\r\n\r\nfunction GetIcon(isLiked) {\r\n  if (isLiked) {\r\n    return <FavoriteIcon color=\"secondary\" fontSize=\"large\" />;\r\n  } else {\r\n    return <FavoriteBorderIcon color=\"secondary\" fontSize=\"large\" />;\r\n  }\r\n}\r\n\r\nconst MicroblogView = props => {\r\n  return (\r\n    <MicroblogBox>\r\n      <div className=\"inner-body\" style={{ height: \"100%\" }}>\r\n        <Image image={props.image} theid={props.unitid} />\r\n        <div className=\"body\" style={{ width: \"80%\" }}>\r\n          <div className=\"inner-body\" style={{ height: \"60px\" }}>\r\n            <Name name={props.name} />\r\n            <Handle handle={props.handle} />\r\n          </div>\r\n          <div className=\"body\">\r\n            <Tweet tweet={props.tweet} />\r\n            <div className=\"inner-body\">\r\n              <Topics topics={props.topics} />\r\n              <br></br>\r\n              <IconButton aria-label=\"cart\" onClick={props.likeButtonClicked}>\r\n                <StyledBadge1 badgeContent={props.numLikes} color=\"primary\">\r\n                  {GetIcon(props.isLiked)}\r\n                </StyledBadge1>\r\n              </IconButton>\r\n\r\n              \r\n              {/* <div class=\"likes\">\r\n                <button class=\"like-button\" onClick={props.likeButtonClicked}>\r\n                  {props.likeButtonText}\r\n                </button>\r\n                <label class=\"num-likes\">{}</label>\r\n              </div> */}\r\n            </div>\r\n              <div className=\"quote\">\r\n                <button class=\"quote-button\" onClick={props.quoteButtonClicked}>{props.quoteButtonText}</button>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MicroblogBox>\r\n  );\r\n};\r\n\r\nexport { MicroblogView };\r\n","import React, { Component } from 'react';\r\nimport '../MicroblogBox/MicroblogBox.css'\r\nclass QuotingMicroblogBox extends React.Component{\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      \r\n    }\r\n\r\n    render(){        \r\n        return(\r\n            <div className=\"quoting-tweet-body\">\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default QuotingMicroblogBox;","import React, { Component } from \"react\";\r\nimport { MicroblogView } from \"./MicroblogView.js\";\r\nimport Topics from \"../Topics\";\r\nimport MicroblogBox from \"../MicroblogBox/index.js\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\nimport { nullLiteral, isReferenced } from \"@babel/types\";\r\n\r\nimport QuotingMicroblogBox from \"../QuotingMicroblogBox\"\r\nimport { toast } from 'react-toastify';\r\nimport MicroblogWriter from \"../MicroblogWriter\"\r\n\r\nclass Microblog extends React.Component {\r\n  // static counter;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.microblogData = new Object();\r\n    if (Microblog.counter == undefined) {\r\n      Microblog.counter = 0;\r\n    }\r\n\r\n\r\n    this.counter = Microblog.counter;\r\n    this.blogid = \"blogid\" + this.counter;\r\n    Microblog.counter++;\r\n\r\n    this.userLikes = props.userLikes;\r\n\r\n    this.microblogData.name = props.username;\r\n    this.microblogData.handle = props.username;\r\n    this.microblogData.tweet = props.data.content;\r\n    this.microblogData.image = \"props.image\";\r\n    this.microblogData.id = props.id;\r\n\r\n    this.fetchImage = this.fetchImage.bind(this);\r\n\r\n    this.likeButtonClicked = this.likeButtonClicked.bind(this);\r\n    this.microblogData.topics = props.data.topics;\r\n\r\n    this.microblogData.numLikes = props.numLikes;\r\n\r\n    this.state = {\r\n      like: props.liked,\r\n      quote: false\r\n    }\r\n\r\n    this.numOfMicroblog = props.numOfMicroblog;\r\n    this.quoteButtonClicked = this.quoteButtonClicked.bind(this);\r\n  }\r\n\r\n  async likeButtonClicked() {\r\n\r\n    if(firebase.auth().currentUser == null)\r\n    {\r\n      toast(\"Cannot like post\");\r\n      return;\r\n    }\r\n    var username = await helperfunctions.retrieveUsername(\r\n      firebase.auth().currentUser.uid\r\n    );\r\n\r\n    if (this.state.like) {\r\n      this.microblogData.numLikes--;\r\n      await helperfunctions.unlikeMicroblog(this.microblogData, username);\r\n      this.setState({ like: false });\r\n\r\n    } else {\r\n      this.microblogData.numLikes++;\r\n      await helperfunctions.likeMicroblog(this.microblogData, username);\r\n      this.setState({ like: true });\r\n    }\r\n  }\r\n\r\n  async fetchImage() {\r\n    var picname;\r\n    var picname2;\r\n    var strangeruid;\r\n    console.log(\"fetchImage running\");\r\n\r\n    await firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        /*var userList = snapshot.child(\"users\").val();\r\n            let user = userList[firebase.auth().currentUser.id];*/\r\n        console.log(this.microblogData.name);\r\n        strangeruid = snapshot\r\n          .child(\"mapUsernameToUID\")\r\n          .child(this.microblogData.name)\r\n          .val();\r\n        picname = snapshot\r\n          .child(\"users\")\r\n          .child(strangeruid)\r\n          .child(\"picture\")\r\n          .val();\r\n          if(firebase.auth().currentUser != null)\r\n          {\r\n            picname2 = snapshot\r\n            .child(\"users\")\r\n            .child(firebase.auth().currentUser.uid)\r\n            .child(\"picture\")\r\n            .val();\r\n          }\r\n        //picname = user[\"picture\"].val();\r\n        console.log(\"was here hello world\");\r\n      });\r\n\r\n    console.log(picname);\r\n    console.log(picname2);\r\n    //console.log(this.blogid);\r\n    var toMatch = this.blogid;\r\n\r\n    if (true) {\r\n      await firebase\r\n        .storage()\r\n        .ref()\r\n        .child(picname)\r\n        .getDownloadURL()\r\n        .then(function(url) {\r\n          var toReturn = url;\r\n          console.log(toMatch);\r\n\r\n          document.querySelectorAll(\"img\").forEach(function(item) {\r\n            // console.log(this.blogid);\r\n            if (item.id == toMatch) {\r\n              item.src = toReturn;\r\n            }\r\n          });\r\n          //return toReturn;\r\n        })\r\n        .catch(function(error) {\r\n          switch (error.code) {\r\n            case \"storage/object-not-found\":\r\n              console.log(\"object not found\");\r\n              break;\r\n            case \"storage/unauthorized\":\r\n              console.log(\"unauthorized\");\r\n              break;\r\n            case \"storage/unknown\":\r\n              console.log(\"unknown\");\r\n              break;\r\n          }\r\n        });\r\n\r\n      await firebase\r\n        .storage()\r\n        .ref()\r\n        .child(picname2)\r\n        .getDownloadURL()\r\n        .then(function(url) {\r\n          var toReturn = url;\r\n          document.querySelectorAll(\"img\").forEach(function(item) {\r\n            if (item.id == \"img3\") {\r\n              item.src = toReturn;\r\n            }\r\n          });\r\n          //return toReturn;\r\n        })\r\n        .catch(function(error) {\r\n          switch (error.code) {\r\n            case \"storage/object-not-found\":\r\n              console.log(\"object not found\");\r\n              break;\r\n            case \"storage/unauthorized\":\r\n              console.log(\"unauthorized\");\r\n              break;\r\n            case \"storage/unknown\":\r\n              console.log(\"unknown\");\r\n              break;\r\n          }\r\n        });\r\n    } else {\r\n      return firebase.storage().ref(picname);\r\n    }\r\n\r\n    console.log(\"ends now\");\r\n  }\r\n\r\n  async quoteButtonClicked(){\r\n    \r\n\r\n    if(firebase.auth().currentUser == null)\r\n    {\r\n      toast(\"Cannot Quote\");\r\n      return;\r\n    }\r\n\r\n    toast(\"Quote\");\r\n\r\n    this.loggedInUser = await helperfunctions.retrieveUsername(firebase.auth().currentUser.uid);\r\n\r\n    \r\n\r\n    if(this.state.quote){\r\n        this.setState({quote : false});\r\n    }\r\n    else{\r\n        this.setState({quote : true});\r\n    }\r\n    \r\n}\r\n\r\n  componentDidMount() {\r\n    this.fetchImage();\r\n  }\r\n\r\n  render() {\r\n    var likeText = \"Placeholder\";\r\n\r\n    if (this.state.like) {\r\n      likeText = \"Unlike\";\r\n    } else {\r\n      likeText = \"Like\";\r\n    }\r\n\r\n\r\n    let isLiked = this.state.like;\r\n    let quoteButtonText = \"Quote\"\r\n\r\n    let likeButtonText = likeText;\r\n    let name = `${this.microblogData.name}`;\r\n    let handle = `@${this.microblogData.name}`;\r\n    //let image = this.microblogData.image\r\n    let tweet = this.microblogData.tweet;\r\n    let topics = this.microblogData.topics;\r\n    let numLikes = this.microblogData.numLikes;\r\n\r\n    let likeButtonClicked = this.likeButtonClicked;\r\n    let quoteButtonClicked = this.quoteButtonClicked;\r\n\r\n    if(!this.state.quote){\r\n      return (\r\n        <MicroblogView\r\n          key={this.microblogData.key}\r\n          name={name}\r\n          handle={handle}\r\n          image={nullLiteral}\r\n          unitid={this.blogid}\r\n          tweet={tweet}\r\n  \r\n          likeButtonClicked={likeButtonClicked}\r\n          isLiked={isLiked}\r\n          numLikes={numLikes}\r\n  \r\n          quoteButtonText={quoteButtonText}\r\n          quoteButtonClicked={quoteButtonClicked}\r\n  \r\n          topics={topics}\r\n          \r\n        />\r\n      );\r\n    }\r\n\r\n    else{\r\n      return(\r\n          <div>\r\n              <QuotingMicroblogBox>\r\n                  <MicroblogView \r\n                      key={this.microblogData.key}\r\n                      name={name}\r\n                      handle={handle}\r\n                      image={nullLiteral}\r\n                      unitid={this.blogid}\r\n                      tweet={tweet}\r\n              \r\n                      likeButtonClicked={likeButtonClicked}\r\n                      isLiked={isLiked}                      \r\n                      numLikes={numLikes}\r\n              \r\n                      quoteButtonText={quoteButtonText}\r\n                      quoteButtonClicked={quoteButtonClicked}\r\n              \r\n                      topics={topics}\r\n\r\n                  /> \r\n\r\n                  \r\n\r\n                  <MicroblogWriter \r\n                      username={this.loggedInUser} \r\n                      microblogPosted={this.microblogPosted}\r\n                      isQuoted={true}\r\n                      quotedMicroblog={this.microblogData}\r\n                      numOfMicroblog={this.numOfMicroblog}\r\n\r\n                      image={nullLiteral}\r\n                  />\r\n                  \r\n              </QuotingMicroblogBox>\r\n          </div>\r\n      );\r\n  }\r\n\r\n    \r\n  }\r\n}\r\nexport default Microblog;\r\n","import React, { Component } from 'react';\r\nimport Topics from '../Topics'\r\nimport MicroblogBox from '../MicroblogBox';\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\n\r\nimport \"./QuotedMicroblog.css\"\r\n\r\nimport Microblog from \"../Microblog\"\r\n\r\nclass QuotedMicroblog extends Microblog{\r\n\r\n    constructor(props){\r\n        super(props)\r\n\r\n        this.quotedContent = props.quotedContent;\r\n\r\n        this.quotedTopics = props.quotedTopics;\r\n\r\n        this.quotedUserLikes = props.quotedUserLikes\r\n\r\n        this.quotedNumLikes = props.quotedNumLikes\r\n\r\n        this.quotedUser = props.quotedUser\r\n        \r\n        this.profilePicture = 'profilePicture'\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div class=\"quoted-microblog\">\r\n    \r\n                <div className=\"quoted-body\">\r\n\r\n                    <div className=\"inner-body-quoted\">\r\n\r\n                        <img src={this.profilePicture} alt=\"Logo\" className=\"picture\">\r\n\r\n                        </img>\r\n                        \r\n\r\n                        <div className=\"quoted-name\">\r\n                            {this.quotedUser}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"quoted-content\">\r\n                        {this.quotedContent}\r\n                    </div>\r\n    \r\n                </div>\r\n                {super.render()}\r\n                \r\n                <Topics topics={this.quotedTopics} />\r\n                <br></br>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n\r\n}export default QuotedMicroblog;","import React, { PureComponent } from \"react\";\r\nimport Microblog from \"../Microblog\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\n\r\nimport QuotedMicroblog from \"../QuotedMicroblog\"\r\n\r\nclass Microblogs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.microblogs = props.microblogs;\r\n    this.username = props.username;\r\n    this.loggedInUser = props.loggedInUser;\r\n  }\r\n\r\n  createMicroblogs = (microblogsArray, username) => {\r\n    var microblogs = [];\r\n    for (var i = 0; i < microblogsArray.length; i++) {\r\n      // note: we add a key prop here to allow react to uniquely identify each\r\n      // element in this array. see: https://reactjs.org/docs/lists-and-keys.html\r\n      var liked = false;\r\n      if(microblogsArray[i].userLikes !== undefined && microblogsArray[i].userLikes.includes(this.loggedInUser))\r\n      {\r\n        liked = true;\r\n      }\r\n\r\n      if(microblogsArray[i].quote){\r\n        microblogs.push(\r\n          <QuotedMicroblog \r\n            key={i} \r\n            numOfMicroblog={i}\r\n            data={microblogsArray[i]} \r\n            username={microblogsArray[i].user} \r\n            id={microblogsArray[i].id} \r\n            liked={liked} \r\n            numLikes={microblogsArray[i].numLikes}\r\n\r\n            quotedContent={microblogsArray[i].quotedContent}\r\n            quotedNumLikes={microblogsArray[i].numLikes}\r\n            quotedTopics={microblogsArray[i].quotedTopics}\r\n            quotedUserLikes={microblogsArray[i].quotedUserLikes}\r\n            quotedUser={microblogsArray[i].quotedUser}\r\n          />\r\n        );\r\n      }\r\n\r\n      else{\r\n        microblogs.push(\r\n          <Microblog\r\n            key={i}\r\n            numOfMicroblog={i}\r\n            data={microblogsArray[i]}\r\n            username={microblogsArray[i].user}\r\n            id={microblogsArray[i].id}\r\n            liked={liked}\r\n            numLikes={microblogsArray[i].numLikes}\r\n          />\r\n        );\r\n      }\r\n      \r\n    }\r\n    return <div className=\"body\">{microblogs}</div>;\r\n  };\r\n\r\n\r\n  render() {\r\n    if (this.props.microblogs != null) {\r\n      return (\r\n        <div className=\"body\">\r\n          {this.createMicroblogs(this.props.microblogs, this.username)}\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default Microblogs;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport MicroblogWriter from \"../MicroblogWriter\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport firebase from \"firebase\";\r\nimport TopBar from \"../TopBar\";\r\nimport Microblogs from \"../Microblogs\";\r\nimport AutoCompleteSearchBar from \"../AutoCompleteSearchBar/AutoCompleteSearchBar\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { resolve } from \"q\";\r\n\r\nclass Landing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loaded: false\r\n    };\r\n\r\n    this.editMode = false;\r\n\r\n    this.microblogPosted = this.microblogPosted.bind(this);\r\n    this.getAllUsernames = this.getAllUsernames.bind(this);\r\n  }\r\n\r\n  async microblogPosted() {\r\n    await this.updateMicroblogs();\r\n    this.setState({ loaded: true });\r\n  }\r\n\r\n  async updateMicroblogs() {\r\n    toast(\"Microblog posted!\");\r\n    this.microblogs = await helperfunctions.getMicroblogsForUserTimeline(\r\n      this.userData.username\r\n    );\r\n    resolve(\"done\");\r\n  }\r\n\r\n  async componentDidMount() {\r\n    //verify user is logged in before displaying page\r\n    firebase.auth().onAuthStateChanged(async user => {\r\n      if (!user) {\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n        return null;\r\n      } else {\r\n        var loggedIn = true;\r\n        var user = firebase.auth().currentUser;\r\n        this.userData = await helperfunctions.getUserdataOfUser(\r\n          user.uid,\r\n          loggedIn\r\n        );\r\n\r\n        this.microblogs = await helperfunctions.getMicroblogsForUserTimeline(\r\n          this.userData.username\r\n        );\r\n        this.setState({ loaded: true });\r\n      }\r\n    });\r\n  }\r\n\r\n  goToProfile() {\r\n    this.props.history.push({\r\n      pathname: \"/profile\",\r\n      state: { userData: this.userData }\r\n    });\r\n  }\r\n\r\n  getAllUsernames() {\r\n    var user_list = [];\r\n    const promise = firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        var all_users = snapshot.child(\"mapUsernameToEmail\").val();\r\n        var key;\r\n        for (key in all_users) {\r\n          if (all_users[key] != firebase.auth().currentUser.email) {\r\n            user_list.push(key);\r\n          }\r\n        }\r\n      });\r\n    return user_list;\r\n  }\r\n\r\n  render() {\r\n    if (this.state.loaded) {\r\n      return (\r\n        <div className=\"main-body\">\r\n          <TopBar userData={this.userData} />\r\n          {/* <AutoCompleteSearchBar\r\n            items={this.getAllUsernames()}\r\n            username={this.userData.username}\r\n          /> */}\r\n          <MicroblogWriter\r\n            username={this.userData.username}\r\n            microblogPosted={this.microblogPosted}\r\n            quotedMicroblog={false}\r\n\r\n          />\r\n          <Microblogs\r\n            microblogs={this.microblogs}\r\n            username={this.userData.username}\r\n          />\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(Landing);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport Landing from \"../Landing\";\r\nimport TopBar from \"../TopBar\";\r\n\r\nclass LandingPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Landing />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LandingPage;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nconst checkboxes = [];\r\n  \r\n  const Checkbox = ({ type = 'checkbox', name, checked, onChange }) => (\r\n    <input type={type} name={name} checked={checked} onChange={onChange} />\r\n  );\r\n  \r\n  Checkbox.propTypes = {\r\n    type: PropTypes.string,\r\n    name: PropTypes.string.isRequired,\r\n    checked: PropTypes.bool,\r\n    onChange: PropTypes.func.isRequired,\r\n  }\r\n  \r\n  export { Checkbox };\r\n\r\n  export { checkboxes };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { checkboxes } from './checkBox.js';\r\nimport { Checkbox } from './checkBox.js';\r\nimport helperfunctions from '../helperfunctions.js';\r\n\r\nclass CheckboxContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = \r\n    {\r\n      checkedItems: new Map(),\r\n      loaded: false\r\n    }\r\n\r\n    this.username = props.username;\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.save = this.save.bind(this);\r\n\r\n    // const isChecked = true;\r\n    // let name = \"Hello\";\r\n    // let key = \"checkbox4\";\r\n    // let label = \"Check Box n\";\r\n    \r\n    // let newCheckbox = {\r\n    //   name: name,\r\n    //   key: key,\r\n    //   label: label\r\n    // }\r\n\r\n    // checkboxes.map(item => (      \r\n    //   this.state.checkedItems.set(item.name, isChecked)\r\n    // ));\r\n    \r\n    // checkboxes.push(newCheckbox);\r\n  }\r\n\r\n  handleChange(e) {\r\n    const item = e.target.name;\r\n    const isChecked = e.target.checked;\r\n    this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }));\r\n  }\r\n\r\n  async componentDidMount()\r\n  {\r\n    this.topics = await helperfunctions.getFollowedAndUnfollowedTopics(this.username);\r\n    \r\n    checkboxes.length = 0\r\n\r\n    for(var index = 0; index < this.topics.followedTopicsList.length; index++)\r\n    {\r\n      const isChecked = true;\r\n      let name = this.topics.followedTopicsList[index];\r\n      let key = this.topics.followedTopicsList[index] + \"\" + index;\r\n      let label = \"Check Box \" + index;\r\n      \r\n      let checkbox_new = {\r\n        name : name,\r\n        key: key,\r\n        label: label\r\n      };\r\n\r\n      // checkboxes.map(item => (\r\n      //   this.state.checkedItems.set(item.name, isChecked)\r\n      // ));\r\n      \r\n      this.state.checkedItems.set(name, isChecked);\r\n\r\n      checkboxes.push(checkbox_new);\r\n    }\r\n\r\n    for(var index = 0; index < this.topics.unfollowedTopics.length; index++)\r\n    {\r\n      const isChecked = false;\r\n      let name = this.topics.unfollowedTopics[index];\r\n      let key = this.topics.unfollowedTopics[index] + \"\" + index;\r\n      let label = \"Check Box \" + index;\r\n      \r\n      let checkbox_new = {\r\n        name : name,\r\n        key: key,\r\n        label: label\r\n      };\r\n\r\n      // checkboxes.map(item => (\r\n      //   this.state.checkedItems.set(item.name, isChecked)\r\n      // ));\r\n\r\n      this.state.checkedItems.set(name, isChecked);\r\n      checkboxes.push(checkbox_new);\r\n    }\r\n    //this.handleChange = this.handleChange.bind(this);\r\n    this.setState({loaded: true});\r\n  }\r\n\r\n  async save()\r\n  {\r\n    console.log(\"REACHED HERE\");\r\n    var followedTopics = [];\r\n    var unFollowedTopics = [];\r\n    for(const [k,v] of this.state.checkedItems.entries())\r\n    {\r\n      console.log(k,v);\r\n      if(v === true)\r\n      {\r\n        followedTopics.push(k);\r\n      }\r\n      else if(v === false)\r\n      {\r\n        unFollowedTopics.push(k);\r\n      }\r\n    }\r\n    await helperfunctions.addAndRemoveTopicsFromFollowedUser(this.username, followedTopics, unFollowedTopics);\r\n  }\r\n  // componentWillMount() {\r\n  //   const isChecked = true;\r\n  //   checkboxes.map(item => (      \r\n  //     this.state.checkedItems.set(item, isChecked)\r\n  //    ));\r\n  // }\r\n\r\n  render() {\r\n    if(this.state.loaded)\r\n    {\r\n      if(checkboxes.length > 0)\r\n      {\r\n        return (\r\n          <React.Fragment>\r\n            {\r\n              checkboxes.map(item => (\r\n                <label key={item.key}>\r\n                  {item.name}\r\n                  <Checkbox name={item.name} checked={this.state.checkedItems.get(item.name)} onChange={this.handleChange} />\r\n                </label>\r\n              ))\r\n            }\r\n            <button type=\"button\" onClick={this.save}>Save</button>\r\n          </React.Fragment>\r\n        );\r\n      }\r\n      else\r\n      {\r\n        return (\r\n          <React.Fragment>\r\n            {\r\n              checkboxes.map(item => (\r\n                <label key={item.key}>\r\n                  {item.name}\r\n                  <Checkbox name={item.name} checked={this.state.checkedItems.get(item.name)} onChange={this.handleChange} />\r\n                </label>\r\n              ))\r\n            }\r\n          </React.Fragment>\r\n        );\r\n      }\r\n    }\r\n    else\r\n    {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default CheckboxContainer;","import React from \"react\"\r\nimport './ProfilepicView.css'\r\n\r\nconst ProfilepicView = ({image, changeProfPic, deletePic, name}) =>   {\r\n    console.log(name);\r\n    return (\r\n        <div>\r\n        <img id = \"img1\" height=\"125\" width=\"125\"/>\r\n            <div className=\"hold_text\">\r\n            <text className=\"user_name\" thename={name}> {name} </text>\r\n            </div>\r\n            <div>\r\n            <button onClick={changeProfPic}>Change profile picture </button>\r\n            </div>\r\n            <div className=\"del_bt\">\r\n            <button onClick={deletePic}>Delete Picture / Change to default</button>\r\n            </div>\r\n\r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default ProfilepicView;","import index from './index'\r\nimport React from \"react\"\r\nimport { file } from '@babel/types';\r\n\r\nconst NewProfilepicView = ({image, changeProfPic}) =>   {\r\n    return (\r\n        <div>\r\n        \r\n        <img id = \"img1\" height=\"125\" width=\"125\"/>\r\n            <div>\r\n            <button onClick={changeProfPic}>Change profile picture</button>\r\n            <input type=\"file\" name = \"input\" id = \"input\" onChange={changeProfPic}></input>\r\n            </div>\r\n\r\n            \r\n           \r\n        </div>\r\n        \r\n    );\r\n};\r\n\r\nexport default NewProfilepicView;","import React from 'react'\r\n\r\nconst VisitedProfilepic = ({image}) => {\r\n    return (\r\n        <div>\r\n            <img src={image} height=\"125\" width=\"125\"/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisitedProfilepic;","import React from \"react\";\r\n\r\nconst VisitedUserView = ({ userProfile })=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n              <h1 id='welcome'></h1>\r\n          <br></br>\r\n          <label>Followers:</label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          <br></br>\r\n          <label>Following:</label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          <br></br>\r\n          <button type='button' id=\"followbutton\" onClick={userProfile.followUser}>Follow</button>\r\n          <br></br>\r\n          <button type='button' id=\"directmessagebutton\" onClick={userProfile.dmUser}>Direct Message</button>\r\n          <br></br>\r\n          <button type=\"button\" id=\"blockbutton\" onClick={userProfile.blockUser}>Block</button>\r\n          <br></br>\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <br></br>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default VisitedUserView;","import React, { Component } from 'react'\r\nimport ProfilepicView from './ProfilepicView'\r\nimport NewProfilepicView from './NewProfilepicView'\r\nimport VisitedProfilepic from './VisitedProfilepic'\r\nimport {withRouter } from \"react-router\"\r\n\r\nimport firebase from 'firebase'\r\nimport VisitedUserView from '../User/UserProfileViews/VisitedUserView'\r\n\r\n\r\nclass ProfilePicture extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.username = this.props.strangername;\r\n        this.visiting = this.props.visiting;\r\n        this.strangername = this.props.strangername;\r\n        this.toUpload = false;\r\n        this.upLoadImage = this.uploadImage.bind(this);\r\n        this.fetchImage = this.fetchImage.bind(this);\r\n        this.changePic = this.changePic.bind(this);\r\n\r\n    }\r\n\r\n\r\n    uploadImage = async event => {\r\n        console.log(\"upLoadImage running\");\r\n        var inpFile = document.getElementById('input');\r\n\r\n        const file = inpFile.files[0];\r\n\r\n        if (file != null) {\r\n          /*  await firebase.database().ref().once('value', (snapshot)  => {\r\n               // var userList = snapshot.child(\"users\").val();\r\n               // let user = userList[firebase.auth().currentUser.id];\r\n                //user.ref('picture').set(file.name);\r\n                //snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(file.name);\r\n                snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set({'hola'};\r\n            });*/\r\n\r\n            firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(this.username);\r\n\r\n           const promise =  firebase.storage().ref().child(this.username).put(file).then(function(snapshot) {\r\n                console.log(\"file uploaded\");\r\n                //window.toUpload = false;\r\n                //forceUpdate();\r\n\r\n            });\r\n\r\n            promise.then(response => {\r\n                this.toUpload = false;\r\n                this.forceUpdate();\r\n            })\r\n            //this.toUpload = false;\r\n            //this.forceUpdate();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n    async fetchImage() {\r\n\r\n        var picname;\r\n        console.log(\"fetchImage running\");\r\n\r\n        await firebase.database().ref().once('value', (snapshot)  => {\r\n            /*var userList = snapshot.child(\"users\").val();\r\n            let user = userList[firebase.auth().currentUser.id];*/\r\n            this.username = snapshot.child(\"mapUIDtoUsername\").child(firebase.auth().currentUser.uid).val();\r\n            picname = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").val();\r\n            //picname = user[\"picture\"].val();\r\n            console.log(\"was here hello world\");\r\n        });\r\n\r\n        console.log(picname);\r\n\r\n        if (true) {\r\n \r\n\r\n            await firebase.storage().ref().child(picname).getDownloadURL().then(function(url) {\r\n                var toReturn = url;\r\n                document.querySelectorAll('img').forEach(function(item){\r\n                    if (item.id == \"img1\") {\r\n                        item.src = toReturn;\r\n                    }\r\n                })\r\n                //return toReturn;\r\n\r\n            }).catch(function(error) {\r\n                switch(error.code) {\r\n                    case 'storage/object-not-found':\r\n                        console.log(\"object not found\");\r\n                        break;\r\n                    case 'storage/unauthorized' :\r\n                        console.log(\"unauthorized\");\r\n                        break;\r\n                    case 'storage/unknown':\r\n                        console.log(\"unknown\");\r\n                        break;\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n\r\n        }\r\n        else {\r\n            return firebase.storage().ref(picname);\r\n        }\r\n\r\n        console.log(\"ends now\");\r\n\r\n\r\n    }\r\n\r\n    async visiterImage() {\r\n        var toRet;\r\n        var strangeruid;\r\n        var picname;\r\n\r\n        await firebase.database().ref().once('value', (snapshot) => {\r\n            strangeruid = snapshot.child(\"mapUsernameToUID\").child(this.strangername).val();\r\n            console.log(\"helloworld\");\r\n            console.log(this.strangername);\r\n            picname = snapshot.child(\"users\").child(strangeruid).child(\"picture\").val();\r\n        })\r\n        console.log(\"Yupdupbug\");\r\n        console.log(picname);\r\n\r\n        await firebase.storage().ref().child(picname).getDownloadURL().then(function(url) {\r\n            toRet = url;\r\n            document.querySelector('img').src = toRet;\r\n        }).catch(function(error) {\r\n            switch(error.code) {\r\n                case 'storage/object-not-found':\r\n                    console.log(\"object not found\");\r\n                    break;\r\n                case 'storage/unauthorized' :\r\n                    console.log(\"unauthorized\");\r\n                    break;\r\n                case 'storage/unknown':\r\n                    console.log(\"unknown\");\r\n                    break;\r\n\r\n\r\n            }\r\n        });\r\n\r\n    \r\n    }\r\n\r\n\r\n    deletePicture = async event => {\r\n\r\n        console.log(\"deletePicture running\");\r\n\r\n        const promise = firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"picture\").set(\"default.jpg\");\r\n \r\n\r\n        promise.then(response => {\r\n            this.forceUpdate();\r\n        })\r\n\r\n    }\r\n\r\n    changePic () {\r\n        console.log(\"changePic running\");\r\n        this.toUpload = true;\r\n        this.forceUpdate();\r\n    }\r\n\r\n   /* async componentDidMount() {\r\n        if (this.toUpload) {\r\n            this.setState(true);\r\n        }\r\n    }*/\r\n\r\n    render() {\r\n        if (this.visiting == false) {\r\n            if (this.toUpload == false) {\r\n                console.log(\"here first\");\r\n                return(\r\n                <div>\r\n                    <ProfilepicView image = {this.fetchImage()} changeProfPic = {this.changePic} deletePic = {this.deletePicture} name={this.username}/>\r\n                </div>\r\n                );\r\n            }\r\n            else {\r\n                console.log(\"wrong place\");\r\n                return (\r\n                <div>\r\n                    <NewProfilepicView image = {this.fetchImage()} changeProfPic = {this.upLoadImage}></NewProfilepicView>\r\n                </div>\r\n                );\r\n            }\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n                    <VisitedProfilepic image={this.visiterImage()}/>\r\n                </div>\r\n            )\r\n        }\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(ProfilePicture);","import React from \"react\";\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\n\r\nconst LoggedInUserView = ({ userProfile, deleteAccount, submitRestrictDM, logout})=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <button onClick={userProfile.editProfile}>Edit</button>\r\n          <br></br>\r\n          <button type='button' style={{marginLeft: \"365px\"}} onClick={deleteAccount}>Delete account</button>\r\n          <IconButton><ExitToAppIcon fontSize=\"large\" onClick={logout}></ExitToAppIcon></IconButton>\r\n          \r\n          </form>\r\n\r\n          <div>\r\n            <label>Followers :  </label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          </div>\r\n          \r\n          <div>\r\n            <label> Following :  </label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          </div>\r\n\r\n          <div>\r\n            Restrict direct messages to those you follow: <input type=\"checkbox\" id=\"checkRestrictDM\" onClick={submitRestrictDM}/>\r\n          </div>\r\n\r\n        </div>\r\n    );\r\n}; \r\nexport default LoggedInUserView;","import React from \"react\";\r\n\r\nconst LoggedInUserEditView = ({ userProfile, deleteAccount, submitRestrictDM })=> {  \r\n  \r\n    return(\r\n        <div>\r\n          <form>\r\n          <label>Username:</label><label id='username'>{userProfile.username}</label>\r\n          <button type='button' style={{marginLeft: \"365px\"}} onClick={deleteAccount}>Delete account</button>\r\n          <br></br>\r\n          <label>Followers:</label><label id='followers'>{userProfile.followersAndFollowing.followers}</label>\r\n          <br></br>\r\n          <label>Following:</label><label id='following'>{userProfile.followersAndFollowing.following}</label>\r\n          <br></br>\r\n          <label>Bio:</label><label id='bio'>{userProfile.bio}</label>\r\n          <br></br>\r\n          Restrict direct messages to those you follow: <input type=\"checkbox\" id=\"checkRestrictDM\" onClick={submitRestrictDM}/>\r\n          <br></br>\r\n          <input\r\n            id=\"bioTextBox\"\r\n            name=\"Bio\"\r\n            type=\"bio\"\r\n            placeholder=\"New bio\"\r\n          />\r\n          <br></br>\r\n          <button onClick={userProfile.saveChanges}>Save Changes</button>\r\n          <br></br>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default LoggedInUserEditView;","import React, { Component } from 'react';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport helperfunctions from '../helperfunctions.js'\r\nimport Microblogs from '../Microblogs'\r\nimport CheckboxContainer from '../ProfilePage/checkBox.jsx'\r\n\r\nimport ProfilePicture from '../ProfilePicture'\r\nimport LoggedInUserView from \"./UserProfileViews/LoggedInUserView\";\r\nimport LoggedInUserEditView from \"./UserProfileViews/LoggedInUserEditView\"\r\nimport VisitedUserView from \"./UserProfileViews/VisitedUserView\"\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport { resolve } from 'q';\r\nimport ProfilePageView from '../ProfilePage/ProfilePageView.js';\r\n\r\nimport firebase from \"firebase\";\r\n\r\nclass User extends React.Component{\r\n\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n\r\n        this.username = props.user.userData.username;\r\n        this.loggedIn = props.user.userData.loggedIn;\r\n        this.loggedInViewingOwnProfile = props.user.userData.viewingOwnProfile;\r\n\r\n        this.editProfile = this.editProfile.bind(this);\r\n        this.deleteAccount = this.deleteAccount.bind(this);\r\n        this.logout = this.logout.bind(this);\r\n        this.saveChanges = this.saveChanges.bind(this);\r\n        this.followOrUnfollowUser = this.followOrUnfollowUser.bind(this);\r\n        this.directMessageUser = this.directMessageUser.bind(this);\r\n        this.blockUser = this.blockUser.bind(this);\r\n        this.submitRestrictDM = this.submitRestrictDM.bind(this);\r\n        \r\n        this.renderLoggedInUser = this.renderLoggedInUser.bind(this);\r\n        this.renderVisitedUser = this.renderVisitedUser.bind(this);\r\n\r\n        this.state = {\r\n            loaded: false\r\n        }\r\n        \r\n        this.editMode = false;\r\n    }\r\n\r\n    async submitRestrictDM()\r\n    {\r\n        if(document.getElementById(\"checkRestrictDM\").checked === true)\r\n        {\r\n            var usernames = await helperfunctions.getAllUsers(this.username);\r\n            var objList = await helperfunctions.getFollowersAndFollowing(this.username);\r\n            var following = objList.following;\r\n            var blockUsers = [];\r\n            for(var index = 0; index < usernames.length; index++)\r\n            {\r\n                if(!following.includes(usernames[index]))\r\n                {\r\n                    blockUsers.push(usernames[index]);\r\n                }\r\n            }\r\n            await helperfunctions.removeBlockedUser(usernames);\r\n            await helperfunctions.addBlockedUser(blockUsers);\r\n        }\r\n        else if(document.getElementById(\"checkRestrictDM\").checked === false)\r\n        {\r\n            var usernames = await helperfunctions.getAllUsers(this.username);\r\n            var objList = await helperfunctions.getFollowersAndFollowing(this.username);\r\n            var following = objList.following;\r\n            var blockUsers = [];\r\n            for(var index = 0; index < usernames.length; index++)\r\n            {\r\n                if(!following.includes(usernames[index]))\r\n                {\r\n                    blockUsers.push(usernames[index]);\r\n                }\r\n            }\r\n            await helperfunctions.removeBlockedUser(blockUsers);\r\n        }\r\n    }\r\n\r\n    editProfile(){\r\n        this.editMode = true;\r\n        this.setState({\r\n          editMode : 1\r\n        })\r\n    }\r\n\r\n  deleteAccount() {\r\n    this.loggedIn = false;\r\n    this.props.history.push({\r\n        pathname: \"/DeleteAccount\"\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    firebase\r\n    .auth()\r\n    .signOut()\r\n    .then(function() {\r\n      console.log(\"Signout succesful\");\r\n    })\r\n    .catch(function(error) {\r\n      console.log(\"Error\");\r\n    });\r\n\r\n    this.props.history.push({\r\n        pathname: \"/login\"\r\n    });\r\n  }\r\n  \r\n    saveChanges(){\r\n    \r\n        var bio_cont = document.getElementById('bioTextBox').value;\r\n        helperfunctions.postCurrentUserBio(bio_cont);\r\n\r\n        this.editMode = false;\r\n        this.setState({\r\n        mustUpdate : 1\r\n        })\r\n    }\r\n\r\n    async followOrUnfollowUser(){\r\n    \r\n        if (document.getElementById('followbutton').textContent ==  \"Follow\") {\r\n            await helperfunctions.followUserIAmViewing(this.username);\r\n            var objList = await helperfunctions.getFollowersAndFollowingForCurrentUser();\r\n            var following = objList.following;\r\n            var blockedUsers = await helperfunctions.getBlockedUser();\r\n            var check = true;\r\n            for(var index = 0; index < blockedUsers.length; index++)\r\n            {\r\n                if(following.includes(blockedUsers[index]))\r\n                {\r\n                    check = false;\r\n                }\r\n            }\r\n            if(blockedUsers.length !== 0 && check === true)\r\n            {\r\n                var unblockedUsers = [];\r\n                unblockedUsers.push(this.username);\r\n                await helperfunctions.removeBlockedUser(unblockedUsers);\r\n            }\r\n            document.getElementById('followbutton').textContent = \"Unfollow\";\r\n            this.setState({ follow : 0});\r\n        } else {\r\n            await helperfunctions.unfollowUserIAmViewing(this.username);\r\n            var objList = await helperfunctions.getFollowersAndFollowingForCurrentUser();\r\n            var following = objList.following;\r\n            var blockedUsers = await helperfunctions.getBlockedUser();\r\n            var check = true;\r\n            for(var index = 0; index < blockedUsers.length; index++)\r\n            {\r\n                if(following.includes(blockedUsers[index]))\r\n                {\r\n                    check = false;\r\n                }\r\n            }\r\n            if(blockedUsers.length !== 0 && check === true)\r\n            {\r\n                var blockedUsers = [];\r\n                blockedUsers.push(this.username);\r\n                await helperfunctions.addBlockedUser(blockedUsers);\r\n            }\r\n            document.getElementById('followbutton').textContent = \"Unfollow\";\r\n            this.setState({ follow : 1});\r\n            document.getElementById('followbutton').textContent = \"Follow\";\r\n        }\r\n\r\n        this.followersAndFollowing = await helperfunctions.getFollowersAndFollowing(this.username);\r\n        this.userProfile.followersAndFollowing = this.followersAndFollowing;\r\n        this.setState({ mustUpdate : 1})\r\n    }\r\n\r\n    directMessageUser() {\r\n        this.props.history.push({\r\n            pathname: \"/chat\",\r\n            state: { dmUsername: this.username,\r\n                    topBar: false }\r\n        });\r\n    }\r\n\r\n    async blockUser() {\r\n        if(document.getElementById('blockbutton').textContent === \"Block\")\r\n        {\r\n            var currBlocked = await helperfunctions.getBlockedUser();\r\n            if(!currBlocked.includes(this.username))\r\n            {\r\n                var blockedUsers = [];\r\n                blockedUsers.push(this.username);\r\n                await helperfunctions.addBlockedUser(blockedUsers);\r\n            }\r\n            document.getElementById('blockbutton').textContent = \"Unblock\";\r\n            document.getElementById('directmessagebutton').disabled = true;\r\n        }\r\n        else if(document.getElementById('blockbutton').textContent === \"Unblock\")\r\n        {\r\n            var currBlocked = await helperfunctions.getBlockedUser();\r\n            if(currBlocked.includes(this.username))\r\n            {\r\n                var blockedUsers = [];\r\n                blockedUsers.push(this.username);\r\n                await helperfunctions.removeBlockedUser(blockedUsers);\r\n            }\r\n            document.getElementById('blockbutton').textContent = \"Block\";\r\n            document.getElementById('directmessagebutton').disabled = false;\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        this.userProfile = new Object();\r\n        this.userProfile.saveChanges = this.saveChanges;\r\n        this.userProfile.editProfile = this.editProfile;\r\n        this.userProfile.followUser = this.followOrUnfollowUser;\r\n        this.userProfile.dmUser = this.directMessageUser;\r\n        this.userProfile.blockUser = this.blockUser;\r\n        await this.downloadUserProfile(this.userProfile);\r\n        this.setState({loaded : true});\r\n\r\n        if(!this.loggedIn){\r\n            document.getElementById('followbutton').disabled = true;\r\n            document.getElementById('directmessagebutton').disabled = true;\r\n            document.getElementById('blockbutton').disabled = true;\r\n            return;\r\n        }\r\n\r\n        if(this.loggedInViewingOwnProfile === true)\r\n        {\r\n            var objList = await helperfunctions.getFollowersAndFollowing(this.username);\r\n            var following = objList.following;\r\n            var blockedUsers = await helperfunctions.getBlockedUser();\r\n            var check = true;\r\n            for(var index = 0; index < blockedUsers.length; index++)\r\n            {\r\n                if(following.includes(blockedUsers[index]))\r\n                {\r\n                    check = false;\r\n                }\r\n            }\r\n            if(check === false || blockedUsers.length === 0)\r\n            {\r\n                document.getElementById(\"checkRestrictDM\").checked = false;\r\n            }\r\n            else if(check === true)\r\n            {\r\n                document.getElementById(\"checkRestrictDM\").checked = true;\r\n            }\r\n\r\n        }\r\n        var blockedUsers = await helperfunctions.getBlockedUser();\r\n\r\n        var usersBlockedFrom = await helperfunctions.getUsersBlockedFrom();\r\n\r\n        if(this.loggedInViewingOwnProfile === false)\r\n        {\r\n            if(usersBlockedFrom !== undefined && usersBlockedFrom.length !== 0 && usersBlockedFrom.includes(this.username))\r\n            {\r\n                document.getElementById(\"directmessagebutton\").disabled = true;\r\n                if(blockedUsers !== undefined && blockedUsers.length !== 0 && blockedUsers.includes(this.username))\r\n                {\r\n                    document.getElementById(\"blockbutton\").textContent = \"Unblock\";\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById(\"blockbutton\").textContent = \"Block\";\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if(blockedUsers !== undefined && blockedUsers.length !== 0 && blockedUsers.includes(this.username))\r\n                {\r\n                    document.getElementById(\"directmessagebutton\").disabled = true;\r\n                    document.getElementById(\"blockbutton\").textContent = \"Unblock\";\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById(\"directmessagebutton\").disabled = false;\r\n                    document.getElementById(\"blockbutton\").textContent = \"Block\";\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        //check if I am currently following the user I am viewing and if so, change button text to \"unfollow\"\r\n        if(this.loggedInViewingOwnProfile === false)\r\n        {\r\n            await firebase.database().ref().once('value', (snapshot) => {\r\n                var mapUIDToUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n                var currUserName = mapUIDToUsername[firebase.auth().currentUser.uid];\r\n    \r\n                if ((this.userProfile.followersAndFollowing.followers).includes(currUserName)) {\r\n                    document.getElementById('followbutton').textContent = \"Unfollow\";\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    async componentDidUpdate(prevProps){\r\n\r\n        await this.downloadUserProfile(this.userProfile);\r\n\r\n        if (this.props.userID !== prevProps.userID) {\r\n            this.fetchData(this.props.userID);\r\n        }\r\n\r\n        if(this.state.mustUpdate == 1){\r\n            this.setState({\r\n                mustUpdate : 0\r\n            })\r\n        }\r\n    }\r\n\r\n    async downloadUserProfile(userProfile){\r\n\r\n        userProfile.username = this.username;\r\n\r\n        this.bio = await helperfunctions.getBio(this.username);\r\n        userProfile.bio = this.bio;\r\n\r\n        this.followersAndFollowing = await helperfunctions.getFollowersAndFollowing(this.username);\r\n        userProfile.followersAndFollowing = this.followersAndFollowing;\r\n\r\n        this.microblogs = await helperfunctions.getMicroblogsForUser(this.username);\r\n        userProfile.microblogs = this.microblogs;\r\n\r\n        var loggedInUser = firebase.auth().currentUser;\r\n        if(loggedInUser !== null)\r\n        {\r\n            this.userData = await helperfunctions.getUserdataOfUser(loggedInUser.uid, true);\r\n        }\r\n        else\r\n        {\r\n            this.userData = await helperfunctions.getUserdataOfUserDiff(this.username, true);\r\n        }\r\n\r\n        resolve(\"done\");\r\n\r\n    }\r\n\r\n    render() {\r\n        if(this.state.loaded){\r\n\r\n            if(this.loggedIn){\r\n                if (this.loggedInViewingOwnProfile) {\r\n                    return this.renderLoggedInUser(this.userProfile, this.deleteAccount, this.submitRestrictDM, this.logout);\r\n                } else {\r\n\r\n                    return this.renderVisitedUser(this.userProfile);\r\n                }\r\n            }\r\n            else{\r\n                return this.renderVisitedUser(this.userProfile);\r\n            }\r\n\r\n        } else{\r\n            return null;\r\n        }\r\n        \r\n    }\r\n\r\n    renderLoggedInUser(userProfile, deleteAccount, submitRestrictDM, logout){\r\n\r\n        if(this.editMode){\r\n            return(\r\n                <div>\r\n                    <LoggedInUserEditView userProfile={userProfile} deleteAccount={deleteAccount} submitRestrictDM={submitRestrictDM}/>\r\n                    <Microblogs \r\n                        microblogs={userProfile.microblogs} \r\n                        username={userProfile.username} \r\n                        loggedInUser={this.userData.username}\r\n                    />\r\n                    \r\n                </div>\r\n            );\r\n        }\r\n\r\n        else{\r\n            if(userProfile.microblogs == undefined)\r\n            {\r\n                return(\r\n                    <div>\r\n                        <ProfilePicture strangername={this.username} visiting={false}/>\r\n                        <LoggedInUserView userProfile={userProfile} deleteAccount={deleteAccount} submitRestrictDM={submitRestrictDM} logout={logout}/>\r\n                    </div>\r\n                );\r\n            }\r\n            else {\r\n            return (\r\n                <div>\r\n                    <ProfilePicture strangername={this.username} visiting={false}/>\r\n                    <LoggedInUserView userProfile={userProfile} deleteAccount={deleteAccount} submitRestrictDM={submitRestrictDM} logout={logout}/>\r\n                    <Microblogs \r\n                        microblogs={userProfile.microblogs} \r\n                        username={userProfile.username} \r\n                        loggedInUser={this.userData.username}\r\n                    />                    \r\n                </div>\r\n            );\r\n            }\r\n        }\r\n    }\r\n\r\n    renderVisitedUser(userProfile){\r\n        if(userProfile === undefined)\r\n        {\r\n            return(\r\n                <div>\r\n                <ProfilePicture strangername={this.username} visiting={true}/>\r\n                <VisitedUserView userProfile={userProfile}/>     \r\n                </div>\r\n            );\r\n        }\r\n        else\r\n        {\r\n            console.log(\"Reached here 2\");\r\n            return (\r\n                <div>\r\n                <ProfilePicture strangername={this.username} visiting={true}/>\r\n                <VisitedUserView userProfile={userProfile}/>\r\n                <Microblogs \r\n                        microblogs={userProfile.microblogs} \r\n                        username={userProfile.username} \r\n                        loggedInUser={this.userData.username}\r\n                    />               \r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport default withRouter(User);\r\n","import React from \"react\";\r\nimport User from \"../User/index\"\r\nimport UserData from \"../DataObjects/UserData\";\r\nconst ProfilePageView = (userData) => {  \r\n  \r\n    return(\r\n        <div>\r\n          <User user={userData}></User>\r\n          <form>\r\n          </form>\r\n        </div>\r\n    );\r\n}; \r\nexport default ProfilePageView;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport TopBarLoginSignup from \"./TopBarLoginSignup\"\r\n\r\n\r\nclass PageNotFound extends Component {\r\n\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    this.goLogIn = this.goLogIn.bind(this);\r\n  }\r\n\r\n  async goLogIn()\r\n  {\r\n    this.props.history.push({\r\n      pathname: \"/login\"\r\n    });\r\n  }\r\n    \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TopBarLoginSignup />\r\n        <h1>404 Page Not Found</h1>\r\n        <form>\r\n        <button onClick={this.goLogIn}>Go to login page</button>\r\n        </form>\r\n      </div>\r\n  );\r\n  }\r\n  \r\n}\r\n\r\nexport default withRouter(PageNotFound);","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport ProfilePageView from \"./ProfilePageView\";\r\nimport UserData from \"../DataObjects/UserData\";\r\nimport TopBar from \"../TopBar\";\r\nimport ProfilePicture from \"../ProfilePicture\";\r\nimport firebase from \"firebase\";\r\nimport { resolve } from \"q\";\r\nimport CheckboxContainer from \"./checkBox.jsx\";\r\nimport PageNotFound from \"../PageNotFound.js\";\r\nimport helperfunctions from \"../helperfunctions\";\r\n\r\nclass ProfilePage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    //this.getUser = this.getUser.bind(this);\r\n    this.localProps = props;\r\n\r\n    this.state = {\r\n      //checkedItems: new Map(),\r\n      loaded: false,\r\n    };\r\n\r\n    this.doesNotExist = false;\r\n    //this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.doesNotExist = false;\r\n    await this.setUsername();\r\n    var allUsers = await helperfunctions.getAllOtherUsers();\r\n    if(this.username !== undefined)\r\n    {\r\n      if(!allUsers.includes(this.username))\r\n      {\r\n      this.doesNotExist = true;\r\n      }\r\n    }\r\n    this.setState({ loaded: true });\r\n  }\r\n\r\n  async setUsername() {\r\n    await firebase\r\n      .database()\r\n      .ref()\r\n      .once(\"value\", snapshot => {\r\n        var UIDtoUsername = snapshot.child(\"mapUIDtoUsername\").val();\r\n\r\n        if (\r\n          firebase.auth().currentUser == undefined ||\r\n          firebase.auth().currentUser == null\r\n        ) {\r\n          if (this.localProps.location.pathname != \"/profile\") {\r\n            this.path = this.localProps.location.pathname;\r\n            this.username = this.path.substring(9, this.path.length);\r\n            this.userData = new UserData(this.username, false);\r\n          } else {\r\n            this.localProps.history.push({\r\n              pathname: \"/login\"\r\n            });\r\n            return;\r\n          }\r\n        } else {\r\n          if (this.localProps.location.pathname != \"/profile\") {\r\n            this.path = this.localProps.location.pathname;\r\n            this.username = this.path.substring(9, this.path.length);\r\n\r\n            if (\r\n              this.username == UIDtoUsername[firebase.auth().currentUser.uid]\r\n            ) {\r\n              this.userData = new UserData(this.username, true, true);\r\n            } else {\r\n              this.userData = new UserData(this.username, true, false);\r\n            }\r\n          } else {\r\n            this.userData = new UserData(\r\n              UIDtoUsername[firebase.auth().currentUser.uid],\r\n              true,\r\n              true\r\n            );\r\n          }\r\n        }\r\n      });\r\n\r\n    resolve(\"done\");\r\n  }\r\n\r\n\r\n  //getUser(username){\r\n  //this.userData = new UserData(username, false, false);\r\n  //}\r\n\r\n  // handleChange(e) {\r\n  //   const item = e.target.name;\r\n  //   const isChecked = e.target.checked;\r\n  //   this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }));\r\n  // }\r\n\r\n  render() {\r\n    if (this.state.loaded) {\r\n      if(this.doesNotExist === false)\r\n      {\r\n        return (\r\n          <div>\r\n            <TopBar />\r\n\r\n            <ProfilePageView userData={this.userData} />\r\n            <CheckboxContainer username={this.username} />\r\n          </div>\r\n        ) ;\r\n      }\r\n      else\r\n      {\r\n        return (\r\n          <PageNotFound/>\r\n        );\r\n      }\r\n      \r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default withRouter(ProfilePage);\r\n","import React from 'react';\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass ProfilePageRouting extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.goToProfile = this.goToProfile.bind(this);\r\n    }\r\n\r\n    goToProfile() {\r\n        var userData = this.props.location.state.userData;\r\n        var text = this.props.location.state.text;\r\n        if (text != undefined) {\r\n            this.props.history.replace({\r\n                pathname: \"/profile/\" + text,\r\n                state: { userData: userData }\r\n            });\r\n        }\r\n        else {\r\n            this.props.history.replace({\r\n                pathname: \"/profile\",\r\n                state: { userData: userData }\r\n            }); \r\n        }\r\n    }\r\n\r\n    render() {\r\n            return(\r\n                <div>\r\n                    {this.goToProfile()}\r\n                </div>\r\n            );\r\n    }\r\n\r\n}\r\nexport default withRouter(ProfilePageRouting);","import React from \"react\";\r\n\r\nconst DeleteAccountAuthenticationView = ({ onSubmit }) => {  \r\n  \r\n  return (\r\n    <div>\r\n        <h1>User verification</h1>\r\n        <form onSubmit={onSubmit}>      \r\n        \r\n        <label>\r\n          Email/Username\r\n          <input\r\n            name=\"email\"\r\n            //type=\"email\"\r\n            placeholder=\"Email/Username\"\r\n          />\r\n        </label>\r\n        <label>\r\n          Password\r\n          <input\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n          />          \r\n        </label>\r\n        <button type=\"submit\">Delete Account</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteAccountAuthenticationView;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport app from \"../base\";\r\nimport TopBarLoginSignup from \"../TopBarLoginSignup\";\r\nimport helperfunctions from '../helperfunctions.js'\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport firebase from \"firebase\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport DeleteAccountAuthenticationView from \"./DeleteAccountAuthenticationView\";\r\n\r\nclass DeleteAcountAuthenticationContainter extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.handleLogIn = this.handleLogIn.bind(this);\r\n    }\r\n  \r\n    handleLogIn = async event => {\r\n      event.preventDefault();\r\n      const { email, password } = event.target.elements;\r\n      try {\r\n        var user_exists = false;\r\n        var currentEmail = firebase.auth().currentUser.email;\r\n        var currentUsername = null;\r\n\r\n        if(email.value == currentEmail) {\r\n            user_exists = true;\r\n            await app\r\n            .database()\r\n            .ref()\r\n            .once(\"value\", snapshot => {\r\n                var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n                var username;\r\n                for (username in user_email_list) {\r\n                    if (user_email_list[username] == currentEmail) {\r\n                        currentUsername = username;\r\n                        break;\r\n                    }\r\n                }\r\n            }); \r\n        }\r\n        else {\r\n            await app\r\n            .database()\r\n            .ref()\r\n            .once(\"value\", snapshot => {\r\n                var user_email_list = snapshot.child(\"mapUsernameToEmail\").val();\r\n                \r\n                console.log(user_email_list[email.value]);\r\n                if (user_email_list[email.value] != undefined) {\r\n                    if (user_email_list[email.value] == currentEmail) {\r\n                        currentUsername = email.value;\r\n                        user_exists = true;\r\n                    }\r\n                }\r\n            }); \r\n        }\r\n  \r\n        if (!user_exists) {\r\n          toast(\"The Email/Username or Password is incorrect\");\r\n          toast(\"The Email/Username or Password is incorrect\", { containerId: \"B\" });\r\n          return;\r\n        }\r\n  \r\n        var valid_password = true;\r\n        this.user = await app\r\n          .auth()\r\n          .signInWithEmailAndPassword(currentEmail, password.value).catch(function() {\r\n            valid_password = false;\r\n          });\r\n\r\n        if (!valid_password) {\r\n          toast(\"The Email/Username or Password is incorrect\");\r\n          toast(\"The Email/Username or Password is incorrect\", { containerId: \"B\" });\r\n          return;\r\n        }\r\n        \r\n        console.log(currentUsername);\r\n        helperfunctions.deleteUserData(currentUsername);\r\n        toast(\"User account deleted\");\r\n        this.loggedIn = false;\r\n\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n      } catch (error) {\r\n        toast(error);\r\n      }\r\n    };\r\n    render() {\r\n      return (\r\n        <div>\r\n          <ToastContainer\r\n            enableMultiContainer\r\n            containerId={\"B\"}\r\n            position={toast.POSITION.TOP_RIGHT}\r\n          />\r\n\r\n          <TopBarLoginSignup />\r\n          <DeleteAccountAuthenticationView onSubmit={this.handleLogIn} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default withRouter(DeleteAcountAuthenticationContainter);","import { Component } from \"react\";\r\nimport React from \"react\";\r\n\r\nclass Messages extends Component {\r\n  render() {\r\n    const { messages } = this.props;\r\n    return (\r\n      <ul id=\"messageslist\" className=\"Messages-list\">\r\n        {messages.map(m => this.renderMessage(m))}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  renderMessage(message) {\r\n    const { member, text } = message;\r\n    const { currentMember } = this.props;\r\n    const messageFromMe = member.id === currentMember.id;\r\n    const className = messageFromMe\r\n      ? \"Messages-message currentMember\"\r\n      : \"Messages-message\";\r\n    return (\r\n      <li className={className}>\r\n        <span\r\n          className=\"avatar\"\r\n          //style={{ backgroundColor: member.clientData.color }}\r\n        />\r\n        <div className=\"Message-content\">\r\n          <div className=\"username\">{member.username}</div>\r\n          <div className=\"text\">{text}</div>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Messages;\r\n","import { Component } from \"react\";\r\nimport React from \"react\";\r\n\r\nclass Input extends Component {\r\n  state = {\r\n    text: \"\"\r\n  };\r\n\r\n  onChange(e) {\r\n    this.setState({ text: e.target.value });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    this.setState({ text: \"\" });\r\n    this.props.onSendMessage(this.state.text);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Input\">\r\n        <form onSubmit={e => this.onSubmit(e)}>\r\n          <input\r\n            onChange={e => this.onChange(e)}\r\n            value={this.state.text}\r\n            id=\"placeholder\"\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            autofocus=\"true\"\r\n          />\r\n          <button id=\"send\">Send</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Input;\r\n","import React, { Component } from \"react\";\r\nimport \"./chat.css\";\r\nimport Messages from \"./Messages\";\r\nimport Input from \"./Input\";\r\nimport { resolve } from \"path\";\r\nimport firebase from \"firebase\";\r\nimport { withRouter } from \"react-router\";\r\nimport helperfunctions from \"../helperfunctions\";\r\nimport { timeout } from \"q\";\r\nimport TopBar from \"../TopBar\";\r\nimport { minHeight } from \"@material-ui/system\";\r\n\r\n\r\n// Current Issues ----\r\n// Refresh does not work well\r\n// the data is temporary, need to change to user data\r\n// need to fix the this.userData and how to understand it.\r\n\r\nfunction randomColor() {\r\n  return \"#\" + Math.floor(Math.random() * 0xffffff).toString(16);\r\n}\r\n\r\nclass Chat extends Component {\r\n  state = {\r\n    messages: [],\r\n    member: {\r\n      username: \"ABCD\",\r\n      color: randomColor()\r\n    }\r\n  };\r\n\r\n  async componentDidMount() {\r\n    //verify user is logged in before displaying page\r\n    this.updateUserName();\r\n    this.getUsernameOfOtherUser();\r\n\r\n    await firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").val();     \r\n      if (retrievedDMUsers != undefined || retrievedDMUsers != null) {\r\n        for (let i = 0; i < Object.keys(retrievedDMUsers).length; i++) {\r\n          this.addButton(Object.keys(retrievedDMUsers)[i]);\r\n        }\r\n      }\r\n\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        for (let i = 0; i < retrievedUnseenDMUsers.length; i++) {\r\n          this.changeButtonColor(retrievedUnseenDMUsers[i], \"#fff000\");\r\n        }\r\n      }\r\n    });\r\n\r\n    var buttons = document.getElementsByTagName('button');\r\n    for (var i = 0, len = buttons.length; i < len; i++) {\r\n      if (buttons[i].innerHTML != \"Send\" && buttons[i].innerHTML != \"Search\" && buttons[i].id != \"profile\" && buttons[i].id != \"Home\" && buttons[i].id != \"chat\") {\r\n        buttons[i].addEventListener('click', mouseEvt => {\r\n          this.userButtonClick(mouseEvt.toElement.id);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  addButton(username) {\r\n    var ul = document.getElementById(\"userlist\");\r\n    var button = ul.appendChild(document.createElement(\"button\"));\r\n    button.id = username;\r\n    button.innerHTML = username;\r\n    button.outerHTML = button.outerHTML + \"<br></br>\";\r\n    console.log(\"testcolor\");\r\n    button.style.background = \"#ff0000\";\r\n  }\r\n\r\n  changeButtonColor(buttonID, color) {\r\n    var button = document.getElementById(buttonID);\r\n    if (button == null) {\r\n      console.log(\"add new button\");\r\n      var ul = document.getElementById(\"userlist\");\r\n      var button = ul.appendChild(document.createElement(\"button\"));\r\n      button.id = buttonID;\r\n      button.innerHTML = buttonID;\r\n      button.outerHTML = button.outerHTML + \"<br></br>\";\r\n      console.log(color);\r\n      var property=document.getElementById(buttonID);\r\n      property.style.backgroundColor = color;\r\n      var buttons = document.getElementsByTagName('button');\r\n      for (var i = 0, len = buttons.length; i < len; i++) {\r\n        if (buttons[i].innerHTML == buttonID) {\r\n          buttons[i].addEventListener('click', mouseEvt => {\r\n            console.log(\"testclick\");\r\n            this.userButtonClick(mouseEvt.toElement.id);\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      button.style.background = color;\r\n    }\r\n  }\r\n\r\n  async getUsersBlocked(inputUsername) {\r\n    var blockedFrom = [];\r\n    await firebase.database().ref().once('value', (snapshot) => {\r\n      let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n      let otherUIDRetrieved = mapUsernameToUID[inputUsername];\r\n      if(snapshot.child(\"users\").child(otherUIDRetrieved).hasChild(\"blockedUsers\") === true)\r\n      {\r\n        blockedFrom = snapshot.child(\"users\").child(otherUIDRetrieved).child(\"blockedUsers\").val();\r\n      }\r\n    });\r\n    return blockedFrom;\r\n  }\r\n\r\n  async userButtonClick(username) {  \r\n    if (document.getElementById(\"messageslist\") == undefined || document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n    \r\n    this.props.location.state.dmUsername = username; \r\n    var currBlocked = await helperfunctions.getBlockedUser();\r\n    var blockedFrom = await this.getUsersBlocked(username);\r\n    if(currBlocked.includes(username))\r\n    {\r\n      this.setPlaceholderInputBar(\"You are blocking \" + username);\r\n      document.getElementById(\"placeholder\").disabled = true;\r\n      document.getElementById(\"send\").disabled = true;\r\n    } else if (blockedFrom.includes(this.userData.username)) {\r\n      this.setPlaceholderInputBar(\"You are being blocked by \" + username);\r\n      document.getElementById(\"placeholder\").disabled = true;\r\n      document.getElementById(\"send\").disabled = true;\r\n    } else {\r\n      this.setPlaceholderInputBar(\"Send message to \" + username);\r\n      document.getElementById(\"placeholder\").disabled = false;\r\n      document.getElementById(\"placeholder\").focus();\r\n      document.getElementById(\"send\").disabled = false;\r\n    }\r\n\r\n    console.log(\"userbuttonclick() \" + username);\r\n    this.props.location.state.dmUsername = username;\r\n    this.props.location.state.topBar = false;\r\n    this.currentRetrievedData = null;\r\n    this.changeButtonColor(username, \"orangered\");\r\n    this.removeUserFromUnseenList(username);\r\n    this.getUsernameOfOtherUser();\r\n    this.fillWithPreviousMessages();\r\n    this.listenToPersistantMessages();\r\n    this.listenToUsersBlockedFrom();\r\n  }\r\n\r\n  async removeUserFromUnseenList(username) {\r\n    firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        if (retrievedUnseenDMUsers.indexOf(username) != -1) {\r\n          retrievedUnseenDMUsers.splice(retrievedUnseenDMUsers.indexOf(username), 1);\r\n          firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async getUsernameOfOtherUser() {\r\n    await firebase.database().ref().once('value', (snapshot)  => {\r\n      let mapUsernameToUID = snapshot.child(\"mapUsernameToUID\").val();\r\n      let otherUIDRetrieved = mapUsernameToUID[this.props.location.state.dmUsername];\r\n      this.otherUID = otherUIDRetrieved;\r\n    });\r\n  }\r\n\r\n  async updateUserName() {\r\n    if (document.getElementById(\"messageslist\") == undefined || document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.auth().onAuthStateChanged(async user => {\r\n      if (!user) {\r\n        this.props.history.push({\r\n          pathname: \"/login\"\r\n        });\r\n        return null;\r\n      } else {\r\n        var loggedIn = true;\r\n        var user = firebase.auth().currentUser;\r\n        this.userData = await helperfunctions.getUserdataOfUser(\r\n          user.uid,\r\n          loggedIn\r\n        );\r\n        this.state.member.username = this.userData.username;\r\n        this.state.member.id = this.userData.username;\r\n        if (document.getElementById(\"messageslist\") != undefined && document.getElementById(\"messageslist\") != null) {\r\n          if (this.props.location.state.topBar == false) {\r\n            this.fillWithPreviousMessages();\r\n            this.listenToPersistantMessages();\r\n            this.setPlaceholderInputBar(\"Send message to \" + this.props.location.state.dmUsername);\r\n            document.getElementById(\"placeholder\").disabled = false;\r\n            document.getElementById(\"send\").disabled = false;\r\n            this.listenToUsersBlockedFrom();\r\n          } else {\r\n            this.setPlaceholderInputBar(\"To send a message, click on a username\");\r\n            document.getElementById(\"placeholder\").disabled = true;\r\n            document.getElementById(\"send\").disabled = true;\r\n          }\r\n          this.listenToUnseenUsersDM();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let otherUID = \"\";\r\n    let currentRetrievedData = [];\r\n\r\n    this.userButtonClick = this.userButtonClick.bind(this);\r\n  }\r\n\r\n  render() {\r\n      return (\r\n      <div className=\"main-body\">\r\n\r\n        <TopBar userData={this.userData} />\r\n\r\n        <div className=\"inner-body\">\r\n        <div className=\"body\" style={{minWidth:\"300px\"}}>\r\n        <ul id=\"userlist\">\r\n        \r\n        </ul>\r\n        </div>\r\n\r\n        <div className=\"body\" style={{width:\"800px\", height:\"600px\"}}>\r\n        <Messages\r\n          messages={this.state.messages}\r\n          currentMember={this.state.member}\r\n        />\r\n        <Input onSendMessage={this.onSendMessage} />\r\n        </div>\r\n        </div>\r\n\r\n        \r\n      </div>\r\n    );\r\n  }\r\n\r\n  setPlaceholderInputBar(text) {\r\n    if (document.getElementById(\"messageslist\") == undefined || document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n    document.getElementById(\"placeholder\").placeholder = text;\r\n  }\r\n\r\n  fillWithPreviousMessages() {\r\n    if (document.getElementById(\"messageslist\") == undefined || document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    document.getElementById(\"messageslist\").innerHTML = \"\";\r\n    firebase.database().ref().once('value', (snapshot) => {\r\n      var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).val();\r\n      this.currentRetrievedData = retrievedData;\r\n\r\n      if (retrievedData != undefined || retrievedData != null) {\r\n        for (let i = 0; i < retrievedData.length; i++) {\r\n          let username = retrievedData[i].substr(0, retrievedData[i].indexOf(','));\r\n          let message = retrievedData[i].substr(retrievedData[i].indexOf(',') + 1, retrievedData[i].length - 1 - retrievedData[i].indexOf(','));\r\n\r\n          if (username == this.userData.username) {\r\n            this.appendMessageFromMe(message, false);\r\n          } else {\r\n            this.appendMessageFromOtherUser(message);\r\n          }\r\n        }\r\n      }\r\n\r\n      setTimeout(function() {\r\n        if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n          var element = document.getElementById(\"messageslist\");\r\n          element.scrollTop = element.scrollHeight;\r\n        }\r\n      }, 200);\r\n    });\r\n  }\r\n\r\n  appendMessageFromMe(inputText, adjustData) {\r\n    const messages = this.state.messages;\r\n    messages.push({ member: this.state.member, text: inputText });\r\n    this.setState({ messages });\r\n\r\n    if (adjustData) {\r\n      if (this.currentRetrievedData == undefined || this.currentRetrievedData == null) {\r\n        this.currentRetrievedData = [this.userData.username + \",\" + inputText];\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"persistantmessages\").child(this.userData.username).set({\"0\": this.userData.username + \",\" + inputText});\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).set({\"0\": this.userData.username + \",\" + inputText});\r\n      } else {\r\n        this.currentRetrievedData.push(this.userData.username + \",\" + inputText);\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"persistantmessages\").child(this.userData.username).set(this.currentRetrievedData);\r\n        firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).set(this.currentRetrievedData);\r\n      }\r\n    }\r\n  }\r\n\r\n  appendMessageFromOtherUser(inputText) {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    let member2 = {\r\n      username: this.props.location.state.dmUsername,\r\n      color: randomColor(),\r\n      id: this.props.location.state.dmUsername\r\n    };\r\n    const messages = this.state.messages;\r\n    messages.push({ member: member2, text: inputText });\r\n    this.setState({ messages });\r\n\r\n    setTimeout(function() {\r\n      if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n        var element = document.getElementById(\"messageslist\");\r\n        element.scrollTop = element.scrollHeight;\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  listenToPersistantMessages() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', (snapshot) => {\r\n        \r\n        if (document.getElementById(\"messageslist\") == null) {\r\n          return;\r\n        }\r\n\r\n        var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"persistantmessages\").child(this.props.location.state.dmUsername).val();\r\n        if (this.currentRetrievedData == null || retrievedData == null || this.currentRetrievedData[this.currentRetrievedData.length - 1] == retrievedData[retrievedData.length - 1]) {\r\n          return;\r\n        }\r\n        \r\n        this.currentRetrievedData = retrievedData;\r\n        if (retrievedData != undefined || retrievedData != null) {\r\n          if (this.userData.username != retrievedData[retrievedData.length - 1].substr(0, retrievedData[retrievedData.length - 1].indexOf(','))) {\r\n            this.appendMessageFromOtherUser(retrievedData[retrievedData.length - 1].substr(retrievedData[retrievedData.length - 1].indexOf(',') + 1, retrievedData[retrievedData.length - 1].length - 1 - retrievedData[retrievedData.length - 1].indexOf(',')));\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  listenToUsersBlockedFrom() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', async (snapshot) => {\r\n        \r\n        if (document.getElementById(\"messageslist\") == null) {\r\n          return;\r\n        }\r\n        \r\n        var retrievedData = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"usersBlockedFrom\").val();\r\n        var retrievedData2 = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"blockedUsers\").val();\r\n        if ((retrievedData == undefined || retrievedData == null) && (retrievedData2 == undefined || retrievedData2 == null)) {\r\n          this.setPlaceholderInputBar(\"Send message to \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = false;\r\n          document.getElementById(\"placeholder\").focus();\r\n          document.getElementById(\"send\").disabled = false;\r\n          return;\r\n        }\r\n\r\n        var currBlocked = await helperfunctions.getBlockedUser();\r\n        var blockedFrom = await this.getUsersBlocked(this.props.location.state.dmUsername);\r\n        if(currBlocked.includes(this.props.location.state.dmUsername))\r\n        {\r\n          this.setPlaceholderInputBar(\"You are blocking \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = true;\r\n          document.getElementById(\"send\").disabled = true;\r\n        } else if (blockedFrom.includes(this.userData.username)) {\r\n          this.setPlaceholderInputBar(\"You are being blocked by \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = true;\r\n          document.getElementById(\"send\").disabled = true;\r\n        } else {\r\n          this.setPlaceholderInputBar(\"Send message to \" + this.props.location.state.dmUsername);\r\n          document.getElementById(\"placeholder\").disabled = false;\r\n          document.getElementById(\"placeholder\").focus();\r\n          document.getElementById(\"send\").disabled = false;\r\n        }\r\n       \r\n      });\r\n    });\r\n  }\r\n\r\n  listenToUnseenUsersDM() {\r\n    if (document.getElementById(\"messageslist\") == null) {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").on('value', (snapshot) => {\r\n      firebase.database().ref().once('value', (snapshot) => {\r\n\r\n        if (document.getElementById(\"messageslist\") == null) {\r\n          return;\r\n        }\r\n\r\n        var retrievedUnseenDMUsers = snapshot.child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").val();     \r\n        if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n          for (let i = 0; i < retrievedUnseenDMUsers.length; i++) {\r\n            console.log(this.props.location.state.dmUsername);\r\n            if (this.props.location.state.dmUsername != retrievedUnseenDMUsers[i]) {\r\n              console.log(\"listenToUnseenUsersDM changeButtonColor of : \" + retrievedUnseenDMUsers[i]);\r\n              this.changeButtonColor(retrievedUnseenDMUsers[i], \"#fff000\");\r\n            } else {\r\n              if (retrievedUnseenDMUsers.indexOf(this.props.location.state.dmUsername) != -1) {\r\n                retrievedUnseenDMUsers.splice(retrievedUnseenDMUsers.indexOf(this.props.location.state.dmUsername), 1);\r\n                firebase.database().ref().child(\"users\").child(firebase.auth().currentUser.uid).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  onSendMessage = message => {\r\n\r\n    if (message == \"\") {\r\n      return;\r\n    }\r\n\r\n    firebase.database().ref().once('value', (snapshot)  => {\r\n      var retrievedUnseenDMUsers = snapshot.child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").val();     \r\n      if (retrievedUnseenDMUsers != undefined || retrievedUnseenDMUsers != null) {\r\n        if (!retrievedUnseenDMUsers.includes(this.userData.username)) {\r\n          retrievedUnseenDMUsers.push(this.userData.username);\r\n          firebase.database().ref().child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").set(retrievedUnseenDMUsers);\r\n        }\r\n      } else {\r\n        firebase.database().ref().child(\"users\").child(this.otherUID).child(\"unseenUsersDM\").set({\"0\": this.userData.username });\r\n      }\r\n    });\r\n\r\n    this.changeButtonColor(this.props.location.state.dmUsername, \"orangered\");\r\n\r\n    this.appendMessageFromMe(message, true);\r\n\r\n    setTimeout(function() {\r\n      if (document.getElementById(\"messageslist\").innerHTML != \"\") {\r\n        var element = document.getElementById(\"messageslist\");\r\n        element.scrollTop = element.scrollHeight;\r\n      }\r\n    }, 200);\r\n  };\r\n}\r\n\r\nexport default withRouter(Chat);\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router-dom\"\r\n\r\nimport Home from \"./Home\";\r\nimport Login from \"./LogIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport LandingPage from \"./LandingPage/index\";\r\nimport ProfilePage from \"./ProfilePage\";\r\nimport ProfilePageRouting from \"./ProfilePageRouting\";\r\nimport DeleteAccountAuthentication from \"./DeleteAccountAuthentication\"\r\nimport Chat from \"./Chat\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport PageNotFound from \"./PageNotFound\"\r\n\r\ntoast.configure();\r\n\r\nconst App = () => {\r\n  const notify = () => toast(\"Wow so easy !\");\r\n  return (\r\n    <Switch>\r\n    \r\n        <Route exact path=\"/\" component={Login} />\r\n        <Route exact path=\"/login\" component={Login} />\r\n        <Route exact path=\"/signup\" component={SignUp} />\r\n        <Route exact path=\"/landing\" component={LandingPage} />\r\n        <Route path=\"/profile\" component={ProfilePage} />\r\n        <Route path=\"/redirecttoaccount\" component={ProfilePageRouting} />\r\n        <Route path=\"/DeleteAccount\" component={DeleteAccountAuthentication} />\r\n        <Route path=\"/chat\" component={Chat} />\r\n\r\n     \r\n\r\n        <Route component={PageNotFound} />\r\n\r\n  \r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport AlertTemplate from 'react-alert-template-basic'\r\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert'\r\n\r\n\r\n\r\n//ReactDOM.render(<App />, document.getElementById('root'));\r\nReactDOM.render((\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  ), document.getElementById('root'));\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/twisster_logo.d26fb7f2.png\";"],"sourceRoot":""}