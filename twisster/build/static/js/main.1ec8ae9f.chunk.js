(window.webpackJsonpq=window.webpackJsonpq||[]).push([[0],{145:function(e,t,n){},172:function(e,t,n){e.exports=n(350)},177:function(e,t,n){},179:function(e,t,n){},193:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},335:function(e,t,n){},336:function(e,t){e.exports="data:image/png;base64,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"},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},350:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(20),o=n.n(s),c=(n(177),n(17)),i=n(3),l=n.n(i),u=n(6),d=n(10),h=n(8),m=n(13),f=n(12),p=n(14),g=(n(179),function(){return r.a.createElement("div",{className:"inner-body"},r.a.createElement("label",{className:"top-bar-twisster"},"Twistter"))}),b=n(1),v=n.n(b),k=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"top-bar"},r.a.createElement(g,null))}}]),t}(r.a.Component),U=Object(c.f)(k),E=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).goLogIn=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.push({pathname:"/login"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.goSignUp=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.push({pathname:"/signup"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("h1",null,"Home"),r.a.createElement("form",null,r.a.createElement("button",{onClick:this.goLogIn},"Login"),r.a.createElement("button",{onClick:this.goSignUp},"Signup")))}}]),t}(a.Component),w=(Object(c.f)(E),n(9)),y=v.a.initializeApp({apiKey:"AIzaSyBz9SOr8DjfgATYDORi2l185jmlbzKLsKk",authDomain:"twistter.firebaseapp.com",databaseURL:"https://twistter.firebaseio.com",projectId:"twistter",storageBucket:"gs://twistter.appspot.com/",messagingSenderId:"71618548828"}),O=(n(193),n(60)),x=n(75),j=n.n(x),I=function(e){return r.a.createElement("img",{className:"logo-twisster",src:j.a},e.children)},B=function(e){return r.a.createElement("label",{className:"name-twisster"},"twisster")},D=function(e){return r.a.createElement("div",{className:"login-prompt"},e.children)},C=function(e){return r.a.createElement("input",{name:"email",className:"login-textbox",placeholder:"Email/Username",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Email/Username"}},e.children)},T=function(e){return r.a.createElement("input",{name:"password",className:"password-textbox",type:"password",placeholder:"Password",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Password"},focus:!0},e.children)},A=function(e){var t=e.onSubmit,n=e.onClick;return r.a.createElement("div",{className:"main-body"},r.a.createElement("div",{className:"body"},r.a.createElement(D,null,r.a.createElement(I,null),r.a.createElement(B,null),r.a.createElement("form",{onSubmit:t},r.a.createElement(C,null),r.a.createElement(T,null),r.a.createElement(O.a,{className:"login-button",variant:"outline-dark",type:"submit"},r.a.createElement("span",null,"Login "))),r.a.createElement(O.a,{className:"signup-button",variant:"outline-dark",type:"submit",onClick:n},r.a.createElement("span",null,"Sign Up ")))))},M=n(18),L=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleLogIn=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,s,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.elements,r=a.email,s=a.password,e.prev=2,o=!0,e.next=6,y.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();if(1!=r.value.includes("@"))void 0==t[r.value]&&(o=!1),c=t[r.value];else for(var n in c=r.value,o=!1,t)if(t[n]==r.value){o=!0;break}}));case 6:if(o){e.next=10;break}return Object(M.b)("User Account does not exist"),Object(M.b)("User Account does not exist",{containerId:"B"}),e.abrupt("return");case 10:return e.next=12,y.auth().signInWithEmailAndPassword(c,s.value);case 12:if(n.user=e.sent,n.user||Object(M.b)("Error"),n.user.user.emailVerified){e.next=18;break}return Object(M.b)("email is not verified! resending verification link..."),v.a.auth().currentUser.sendEmailVerification({url:"http://localhost:3000/login",handleCodeInApp:!0}).then((function(){console.log("sent verification email"),Object(M.b)("sent verification email")})).catch((function(e){Object(M.b)(e)})),e.abrupt("return");case 18:n.props.history.push({pathname:"/landing"}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),Object(M.b)(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}(),n.goSignUp=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.push({pathname:"/signup"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleLogIn=n.handleLogIn.bind(Object(w.a)(n)),n.goSignUp=n.goSignUp.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,{onSubmit:this.handleLogIn,onClick:this.goSignUp}))}}]),t}(a.Component),P=Object(c.f)(L),F=(n(196),function(e){return r.a.createElement("img",{className:"logo-twisster",src:j.a},e.children)}),S=function(e){return r.a.createElement("label",{className:"name-twisster"},"twisster")},N=function(e){return r.a.createElement("input",{name:"email",className:"s_email-textbox",placeholder:"Email",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Email"}},e.children)},q=function(e){return r.a.createElement("div",null,r.a.createElement("label",{className:"return-login"},"Already a member?",r.a.createElement("button",{type:"submit",className:"return-login_b",onClick:e.onClick},"Login")))},R=function(e){return r.a.createElement("input",{name:"username",className:"s_username-textbox",placeholder:"Username",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Username"}},e.children)},Q=function(e){return r.a.createElement("input",{name:"password",type:"password",className:"s_password-textbox",placeholder:"Password",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Password"}},e.children)},H=function(e){return r.a.createElement("div",{className:"s_login-prompt"},e.children)},z=function(e){var t=e.onSubmit,n=e.onClick;return r.a.createElement(H,null,r.a.createElement("form",{onSubmit:t},r.a.createElement(F,null),r.a.createElement(S,null),r.a.createElement(N,null),r.a.createElement(R,null),r.a.createElement(Q,null),r.a.createElement(O.a,{className:"s_signup-button",variant:"outline-dark",type:"submit"},r.a.createElement("span",null,"Sign Up "))),r.a.createElement(q,{onClick:n}))},K=(n(44),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleSignUp=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,s,o,c,i,u,d,h,m,f,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.elements,r=a.email,s=a.username,o=a.password,e.prev=2,c=!1,e.next=6,v.a.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();void 0!=t&&void 0!=t[s.value]&&(Object(M.b)("Username already exists"),c=!0)}));case 6:if(1!=c){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,v.a.auth().createUserWithEmailAndPassword(r.value,o.value);case 10:e.sent,(i={})[s.value]=r.value,v.a.database().ref().child("mapUsernameToEmail").update(i),(u={})[s.value]=v.a.auth().currentUser.uid,v.a.database().ref().child("mapUsernameToUID").update(u),(d={})[v.a.auth().currentUser.uid]=s.value,v.a.database().ref().child("mapUIDtoUsername").update(d),h={url:"http://localhost:3000/login",handleCodeInApp:!0},v.a.auth().currentUser.sendEmailVerification(h).then((function(){console.log("sent verification email")})).catch((function(e){Object(M.b)(e.message)})),m=new Date,f=m.getTime(),p=v.a.database(),p.ref().child("users").child(v.a.auth().currentUser.uid).set({email:r.value,signupTimestamp:f,picture:"default.jpg"}),v.a.auth().signOut(),n.props.history.push("/login"),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(2),Object(M.b)(e.t0.message);case 34:case"end":return e.stop()}}),e,null,[[2,31]])})));return function(t){return e.apply(this,arguments)}}(),n.goLogin=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.push({pathname:"/login"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.goLogin=n.goLogin.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-body"},r.a.createElement(z,{onSubmit:this.handleSignUp,onClick:this.goLogin}))}}]),t}(a.Component)),G=Object(c.f)(K),V=(n(197),function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tweet-body"},this.props.children)}}]),t}(r.a.Component)),J=(n(198),n(389)),X=n(151),W=n.n(X),Y=n(391),Z=n(387),_=n(386),$=n(383),ee=n(388),te=n(392),ne=n(152),ae=n.n(ne),re=n(162),se=n(16),oe=(Object(re.a)({palette:{primary:$.a,secondary:{main:"#1F3648"}}}),function(e){return r.a.createElement(he,null,r.a.createElement("div",{className:"inner-body",style:{height:"80%"}},r.a.createElement(me,{image:e.image}),r.a.createElement("div",{className:"body",style:{flex:"0 0 456px"}},r.a.createElement("div",{className:"inner-body"},r.a.createElement(pe,{name:e.name,id:"name"}),r.a.createElement(fe,{handle:e.handle})),r.a.createElement("div",{className:"body"},r.a.createElement(de,{id:e.contentId,placeholder:"How are you feeling today?",rows:"5",multiline:!0,margin:"dense",variant:"standard",color:"primary"}),r.a.createElement(ce,{disableUnderline:!0,disabled:!0,id:e.showTopicsId,label:"Added Topics",placeholder:"Added Topics Show Up Here",onSubmit:e.addTopic,variant:"standard"})),r.a.createElement("div",{className:"body",style:{minHeight:"48px"}},r.a.createElement("div",{className:"inner-body"},r.a.createElement(ie,{id:e.addTopicsId,style:{width:"300px"},placeholder:"Add Topics Here",endAdornment:r.a.createElement(te.a,{position:"end"},r.a.createElement(le,{"aria-label":"add",onClick:e.addTopic},r.a.createElement(W.a,null)))}),r.a.createElement(ue,{size:"large",variant:"extended",onClick:e.submitMicroblog,color:"secondary"},"Post",r.a.createElement(ae.a,{style:{margin:"0px 10px 0px"}})))))))}),ce=Object(se.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{"&::placeholder":{color:"gray"},color:"white"}}}))(_.a),ie=Object(se.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{color:"white"}}}))(_.a),le=Object(se.a)((function(e){return{root:{backgroundColor:"transparent"}}}))(Z.a),ue=Object(se.a)((function(e){return{root:{backgroundColor:ee.a[800],top:"-20px",left:"2%"}}}))(J.a),de=Object(se.a)((function(e){return{root:{margin:"14px 12px 4px"},"&::placeholder":{fontStyle:"italic"},multiline:{input:{color:"white"}}}}))(Y.a),he=function(e){return r.a.createElement("div",{className:"new-tweet-body"},e.children)},me=function(e){return r.a.createElement("img",{src:e,id:"img3",alt:"Logo",className:"picture"})},fe=function(e){return r.a.createElement("div",{className:"handle"},e.handle)},pe=function(e){return r.a.createElement("div",{className:"name"},e.name)},ge=n(21),be=function(){function e(t,n,a){Object(d.a)(this,e),this.username=t,this.viewingOwnProfile=a,this.loggedIn=n}return Object(h.a)(e,[{key:"getUsername",value:function(){return this.username}},{key:"getUid",value:function(){return this.uid}}]),e}(),ve=n(49),ke={retrieveUserUid:function(e){console.log("Entered retrieveUserUid");var t=v.a.database.ref().child("mapUsernameToUid")[e];return console.log("Exited retrieveUserUid"),t},retrieveUserEmail:function(e){console.log("Entered retrieveUserEmail");var t=v.a.database().ref().child("mapUsernameToEmail")[e];return console.log("Exited retrieveUserEmail"),t},retrieveUsername:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered retrieveUsername"),e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUIDtoUsername").val();n=a[t]}));case 3:return console.log("Exited retrieveUsername"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllUsers:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUIDtoUsername").val();e.child("users").forEach((function(e){var r=a[e.key];r!==t&&n.push(r)}))}));case 3:return Object(ge.resolve)("done"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllOtherUsers:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v.a.database().ref().once("value",(function(e){var n=e.child("mapUIDtoUsername").val();e.child("users").forEach((function(e){var a=n[e.key];t.push(a)}))}));case 3:return Object(ge.resolve)("done"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addMicroBlogToCurrentUser:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,s,o,c,i,u,d,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",console.log("Entered addMicroBlogToCurrentUser"),r=v.a.auth().currentUser.uid,e.next=5,v.a.database().ref().once("value",(function(e){var t=e.child("mapUIDtoUsername").val();a=t[r],console.log("USERNAME:",a)}));case 5:for(s=new Date,o=s.getTime(),t.length>250&&console.log("ERROR: content of microblog cannot exceed 250 characters --\x3e will not store in firebase"),c=[],i=0;i<n.length;i++)c.push({topics:n[i],timestamp:o});return e.next=12,v.a.database().ref().once("value",(function(e){var t=e.child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").val();if(console.log("TYPE:",typeof t),null==t||0===t.length)v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").set(c);else{for(var n=0;n<c.length;n++){for(var a=0;a<t.length&&t[a].topics!=c[n].topics;a++);a==t.length&&t.push(c[n])}v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").set(t)}}));case 12:for(u=[],i=0;i<n.length;i++)u.push(n[i]);return 0,(d=[]).push("hello"),h={userLikes:d,id:a+o,user:a,content:t,topics:u,timestamp:o,numLikes:0},e.next=20,v.a.database().ref().once("value",(function(e){var t=e.child("users").child(v.a.auth().currentUser.uid).child("Microblogs").val();null==t||0===t.length?v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("Microblogs").set({0:h}):(t.push(h),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("Microblogs").set(t))}));case 20:return Object(ge.resolve)("done"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addQuotedMicroblogToCurrentUser:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,s,o,c,i,u,d,h,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered addQuotedMicroblogToCurrentUser"),r="",s=v.a.auth().currentUser.uid,e.next=5,v.a.database().ref().once("value",(function(e){var t=e.child("mapUIDtoUsername").val();r=t[s],console.log("USERNAME:",r)}));case 5:for(o=new Date,c=o.getTime(),n.length>250&&console.log("ERROR: content of microblog cannot exceed 250 characters --\x3e will note store in firebase"),i=[],u=0;u<a.length;u++)i.push({topics:a[u],timestamp:c});return e.next=12,v.a.database().ref().once("value",(function(e){var t=e.child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").val();if(console.log("TYPE:",typeof t),null==t||0===t.length)v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").set(i);else{for(var n=0;n<i.length;n++){for(var a=0;a<t.length&&t[a].topics!=i[n].topics;a++);a==t.length&&t.push(i[n])}v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("writtenTopics").set(t)}}));case 12:for(d=[],u=0;u<a.length;u++)d.push(a[u]);return 0,(h=[]).push("hello"),m={},m=void 0!==t.userLikes?{quotedUserLikes:h,quotedId:r+c,quotedUser:r,quotedContent:n,quotedTopics:d,timestamp:c,quotedNumLikes:0,quote:!0,userLikes:t.userLikes,id:t.id,user:t.name,content:t.tweet,topics:t.topics,numLikes:t.numLikes}:{quotedUserLikes:h,quotedId:r+c,quotedUser:r,quotedContent:n,quotedTopics:d,timestamp:c,quotedNumLikes:0,quote:!0,id:t.id,user:t.name,content:t.tweet,topics:t.topics,numLikes:t.numLikes},e.next=21,v.a.database().ref().once("value",(function(e){var t=e.child("users").child(v.a.auth().currentUser.uid).child("Microblogs").val();null==t||0===t.length?v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("Microblogs").set({0:m}):(t.push(m),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("Microblogs").set(t))}));case 21:Object(ge.resolve)("done"),console.log("Exited addQuotedMicroblogToCurrentUser");case 23:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),likeMicroblog:function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered likeMicroblog"),e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t.name];e.child("users").child(a).child("Microblogs").forEach((function(e){var r=0,s=[];e.val().id===t.id&&(void 0===e.val().userLikes?s.push(n):!1===e.val().userLikes.includes(n)?0===e.val().numLikes||e.val().userLikes.includes("hello")?(s=e.val().userLikes)[0]=n:(s=e.val().userLikes).push(n):!0===e.val().userLikes.includes(n)&&(s=e.val().userLikes),r=s.length,v.a.database().ref().child("users").child(a).child("Microblogs").child(e.key).update({userLikes:s}),v.a.database().ref().child("users").child(a).child("Microblogs").child(e.key).update({numLikes:r}))}))}));case 3:Object(ge.resolve)("done"),console.log("Exited likeMicroblog");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),unlikeMicroblog:function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entered unlikeMicroblog"),e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t.name];e.child("users").child(a).child("Microblogs").forEach((function(e){var r=0,s=[];if(e.val().id===t.id){if(void 0===e.val().userLikes)r=0;else if(!0===e.val().userLikes.includes(n)){var o=(s=e.val().userLikes).indexOf(n);s.splice(o,1)}r=s.length,v.a.database().ref().child("users").child(a).child("Microblogs").child(e.key).update({userLikes:s}),v.a.database().ref().child("users").child(a).child("Microblogs").child(e.key).update({numLikes:r})}}))}));case 3:Object(ge.resolve)("done"),console.log("Exited unlikeMicroblog");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getBio:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t],r=e.child("users").child(a).child("bio").val();if(void 0!=r)return n=r,r}));case 2:return e.sent,Object(ge.resolve)("done"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchImageForCurrentUser:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernametoUid").child(t).val();n=e.child("users").child(a).child("picture").val()}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getFollowersAndFollowing:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t],r=[];e.child("users").child(a).child("following").forEach((function(e){r.push(e.key)}));var s=e.child("users").child(a).child("followers").val(),o="";if(null==s)o="";else{for(var c=0;c<s.length-1;c++)o+=s[c]+", ";o+=s[s.length-1]}var i="";if(null==r||void 0===r||0===r.length)i="";else{for(c=0;c<r.length-1;c++)i+=r[c]+", ";i+=r[r.length-1]}n={followers:o,following:i}}));case 2:return Object(ge.resolve)("done"),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getFollowersAndFollowingForCurrentUser:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){e.child("mapUsernameToUID").val();var n=v.a.auth().currentUser.uid,a=[];e.child("users").child(n).child("following").forEach((function(e){a.push(e.key)}));var r=e.child("users").child(n).child("followers").val(),s="";if(null==r)s="";else{for(var o=0;o<r.length-1;o++)s+=r[o]+", ";s+=r[r.length-1]}var c="";if(null==a||void 0===a||0===a.length)c="";else{for(o=0;o<a.length-1;o++)c+=a[o]+", ";c+=a[a.length-1]}t={followers:s,following:c}}));case 2:return Object(ge.resolve)("done"),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),followUserIAmViewing:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var n=v.a.auth().currentUser.uid,a=e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid],r=t,s=e.child("mapUsernameToUID").val()[r],o=(new Date).getTime();v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("followingTimestamp").child(r).set(o);var c=e.child("users").child(n).child("following").val(),i=e.child("users").child(s).child("followers").val();if(s!==n){var l;if(null==c||0==c.length)(l=[]).push("None"),!1===e.child("users").child(v.a.auth().currentUser.uid).child("following").hasChild(r)&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("following").child(r).set(l);else(l=[]).push("None"),!1===e.child("users").child(v.a.auth().currentUser.uid).child("following").hasChild(r)&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("following").child(r).set(l);if(null==i||0===i.length){var u=[];u.push(a),v.a.database().ref().child("users").child(s).child("followers").set(u)}else!1===i.includes(a)&&(i.push(a),v.a.database().ref().child("users").child(s).child("followers").set(i))}}));case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unfollowUserIAmViewing:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var n=e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid],a=t,r=e.child("mapUsernameToUID").val()[a],s=e.child("users").child(r).child("followers").val();if(null!=v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("following").child(a)&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("following").child(a).remove(),s.includes(n)){for(var o=[],c=0;c<s.length;c++)s[c]!==n&&o.push(s[c]);v.a.database().ref().child("users").child(r).child("followers").set(o)}}));case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addBlockedUser:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){v.a.auth().currentUser.uid;for(var n=e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid],a=[],r=0;r<t.length;r++)a.push(t[r]);var s=[];!0===e.child("users").child(v.a.auth().currentUser.uid).hasChild("blockedUsers")&&(s=e.child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").val());for(r=0;r<s.length;r++)a.includes(s[r])||a.push(s[r]);v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").set(a);for(r=0;r<t.length;r++){var o=e.child("mapUsernameToUID").val()[t[r]],c=[];!0===e.child("users").child(o).hasChild("usersBlockedFrom")&&(c=e.child("users").child(o).child("usersBlockedFrom").val()),c.includes(n)||c.push(n),v.a.database().ref().child("users").child(o).child("usersBlockedFrom").set(c)}}));case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeBlockedUser:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){v.a.auth().currentUser.uid;var n=e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid],a=[],r=[];!0===e.child("users").child(v.a.auth().currentUser.uid).hasChild("blockedUsers")&&(r=e.child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").val());for(var s=0;s<r.length;s++)t.includes(r[s])||a.push(r[s]);v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").set(a);for(s=0;s<t.length;s++){var o=e.child("mapUsernameToUID").val()[t[s]],c=[],i=[];!0===e.child("users").child(o).hasChild("usersBlockedFrom")&&(c=e.child("users").child(o).child("usersBlockedFrom").val());for(var l=0;l<c.length;l++)c[l]!==n&&i.push(c[l]);v.a.database().ref().child("users").child(o).child("usersBlockedFrom").set(i)}}));case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBlockedUser:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v.a.database().ref().once("value",(function(e){v.a.auth().currentUser.uid;!0===e.child("users").child(v.a.auth().currentUser.uid).hasChild("blockedUsers")&&(t=e.child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").val())}));case 3:return Object(ge.resolve)("done"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUsersBlockedFrom:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v.a.database().ref().once("value",(function(e){v.a.auth().currentUser.uid;!0===e.child("users").child(v.a.auth().currentUser.uid).hasChild("usersBlockedFrom")&&(t=e.child("users").child(v.a.auth().currentUser.uid).child("usersBlockedFrom").val())}));case 3:return Object(ge.resolve)("done"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addAndRemoveTopicsFromFollowedUser:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var r=v.a.auth().currentUser.uid,s=(e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid],t);e.child("mapUsernameToUID").val()[s];if(!1===e.child("users").child(r).child("following").hasChild(t));else{for(var o=[],c=0;c<n.length;c++)o.push(n[c]);for(c=0;c<a.length;c++)if(o.includes(a[c])){var i=o.indexOf(a[c]);i>-1&&o.splice(i,1)}v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("following").child(s).set(o)}}));case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),getFollowedAndUnfollowedTopics:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var a="";if(null!=v.a.auth().currentUser){a=v.a.auth().currentUser.uid;e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid]}var r=t,s=e.child("mapUsernameToUID").val()[r],o=e.child("users").child(s).child("writtenTopics").val(),c=[];if(null!=o&&void 0!==o)for(var i=0;i<o.length;i++)void 0!==o[i]&&c.push(o[i].topics);console.log("WRITTEN TOPICS",c);var l=[],u=[];if(""!==a){var d=e.child("users").child(a).child("following").child(r).val();if(null!=d&&0!==d.length)for(var h=0;h<d.length;h++)"None"!==d[h]&&l.push(d[h]);if(null!=c&&0!==c.length&&null!=l&&0!==l.length)for(var m=0;m<c.length;m++)!1===l.includes(c[m])&&void 0!==c[m]&&u.push(c[m]);else{for(m=0;m<c.length;m++)u.push(c[m]);l=[]}}console.log("FOLLOWED TOPICS",l),console.log("UNFOLLOWED TOPICS",u),n={followedTopicsList:l,unfollowedTopics:u}}));case 2:return Object(ge.resolve)("done"),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postCurrentUserBio:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("bio").set(t);case 2:Object(ge.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUserData:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.database().ref().child("mapUIDtoUsername").child(v.a.auth().currentUser.uid).remove(),v.a.database().ref().child("mapUsernameToEmail").child(t).remove(),v.a.database().ref().child("mapUsernameToUID").child(t).remove(),e.next=5,v.a.database().ref().once("value",(function(e){var a=e.child("users").child(v.a.auth().currentUser.uid).child("followers").val(),r=e.child("users").child(v.a.auth().currentUser.uid).child("following").val();for(var s in n=e.child("users").child(v.a.auth().currentUser.uid).child("picture").val(),a){console.log(a[s]);var o=e.child("mapUsernameToUID").child(a[s]).val();console.log(o),v.a.database().ref().child("users").child(o).child("following").child(t).remove()}for(var s in r){var c=e.child("mapUsernameToUID").child(s).val();console.log(c);var i=e.child("users").child(c).child("followers").val();for(var l in console.log(i),i)if(i[l]===t){console.log(l),v.a.database().ref().child("users").child(c).child("followers").child(l).remove();break}}}));case 5:0!=n.localeCompare("default.jpg")&&v.a.storage().ref().child(n).delete(),v.a.auth().currentUser.delete(),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).remove();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForUserTimeline:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val(),r=a[t];e.child("users").child(r).child("following").forEach((function(t){var s=t.key,o=t.val(),c=a[s],i=e.child("users").child(c).child("Microblogs").val(),l=e.child("users").child(r).child("followingTimestamp").val()[s],u=e.child("users").child(c).child("writtenTopics").val();if(void 0!=i||null!=i)for(var d=0;d<i.length;d++){var h=i[d],m=h.topics;if(void 0!=m||null!=m){for(var f=!1,p=0;p<m.length;p++)for(var g=0;g<u.length;g++)u[g].topics==m[p]&&u[g].timestamp==i[d].timestamp&&l<u[g].timestamp&&(i[d].topics[p]="/h"+i[d].topics[p],f=!0);if(f){n.push(h);continue}for(var b=0;b<m.length;b++)if(o.includes(m[b])){n.push(h);break}}}}))}));case 3:return Object(ge.resolve)("done"),n.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForCurrentUser:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t];n=e.child("users").child(a).child("Microblogs").val()})),null!=n&&0!==n.length&&n.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMicroblogsForUser:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t];n=e.child("users").child(a).child("Microblogs").val()}));case 2:return e.sent,Object(ge.resolve)("done"),null!=n&&0!==n.length&&n.sort((function(e,t){return e.timestamp>t.timestamp?-1:1})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserdataOfLoggedInUser:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0,v.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return e.next=3,ke.getUserdataOfUser(n.uid,!0);case 3:return t=e.sent,Object(ge.resolve)("done"),e.abrupt("return",t);case 8:console.log("null");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserdataOfUser:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var r=e.child("mapUIDtoUsername").val()[t];a=new be(r,n,!0)}));case 2:return Object(ge.resolve)("done"),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserdataOfUserDiff:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){a=new be(t,n,!0)}));case 2:return Object(ge.resolve)("done"),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ue=ke,Ee=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).microblogData=new Object,n.isQuoted=e.isQuoted,n.isQuoted&&(n.quotedMicroblog=e.quotedMicroblog,n.numOfMicroblog=e.numOfMicroblog),n.microblogPosted=e.microblogPosted,n.microblogData.name=e.username,n.microblogData.handle=e.username,n.microblogData.image="props.image",n.submitMicroblog=n.submitMicroblog.bind(Object(w.a)(n)),n.addTopic=n.addTopic.bind(Object(w.a)(n)),n.fetchImage=n.fetchImage.bind(Object(w.a)(n)),n.topics=[],n.numTopics=0,n.isQuoted?(n.addTopicsId="addTopicsQuoted"+n.numOfMicroblog,n.showTopicsId="showTopicsQuoted"+n.numOfMicroblog,n.contentId="contentQuoted"+n.numOfMicroblog):(n.addTopicsId="addTopics",n.showTopicsId="showTopics",n.contentId="content"),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"addTopic",value:function(e){""!=document.getElementById(this.addTopicsId).value&&","!=document.getElementById(this.addTopicsId).value&&(this.topics.push(document.getElementById(this.addTopicsId).value),""==document.getElementById(this.showTopicsId).value?document.getElementById(this.showTopicsId).value=document.getElementById(this.addTopicsId).value:document.getElementById(this.showTopicsId).value=document.getElementById(this.showTopicsId).value+", "+document.getElementById(this.addTopicsId).value,document.getElementById(this.addTopicsId).value="")}},{key:"submitMicroblog",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById(this.contentId).value,console.log(n),!(n.length>250||n.length<=0)){e.next=6;break}Object(M.b)("Cannot post microblog. Make sure the content is 250 characters or less"),e.next=15;break;case 6:if(!this.isQuoted){e.next=11;break}return e.next=9,Ue.addQuotedMicroblogToCurrentUser(this.quotedMicroblog,n,this.topics);case 9:e.next=14;break;case 11:return e.next=13,Ue.addMicroBlogToCurrentUser(n,this.topics);case 13:this.microblogPosted();case 14:this.topics=[];case 15:document.getElementById(this.contentId).value="",document.getElementById(this.showTopicsId).value="",document.getElementById(this.contentId).value="";case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchImage",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchImage running"),e.next=3,v.a.database().ref().once("value",(function(e){console.log(n.microblogData.name),t=e.child("users").child(v.a.auth().currentUser.uid).child("picture").val(),console.log("was here hello world")}));case 3:return console.log(t),this.blogid,e.next=8,v.a.storage().ref().child(t).getDownloadURL().then((function(e){var t=e;document.querySelectorAll("img").forEach((function(e){"img3"==e.id&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 8:e.next=11;break;case 10:return e.abrupt("return",v.a.storage().ref(void 0));case 11:console.log("ends now");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchImage()}},{key:"render",value:function(){var e="".concat(this.microblogData.name),t="@".concat(this.microblogData.name),n=this.microblogData.image;return r.a.createElement(oe,{name:e,handle:t,image:n,submitMicroblog:this.submitMicroblog,addTopic:this.addTopic,addTopicsId:this.addTopicsId,showTopicsId:this.showTopicsId,contentId:this.contentId})}}]),t}(r.a.Component),we=(n(335),n(336),n(156)),ye=n.n(we),Oe=n(155),xe=n.n(Oe),je=n(154),Ie=n.n(je),Be=(n(337),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).onTextChanged=function(e){var t=n.props.items,a=e.target.value,r=[];if(a.length>0){var s=new RegExp("^".concat(a),"i");r=t.sort().filter((function(e){return s.test(e)}))}n.setState((function(){return{suggestions:r,text:a}}))},n.state={suggestions:[],text:"",onFocus:!1,clickoption:!1},n.searchForUser=n.searchForUser.bind(Object(w.a)(n)),n.checkIfFocused=n.checkIfFocused.bind(Object(w.a)(n)),n.changeFocus=n.changeFocus.bind(Object(w.a)(n)),n.keyPress=n.keyPress.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"suggestionSelected",value:function(e){this.setState((function(){return{text:e,suggestions:[],onFocus:!1,clickoption:!0}}))}},{key:"renderSuggestions",value:function(){var e=this,t=this.state.suggestions;return 0===t.length?null:r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t,onMouseDown:function(){return e.suggestionSelected(t)}},t)})))}},{key:"searchForUser",value:function(){var e,t=this.state.text,n=this.props.items,a=this.props.username,r=!1;for(e in n)if(n[e]==t){r=!0;break}r?this.props.history.push({pathname:"/redirecttoaccount",state:{userData:this.userData,text:t}}):t!=a?Object(M.b)("Username not found!"):Object(M.b)("You can visit your profile page by clicking the profile button")}},{key:"checkIfFocused",value:function(){console.log("checking focus"),this.setState((function(){return{onFocus:!1}}));0==this.state.clickoption&&this.setState((function(){return{suggestions:[]}})),this.setState((function(){return{onFocus:!1,clickoption:!1}}))}},{key:"changeFocus",value:function(){this.setState((function(){return{onFocus:!0}}))}},{key:"keyPress",value:function(e){13==e.keyCode&&this.searchForUser()}},{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",null,r.a.createElement("div",{className:"AutoCompleteSearchBar",onBlur:this.checkIfFocused},r.a.createElement("input",{value:e,onClick:this.changeFocus,onKeyDown:this.keyPress,onChange:this.onTextChanged,type:"text"}),r.a.createElement("button",{onClick:this.searchForUser},"Search"),this.renderSuggestions()))}}]),t}(r.a.Component)),De=Object(c.f)(Be),Ce=Object(se.a)((function(e){return{root:{color:e.palette.getContrastText(ee.a[500]),backgroundColor:"#1F3648"}}}))(Z.a),Te=(Object(re.a)({palette:{primary:$.a,secondary:{main:"#1F3648"}}}),function(e){var t=e.getAllUsernames,n=e.getCurrentUsername,a=(e.goLogout,e.goToProfile),s=e.goToChat,o=e.goToLanding;return r.a.createElement("div",{className:"inner-body"},r.a.createElement("label",{className:"top-bar-twisster"},"Twistter"),r.a.createElement("div",null,r.a.createElement(De,{items:t,username:n})),r.a.createElement("div",{className:"top-bar-chat"},r.a.createElement(Ce,{size:"medium","aria-label":"chat",id:"chat",onClick:s,className:"top-bar-chat-btn"},r.a.createElement(Ie.a,{fontSize:"large"}))),r.a.createElement("div",{className:"top-bar-profile"},r.a.createElement(Ce,{size:"medium","aria-label":"profile",id:"profile",onClick:a},r.a.createElement(xe.a,{fontSize:"large"}))),r.a.createElement("div",{className:"top_bar_home"},r.a.createElement(Ce,{size:"medium","aria-label":"home",id:"Home",onClick:o},r.a.createElement(ye.a,{fontSize:"large"}))))}),Ae=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).goLogout=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.auth().signOut().then((function(){console.log("Signout succesful")})).catch((function(e){console.log("Error")})),n.props.history.push({pathname:"/login"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.userData=e.userData,n.goLogout=n.goLogout.bind(Object(w.a)(n)),n.goToProfile=n.goToProfile.bind(Object(w.a)(n)),n.goToChat=n.goToChat.bind(Object(w.a)(n)),n.goToLanding=n.goToLanding.bind(Object(w.a)(n)),n.getAllUsernames=n.getAllUsernames.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"goToProfile",value:function(){this.props.history.push({pathname:"/redirecttoaccount",state:{userData:this.userData}})}},{key:"goToChat",value:function(){this.props.history.push({pathname:"/chat",state:{topBar:!0}})}},{key:"goToLanding",value:function(){this.props.history.push({pathname:"/landing",state:{userData:this.userData}})}},{key:"getAllUsernames",value:function(){var e=[];v.a.database().ref().once("value",(function(t){var n,a=t.child("mapUsernameToEmail").val();for(n in a)a[n]!=v.a.auth().currentUser.email&&e.push(n)}));return e}},{key:"getCurrentUsername",value:function(){var e;v.a.database().ref().once("value",(function(t){var n,a=t.child("mapUsernameToEmail").val();for(n in a)if(a[n]==v.a.auth().currentUser.email){e=n;break}}));return e}},{key:"render",value:function(){return null!==v.a.auth().currentUser?r.a.createElement("div",{className:"top-bar"},r.a.createElement(Te,{getAllUsernames:this.getAllUsernames(),getCurrentUsername:this.getCurrentUsername(),goLogout:this.goLogout,goToProfile:this.goToProfile,goToChat:this.goToChat,goToLanding:this.goToLanding})):null}}]),t}(r.a.Component),Me=Object(c.f)(Ae),Le=(n(338),n(390)),Pe=n(158),Fe=n.n(Pe),Se=n(157),Ne=n.n(Se),qe=(n(145),function(e){return r.a.createElement("div",{className:"topic"},e.text)}),Re=function(e){return r.a.createElement("div",{className:"topic-highlighted"},e.text)},Qe=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).topic=new Object,n.topic.text=e.data,n.topic.highlight=e.highlight,n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e="".concat(this.topic.text);return this.topic.highlight?r.a.createElement(Re,{text:e}):r.a.createElement(qe,{text:e})}}]),t}(r.a.Component),He=(n(339),function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.children)}}]),t}(r.a.Component)),ze=(n(340),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).createTopics=function(e){for(var t=[],a=0;a<e.length;a++){n.num++;var s=!1;e[a].length>2&&"/h"==e[a].substr(0,2)&&(e[a]=e[a].substr(2,e[a].length-2),s=!0),t.push(r.a.createElement(Qe,{key:a,data:e[a],highlight:s}))}return r.a.createElement("div",null,t)},n.topics=e.topics,n.num=0,n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return null!=this.props.topics?r.a.createElement("div",null,r.a.createElement(He,null,this.createTopics(this.props.topics))):null}}]),t}(r.a.Component)),Ke=Object(se.a)((function(e){return{badge:{right:-3,border:"0px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(Le.a),Ge=function(e){e.image;var t=e.theid;return console.log(t),r.a.createElement("img",{id:t,alt:"Logo",className:"picture"})},Ve=function(e){return r.a.createElement("div",{className:"handle"},e.handle)},Je=function(e){return r.a.createElement("div",{className:"name"},e.name)},Xe=function(e){return r.a.createElement("div",{className:"tweet"},e.tweet)};Object(se.a)((function(e){return{root:{margin:"0px 12px 20px"},input:{color:"white"}}}))(_.a);var We=function(e){return r.a.createElement(V,null,r.a.createElement("div",{className:"inner-body",style:{height:"100%"}},r.a.createElement(Ge,{image:e.image,theid:e.unitid}),r.a.createElement("div",{className:"body",style:{width:"80%"}},r.a.createElement("div",{className:"inner-body",style:{height:"60px"}},r.a.createElement(Je,{name:e.name}),r.a.createElement(Ve,{handle:e.handle})),r.a.createElement("div",{className:"body"},r.a.createElement(Xe,{tweet:e.tweet}),r.a.createElement("div",{className:"inner-body"},r.a.createElement(ze,{topics:e.topics}),r.a.createElement("br",null),r.a.createElement(Z.a,{"aria-label":"cart",onClick:e.likeButtonClicked},r.a.createElement(Ke,{badgeContent:e.numLikes,color:"primary"},e.isLiked?r.a.createElement(Ne.a,{color:"secondary",fontSize:"large"}):r.a.createElement(Fe.a,{color:"secondary",fontSize:"large"})))),r.a.createElement("div",{className:"quote"},r.a.createElement("button",{class:"quote-button",onClick:e.quoteButtonClicked},e.quoteButtonText))))))},Ye=(n(341),function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"quoting-tweet-body"},this.props.children)}}]),t}(r.a.Component)),Ze=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).microblogData=new Object,void 0==t.counter&&(t.counter=0),n.counter=t.counter,n.blogid="blogid"+n.counter,t.counter++,n.userLikes=e.userLikes,n.microblogData.name=e.username,n.microblogData.handle=e.username,n.microblogData.tweet=e.data.content,n.microblogData.image="props.image",n.microblogData.id=e.id,n.fetchImage=n.fetchImage.bind(Object(w.a)(n)),n.likeButtonClicked=n.likeButtonClicked.bind(Object(w.a)(n)),n.microblogData.topics=e.data.topics,n.microblogData.numLikes=e.numLikes,n.state={like:e.liked,quote:!1},n.numOfMicroblog=e.numOfMicroblog,n.quoteButtonClicked=n.quoteButtonClicked.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"likeButtonClicked",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=v.a.auth().currentUser){e.next=3;break}return Object(M.b)("Cannot like post"),e.abrupt("return");case 3:return e.next=5,Ue.retrieveUsername(v.a.auth().currentUser.uid);case 5:if(t=e.sent,!this.state.like){e.next=13;break}return this.microblogData.numLikes--,e.next=10,Ue.unlikeMicroblog(this.microblogData,t);case 10:this.setState({like:!1}),e.next=17;break;case 13:return this.microblogData.numLikes++,e.next=16,Ue.likeMicroblog(this.microblogData,t);case 16:this.setState({like:!0});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchImage",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchImage running"),e.next=3,v.a.database().ref().once("value",(function(e){console.log(s.microblogData.name),a=e.child("mapUsernameToUID").child(s.microblogData.name).val(),t=e.child("users").child(a).child("picture").val(),null!=v.a.auth().currentUser&&(n=e.child("users").child(v.a.auth().currentUser.uid).child("picture").val()),console.log("was here hello world")}));case 3:return console.log(t),console.log(n),r=this.blogid,e.next=9,v.a.storage().ref().child(t).getDownloadURL().then((function(e){var t=e;console.log(r),document.querySelectorAll("img").forEach((function(e){e.id==r&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 9:return e.next=11,v.a.storage().ref().child(n).getDownloadURL().then((function(e){var t=e;document.querySelectorAll("img").forEach((function(e){"img3"==e.id&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 11:e.next=14;break;case 13:return e.abrupt("return",v.a.storage().ref(t));case 14:console.log("ends now");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"quoteButtonClicked",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=v.a.auth().currentUser){e.next=3;break}return Object(M.b)("Cannot Quote"),e.abrupt("return");case 3:return Object(M.b)("Quote"),e.next=6,Ue.retrieveUsername(v.a.auth().currentUser.uid);case 6:this.loggedInUser=e.sent,this.state.quote?this.setState({quote:!1}):this.setState({quote:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchImage()}},{key:"render",value:function(){this.state.like;var e=this.state.like,t="".concat(this.microblogData.name),n="@".concat(this.microblogData.name),a=this.microblogData.tweet,s=this.microblogData.topics,o=this.microblogData.numLikes,c=this.likeButtonClicked,i=this.quoteButtonClicked;return this.state.quote?r.a.createElement("div",null,r.a.createElement(Ye,null,r.a.createElement(We,{key:this.microblogData.key,name:t,handle:n,image:ve.nullLiteral,unitid:this.blogid,tweet:a,likeButtonClicked:c,isLiked:e,numLikes:o,quoteButtonText:"Quote",quoteButtonClicked:i,topics:s}),r.a.createElement(Ee,{username:this.loggedInUser,microblogPosted:this.microblogPosted,isQuoted:!0,quotedMicroblog:this.microblogData,numOfMicroblog:this.numOfMicroblog,image:ve.nullLiteral}))):r.a.createElement(We,{key:this.microblogData.key,name:t,handle:n,image:ve.nullLiteral,unitid:this.blogid,tweet:a,likeButtonClicked:c,isLiked:e,numLikes:o,quoteButtonText:"Quote",quoteButtonClicked:i,topics:s})}}]),t}(r.a.Component),_e=n(164),$e=(n(342),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).quotedContent=e.quotedContent,n.quotedTopics=e.quotedTopics,n.quotedUserLikes=e.quotedUserLikes,n.quotedNumLikes=e.quotedNumLikes,n.quotedUser=e.quotedUser,n.profilePicture="profilePicture",n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"quoted-microblog"},r.a.createElement("div",{className:"quoted-body"},r.a.createElement("div",{className:"inner-body-quoted"},r.a.createElement("img",{src:this.profilePicture,alt:"Logo",className:"picture"}),r.a.createElement("div",{className:"quoted-name"},this.quotedUser)),r.a.createElement("div",{className:"quoted-content"},this.quotedContent)),Object(_e.a)(Object(f.a)(t.prototype),"render",this).call(this),r.a.createElement(ze,{topics:this.quotedTopics}),r.a.createElement("br",null))}}]),t}(Ze)),et=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).createMicroblogs=function(e,t){for(var a=[],s=0;s<e.length;s++){var o=!1;void 0!==e[s].userLikes&&e[s].userLikes.includes(n.loggedInUser)&&(o=!0),e[s].quote?a.push(r.a.createElement($e,{key:s,numOfMicroblog:s,data:e[s],username:e[s].user,id:e[s].id,liked:o,numLikes:e[s].numLikes,quotedContent:e[s].quotedContent,quotedNumLikes:e[s].numLikes,quotedTopics:e[s].quotedTopics,quotedUserLikes:e[s].quotedUserLikes,quotedUser:e[s].quotedUser})):a.push(r.a.createElement(Ze,{key:s,numOfMicroblog:s,data:e[s],username:e[s].user,id:e[s].id,liked:o,numLikes:e[s].numLikes}))}return r.a.createElement("div",{className:"body"},a)},n.microblogs=e.microblogs,n.username=e.username,n.loggedInUser=e.loggedInUser,n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return null!=this.props.microblogs?r.a.createElement("div",{className:"body"},this.createMicroblogs(this.props.microblogs,this.username)):null}}]),t}(r.a.Component),tt=n(50),nt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={loaded:!1},n.editMode=!1,n.microblogPosted=n.microblogPosted.bind(Object(w.a)(n)),n.getAllUsernames=n.getAllUsernames.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"microblogPosted",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMicroblogs();case 2:this.setState({loaded:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMicroblogs",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(M.b)("Microblog posted!"),e.next=3,Ue.getMicroblogsForUserTimeline(this.userData.username);case 3:this.microblogs=e.sent,Object(tt.resolve)("done");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return t.props.history.push({pathname:"/login"}),e.abrupt("return",null);case 5:return!0,n=v.a.auth().currentUser,e.next=9,Ue.getUserdataOfUser(n.uid,!0);case 9:return t.userData=e.sent,e.next=12,Ue.getMicroblogsForUserTimeline(t.userData.username);case 12:t.microblogs=e.sent,t.setState({loaded:!0});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"goToProfile",value:function(){this.props.history.push({pathname:"/profile",state:{userData:this.userData}})}},{key:"getAllUsernames",value:function(){var e=[];v.a.database().ref().once("value",(function(t){var n,a=t.child("mapUsernameToEmail").val();for(n in a)a[n]!=v.a.auth().currentUser.email&&e.push(n)}));return e}},{key:"render",value:function(){return this.state.loaded?r.a.createElement("div",{className:"main-body"},r.a.createElement(Me,{userData:this.userData}),r.a.createElement(Ee,{username:this.userData.username,microblogPosted:this.microblogPosted,quotedMicroblog:!1}),r.a.createElement(et,{microblogs:this.microblogs,username:this.userData.username})):null}}]),t}(a.Component),at=Object(c.f)(nt),rt=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(at,null))}}]),t}(r.a.Component),st=n(163),ot=[],ct=function(e){var t=e.type,n=void 0===t?"checkbox":t,a=e.name,s=e.checked,o=e.onChange;return r.a.createElement("input",{type:n,name:a,checked:s,onChange:o})},it=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={checkedItems:new Map,loaded:!1},n.username=e.username,n.handleChange=n.handleChange.bind(Object(w.a)(n)),n.save=n.save.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.checked;this.setState((function(e){return{checkedItems:e.checkedItems.set(t,n)}}))}},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.getFollowedAndUnfollowedTopics(this.username);case 2:for(this.topics=e.sent,ot.length=0,t=0;t<this.topics.followedTopicsList.length;t++)!0,n=this.topics.followedTopicsList[t],a=this.topics.followedTopicsList[t]+""+t,r={name:n,key:a,label:"Check Box "+t},this.state.checkedItems.set(n,!0),ot.push(r);for(t=0;t<this.topics.unfollowedTopics.length;t++)!1,s=this.topics.unfollowedTopics[t],o=this.topics.unfollowedTopics[t]+""+t,c={name:s,key:o,label:"Check Box "+t},this.state.checkedItems.set(s,!1),ot.push(c);this.setState({loaded:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,o,c,i,u,d,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("REACHED HERE"),t=[],n=[],a=!0,r=!1,s=void 0,e.prev=6,o=this.state.checkedItems.entries()[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)i=c.value,u=Object(st.a)(i,2),d=u[0],h=u[1],console.log(d,h),!0===h?t.push(d):!1===h&&n.push(d);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,s=e.t0;case 14:e.prev=14,e.prev=15,a||null==o.return||o.return();case 17:if(e.prev=17,!r){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,Ue.addAndRemoveTopicsFromFollowedUser(this.username,t,n);case 24:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loaded?ot.length>0?r.a.createElement(r.a.Fragment,null,ot.map((function(t){return r.a.createElement("label",{key:t.key},t.name,r.a.createElement(ct,{name:t.name,checked:e.state.checkedItems.get(t.name),onChange:e.handleChange}))})),r.a.createElement("button",{type:"button",onClick:this.save},"Save")):r.a.createElement(r.a.Fragment,null,ot.map((function(t){return r.a.createElement("label",{key:t.key},t.name,r.a.createElement(ct,{name:t.name,checked:e.state.checkedItems.get(t.name),onChange:e.handleChange}))}))):null}}]),t}(r.a.Component),lt=(n(345),function(e){e.image;var t=e.changeProfPic,n=e.deletePic,a=e.name;return console.log(a),r.a.createElement("div",null,r.a.createElement("img",{id:"img1",height:"125",width:"125"}),r.a.createElement("div",{className:"hold_text"},r.a.createElement("text",{className:"user_name",thename:a}," ",a," ")),r.a.createElement("div",null,r.a.createElement("button",{onClick:t},"Change profile picture ")),r.a.createElement("div",{className:"del_bt"},r.a.createElement("button",{onClick:n},"Delete Picture / Change to default")))}),ut=function(e){e.image;var t=e.changeProfPic;return r.a.createElement("div",null,r.a.createElement("img",{id:"img1",height:"125",width:"125"}),r.a.createElement("div",null,r.a.createElement("button",{onClick:t},"Change profile picture"),r.a.createElement("input",{type:"file",name:"input",id:"input",onChange:t})))},dt=function(e){var t=e.image;return r.a.createElement("div",null,r.a.createElement("img",{src:t,height:"125",width:"125"}))},ht=function(e){var t=e.userProfile;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h1",{id:"welcome"}),r.a.createElement("br",null),r.a.createElement("label",null,"Followers:"),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers),r.a.createElement("br",null),r.a.createElement("label",null,"Following:"),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"followbutton",onClick:t.followUser},"Follow"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"directmessagebutton",onClick:t.dmUser},"Direct Message"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",id:"blockbutton",onClick:t.blockUser},"Block"),r.a.createElement("br",null),r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("br",null)))},mt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).uploadImage=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("upLoadImage running"),a=document.getElementById("input"),null!=(r=a.files[0])&&(v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("picture").set(n.username),v.a.storage().ref().child(n.username).put(r).then((function(e){console.log("file uploaded")})).then((function(e){n.toUpload=!1,n.forceUpdate()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deletePicture=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("deletePicture running"),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("picture").set("default.jpg").then((function(e){n.forceUpdate()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.username=n.props.strangername,n.visiting=n.props.visiting,n.strangername=n.props.strangername,n.toUpload=!1,n.upLoadImage=n.uploadImage.bind(Object(w.a)(n)),n.fetchImage=n.fetchImage.bind(Object(w.a)(n)),n.changePic=n.changePic.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"fetchImage",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchImage running"),e.next=3,v.a.database().ref().once("value",(function(e){n.username=e.child("mapUIDtoUsername").child(v.a.auth().currentUser.uid).val(),t=e.child("users").child(v.a.auth().currentUser.uid).child("picture").val(),console.log("was here hello world")}));case 3:return console.log(t),e.next=7,v.a.storage().ref().child(t).getDownloadURL().then((function(e){var t=e;document.querySelectorAll("img").forEach((function(e){"img1"==e.id&&(e.src=t)}))})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 7:e.next=10;break;case 9:return e.abrupt("return",v.a.storage().ref(t));case 10:console.log("ends now");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"visiterImage",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){n=e.child("mapUsernameToUID").child(r.strangername).val(),console.log("helloworld"),console.log(r.strangername),a=e.child("users").child(n).child("picture").val()}));case 2:return console.log("Yupdupbug"),console.log(a),e.next=6,v.a.storage().ref().child(a).getDownloadURL().then((function(e){t=e,document.querySelector("img").src=t})).catch((function(e){switch(e.code){case"storage/object-not-found":console.log("object not found");break;case"storage/unauthorized":console.log("unauthorized");break;case"storage/unknown":console.log("unknown")}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changePic",value:function(){console.log("changePic running"),this.toUpload=!0,this.forceUpdate()}},{key:"render",value:function(){return 0==this.visiting?0==this.toUpload?(console.log("here first"),r.a.createElement("div",null,r.a.createElement(lt,{image:this.fetchImage(),changeProfPic:this.changePic,deletePic:this.deletePicture,name:this.username}))):(console.log("wrong place"),r.a.createElement("div",null,r.a.createElement(ut,{image:this.fetchImage(),changeProfPic:this.upLoadImage}))):r.a.createElement("div",null,r.a.createElement(dt,{image:this.visiterImage()}))}}]),t}(a.Component),ft=Object(c.f)(mt),pt=n(161),gt=n.n(pt),bt=function(e){var t=e.userProfile,n=e.deleteAccount,a=e.submitRestrictDM,s=e.logout;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("button",{onClick:t.editProfile},"Edit"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",style:{marginLeft:"365px"},onClick:n},"Delete account"),r.a.createElement(Z.a,null,r.a.createElement(gt.a,{fontSize:"large",onClick:s}))),r.a.createElement("div",null,r.a.createElement("label",null,"Followers :  "),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers)),r.a.createElement("div",null,r.a.createElement("label",null," Following :  "),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following)),r.a.createElement("div",null,"Restrict direct messages to those you follow: ",r.a.createElement("input",{type:"checkbox",id:"checkRestrictDM",onClick:a})))},vt=function(e){var t=e.userProfile,n=e.deleteAccount,a=e.submitRestrictDM;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",null,"Username:"),r.a.createElement("label",{id:"username"},t.username),r.a.createElement("button",{type:"button",style:{marginLeft:"365px"},onClick:n},"Delete account"),r.a.createElement("br",null),r.a.createElement("label",null,"Followers:"),r.a.createElement("label",{id:"followers"},t.followersAndFollowing.followers),r.a.createElement("br",null),r.a.createElement("label",null,"Following:"),r.a.createElement("label",{id:"following"},t.followersAndFollowing.following),r.a.createElement("br",null),r.a.createElement("label",null,"Bio:"),r.a.createElement("label",{id:"bio"},t.bio),r.a.createElement("br",null),"Restrict direct messages to those you follow: ",r.a.createElement("input",{type:"checkbox",id:"checkRestrictDM",onClick:a}),r.a.createElement("br",null),r.a.createElement("input",{id:"bioTextBox",name:"Bio",type:"bio",placeholder:"New bio"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:t.saveChanges},"Save Changes"),r.a.createElement("br",null)))},kt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).username=e.user.userData.username,n.loggedIn=e.user.userData.loggedIn,n.loggedInViewingOwnProfile=e.user.userData.viewingOwnProfile,n.editProfile=n.editProfile.bind(Object(w.a)(n)),n.deleteAccount=n.deleteAccount.bind(Object(w.a)(n)),n.logout=n.logout.bind(Object(w.a)(n)),n.saveChanges=n.saveChanges.bind(Object(w.a)(n)),n.followOrUnfollowUser=n.followOrUnfollowUser.bind(Object(w.a)(n)),n.directMessageUser=n.directMessageUser.bind(Object(w.a)(n)),n.blockUser=n.blockUser.bind(Object(w.a)(n)),n.submitRestrictDM=n.submitRestrictDM.bind(Object(w.a)(n)),n.renderLoggedInUser=n.renderLoggedInUser.bind(Object(w.a)(n)),n.renderVisitedUser=n.renderVisitedUser.bind(Object(w.a)(n)),n.state={loaded:!1},n.editMode=!1,n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"submitRestrictDM",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==document.getElementById("checkRestrictDM").checked){e.next=16;break}return e.next=3,Ue.getAllUsers(this.username);case 3:return t=e.sent,e.next=6,Ue.getFollowersAndFollowing(this.username);case 6:for(n=e.sent,a=n.following,r=[],s=0;s<t.length;s++)a.includes(t[s])||r.push(t[s]);return e.next=12,Ue.removeBlockedUser(t);case 12:return e.next=14,Ue.addBlockedUser(r);case 14:e.next=28;break;case 16:if(!1!==document.getElementById("checkRestrictDM").checked){e.next=28;break}return e.next=19,Ue.getAllUsers(this.username);case 19:return t=e.sent,e.next=22,Ue.getFollowersAndFollowing(this.username);case 22:for(n=e.sent,a=n.following,r=[],s=0;s<t.length;s++)a.includes(t[s])||r.push(t[s]);return e.next=28,Ue.removeBlockedUser(r);case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(){this.editMode=!0,this.setState({editMode:1})}},{key:"deleteAccount",value:function(){this.loggedIn=!1,this.props.history.push({pathname:"/DeleteAccount"})}},{key:"logout",value:function(){v.a.auth().signOut().then((function(){console.log("Signout succesful")})).catch((function(e){console.log("Error")})),this.props.history.push({pathname:"/login"})}},{key:"saveChanges",value:function(){var e=document.getElementById("bioTextBox").value;Ue.postCurrentUserBio(e),this.editMode=!1,this.setState({mustUpdate:1})}},{key:"followOrUnfollowUser",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Follow"!=document.getElementById("followbutton").textContent){e.next=21;break}return e.next=3,Ue.followUserIAmViewing(this.username);case 3:return e.next=5,Ue.getFollowersAndFollowingForCurrentUser();case 5:return t=e.sent,n=t.following,e.next=9,Ue.getBlockedUser();case 9:for(a=e.sent,r=!0,s=0;s<a.length;s++)n.includes(a[s])&&(r=!1);if(0===a.length||!0!==r){e.next=17;break}return(o=[]).push(this.username),e.next=17,Ue.removeBlockedUser(o);case 17:document.getElementById("followbutton").textContent="Unfollow",this.setState({follow:0}),e.next=40;break;case 21:return e.next=23,Ue.unfollowUserIAmViewing(this.username);case 23:return e.next=25,Ue.getFollowersAndFollowingForCurrentUser();case 25:return t=e.sent,n=t.following,e.next=29,Ue.getBlockedUser();case 29:for(a=e.sent,r=!0,s=0;s<a.length;s++)n.includes(a[s])&&(r=!1);if(0===a.length||!0!==r){e.next=37;break}return(a=[]).push(this.username),e.next=37,Ue.addBlockedUser(a);case 37:document.getElementById("followbutton").textContent="Unfollow",this.setState({follow:1}),document.getElementById("followbutton").textContent="Follow";case 40:return e.next=42,Ue.getFollowersAndFollowing(this.username);case 42:this.followersAndFollowing=e.sent,this.userProfile.followersAndFollowing=this.followersAndFollowing,this.setState({mustUpdate:1});case 45:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"directMessageUser",value:function(){this.props.history.push({pathname:"/chat",state:{dmUsername:this.username,topBar:!1}})}},{key:"blockUser",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Block"!==document.getElementById("blockbutton").textContent){e.next=13;break}return e.next=3,Ue.getBlockedUser();case 3:if(e.sent.includes(this.username)){e.next=9;break}return(t=[]).push(this.username),e.next=9,Ue.addBlockedUser(t);case 9:document.getElementById("blockbutton").textContent="Unblock",document.getElementById("directmessagebutton").disabled=!0,e.next=24;break;case 13:if("Unblock"!==document.getElementById("blockbutton").textContent){e.next=24;break}return e.next=16,Ue.getBlockedUser();case 16:if(!e.sent.includes(this.username)){e.next=22;break}return(t=[]).push(this.username),e.next=22,Ue.removeBlockedUser(t);case 22:document.getElementById("blockbutton").textContent="Block",document.getElementById("directmessagebutton").disabled=!1;case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,o,c=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userProfile=new Object,this.userProfile.saveChanges=this.saveChanges,this.userProfile.editProfile=this.editProfile,this.userProfile.followUser=this.followOrUnfollowUser,this.userProfile.dmUser=this.directMessageUser,this.userProfile.blockUser=this.blockUser,e.next=8,this.downloadUserProfile(this.userProfile);case 8:if(this.setState({loaded:!0}),this.loggedIn){e.next=14;break}return document.getElementById("followbutton").disabled=!0,document.getElementById("directmessagebutton").disabled=!0,document.getElementById("blockbutton").disabled=!0,e.abrupt("return");case 14:if(!0!==this.loggedInViewingOwnProfile){e.next=25;break}return e.next=17,Ue.getFollowersAndFollowing(this.username);case 17:return t=e.sent,n=t.following,e.next=21,Ue.getBlockedUser();case 21:for(a=e.sent,r=!0,s=0;s<a.length;s++)n.includes(a[s])&&(r=!1);!1===r||0===a.length?document.getElementById("checkRestrictDM").checked=!1:!0===r&&(document.getElementById("checkRestrictDM").checked=!0);case 25:return e.next=27,Ue.getBlockedUser();case 27:return a=e.sent,e.next=30,Ue.getUsersBlockedFrom();case 30:if(o=e.sent,!1===this.loggedInViewingOwnProfile&&(void 0!==o&&0!==o.length&&o.includes(this.username)?(document.getElementById("directmessagebutton").disabled=!0,void 0!==a&&0!==a.length&&a.includes(this.username)?document.getElementById("blockbutton").textContent="Unblock":document.getElementById("blockbutton").textContent="Block"):void 0!==a&&0!==a.length&&a.includes(this.username)?(document.getElementById("directmessagebutton").disabled=!0,document.getElementById("blockbutton").textContent="Unblock"):(document.getElementById("directmessagebutton").disabled=!1,document.getElementById("blockbutton").textContent="Block")),!1!==this.loggedInViewingOwnProfile){e.next=35;break}return e.next=35,v.a.database().ref().once("value",(function(e){var t=e.child("mapUIDtoUsername").val()[v.a.auth().currentUser.uid];c.userProfile.followersAndFollowing.followers.includes(t)&&(document.getElementById("followbutton").textContent="Unfollow")}));case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.downloadUserProfile(this.userProfile);case 2:this.props.userID!==t.userID&&this.fetchData(this.props.userID),1==this.state.mustUpdate&&this.setState({mustUpdate:0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadUserProfile",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.username=this.username,e.next=3,Ue.getBio(this.username);case 3:return this.bio=e.sent,t.bio=this.bio,e.next=7,Ue.getFollowersAndFollowing(this.username);case 7:return this.followersAndFollowing=e.sent,t.followersAndFollowing=this.followersAndFollowing,e.next=11,Ue.getMicroblogsForUser(this.username);case 11:if(this.microblogs=e.sent,t.microblogs=this.microblogs,null===(n=v.a.auth().currentUser)){e.next=20;break}return e.next=17,Ue.getUserdataOfUser(n.uid,!0);case 17:this.userData=e.sent,e.next=23;break;case 20:return e.next=22,Ue.getUserdataOfUserDiff(this.username,!0);case 22:this.userData=e.sent;case 23:Object(tt.resolve)("done");case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loaded?this.loggedIn&&this.loggedInViewingOwnProfile?this.renderLoggedInUser(this.userProfile,this.deleteAccount,this.submitRestrictDM,this.logout):this.renderVisitedUser(this.userProfile):null}},{key:"renderLoggedInUser",value:function(e,t,n,a){return this.editMode?r.a.createElement("div",null,r.a.createElement(vt,{userProfile:e,deleteAccount:t,submitRestrictDM:n}),r.a.createElement(et,{microblogs:e.microblogs,username:e.username,loggedInUser:this.userData.username})):void 0==e.microblogs?r.a.createElement("div",null,r.a.createElement(ft,{strangername:this.username,visiting:!1}),r.a.createElement(bt,{userProfile:e,deleteAccount:t,submitRestrictDM:n,logout:a})):r.a.createElement("div",null,r.a.createElement(ft,{strangername:this.username,visiting:!1}),r.a.createElement(bt,{userProfile:e,deleteAccount:t,submitRestrictDM:n,logout:a}),r.a.createElement(et,{microblogs:e.microblogs,username:e.username,loggedInUser:this.userData.username}))}},{key:"renderVisitedUser",value:function(e){return void 0===e?r.a.createElement("div",null,r.a.createElement(ft,{strangername:this.username,visiting:!0}),r.a.createElement(ht,{userProfile:e})):(console.log("Reached here 2"),r.a.createElement("div",null,r.a.createElement(ft,{strangername:this.username,visiting:!0}),r.a.createElement(ht,{userProfile:e}),r.a.createElement(et,{microblogs:e.microblogs,username:e.username,loggedInUser:this.userData.username})))}}]),t}(r.a.Component),Ut=Object(c.f)(kt),Et=function(e){return r.a.createElement("div",null,r.a.createElement(Ut,{user:e}),r.a.createElement("form",null))},wt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).goLogIn=n.goLogIn.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"goLogIn",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.history.push({pathname:"/login"});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("form",null,r.a.createElement("button",{onClick:this.goLogIn},"Go to login page")))}}]),t}(a.Component),yt=Object(c.f)(wt),Ot=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).localProps=e,n.state={loaded:!1},n.doesNotExist=!1,n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.doesNotExist=!1,e.next=3,this.setUsername();case 3:return e.next=5,Ue.getAllOtherUsers();case 5:t=e.sent,void 0!==this.username&&(t.includes(this.username)||(this.doesNotExist=!0)),this.setState({loaded:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUsername",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var n=e.child("mapUIDtoUsername").val();if(void 0==v.a.auth().currentUser||null==v.a.auth().currentUser){if("/profile"==t.localProps.location.pathname)return void t.localProps.history.push({pathname:"/login"});t.path=t.localProps.location.pathname,t.username=t.path.substring(9,t.path.length),t.userData=new be(t.username,!1)}else"/profile"!=t.localProps.location.pathname?(t.path=t.localProps.location.pathname,t.username=t.path.substring(9,t.path.length),t.username==n[v.a.auth().currentUser.uid]?t.userData=new be(t.username,!0,!0):t.userData=new be(t.username,!0,!1)):t.userData=new be(n[v.a.auth().currentUser.uid],!0,!0)}));case 2:Object(tt.resolve)("done");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loaded?!1===this.doesNotExist?r.a.createElement("div",null,r.a.createElement(Me,null),r.a.createElement(Et,{userData:this.userData}),r.a.createElement(it,{username:this.username})):r.a.createElement(yt,null):null}}]),t}(r.a.Component),xt=Object(c.f)(Ot),jt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).goToProfile=n.goToProfile.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"goToProfile",value:function(){var e=this.props.location.state.userData,t=this.props.location.state.text;void 0!=t?this.props.history.replace({pathname:"/profile/"+t,state:{userData:e}}):this.props.history.replace({pathname:"/profile",state:{userData:e}})}},{key:"render",value:function(){return r.a.createElement("div",null,this.goToProfile())}}]),t}(r.a.Component),It=Object(c.f)(jt),Bt=function(e){var t=e.onSubmit;return r.a.createElement("div",null,r.a.createElement("h1",null,"User verification"),r.a.createElement("form",{onSubmit:t},r.a.createElement("label",null,"Email/Username",r.a.createElement("input",{name:"email",placeholder:"Email/Username"})),r.a.createElement("label",null,"Password",r.a.createElement("input",{name:"password",type:"password",placeholder:"Password"})),r.a.createElement("button",{type:"submit"},"Delete Account")))},Dt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleLogIn=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,s,o,c,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.target.elements,r=a.email,s=a.password,e.prev=2,o=!1,c=v.a.auth().currentUser.email,i=null,r.value!=c){e.next=12;break}return o=!0,e.next=10,y.database().ref().once("value",(function(e){var t,n=e.child("mapUsernameToEmail").val();for(t in n)if(n[t]==c){i=t;break}}));case 10:e.next=14;break;case 12:return e.next=14,y.database().ref().once("value",(function(e){var t=e.child("mapUsernameToEmail").val();console.log(t[r.value]),void 0!=t[r.value]&&t[r.value]==c&&(i=r.value,o=!0)}));case 14:if(o){e.next=18;break}return Object(M.b)("The Email/Username or Password is incorrect"),Object(M.b)("The Email/Username or Password is incorrect",{containerId:"B"}),e.abrupt("return");case 18:return u=!0,e.next=21,y.auth().signInWithEmailAndPassword(c,s.value).catch((function(){u=!1}));case 21:if(n.user=e.sent,u){e.next=26;break}return Object(M.b)("The Email/Username or Password is incorrect"),Object(M.b)("The Email/Username or Password is incorrect",{containerId:"B"}),e.abrupt("return");case 26:console.log(i),Ue.deleteUserData(i),Object(M.b)("User account deleted"),n.loggedIn=!1,n.props.history.push({pathname:"/login"}),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(2),Object(M.b)(e.t0);case 36:case"end":return e.stop()}}),e,null,[[2,33]])})));return function(t){return e.apply(this,arguments)}}(),n.handleLogIn=n.handleLogIn.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M.a,{enableMultiContainer:!0,containerId:"B",position:M.b.POSITION.TOP_RIGHT}),r.a.createElement(U,null),r.a.createElement(Bt,{onSubmit:this.handleLogIn}))}}]),t}(a.Component),Ct=Object(c.f)(Dt),Tt=(n(346),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages;return r.a.createElement("ul",{id:"messageslist",className:"Messages-list"},t.map((function(t){return e.renderMessage(t)})))}},{key:"renderMessage",value:function(e){var t=e.member,n=e.text,a=this.props.currentMember,s=t.id===a.id?"Messages-message currentMember":"Messages-message";return r.a.createElement("li",{className:s},r.a.createElement("span",{className:"avatar"}),r.a.createElement("div",{className:"Message-content"},r.a.createElement("div",{className:"username"},t.username),r.a.createElement("div",{className:"text"},n)))}}]),t}(a.Component)),At=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({text:""}),this.props.onSendMessage(this.state.text)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Input"},r.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("input",{onChange:function(t){return e.onChange(t)},value:this.state.text,id:"placeholder",type:"text",placeholder:"",autofocus:"true"}),r.a.createElement("button",{id:"send"},"Send")))}}]),t}(a.Component);n(347);function Mt(){return"#"+Math.floor(16777215*Math.random()).toString(16)}var Lt=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={messages:[],member:{username:"ABCD",color:Mt()}},n.onSendMessage=function(e){""!=e&&(v.a.database().ref().once("value",(function(e){var t=e.child("users").child(n.otherUID).child("unseenUsersDM").val();void 0!=t||null!=t?t.includes(n.userData.username)||(t.push(n.userData.username),v.a.database().ref().child("users").child(n.otherUID).child("unseenUsersDM").set(t)):v.a.database().ref().child("users").child(n.otherUID).child("unseenUsersDM").set({0:n.userData.username})})),n.changeButtonColor(n.props.location.state.dmUsername,"orangered"),n.appendMessageFromMe(e,!0),setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200))};return n.userButtonClick=n.userButtonClick.bind(Object(w.a)(n)),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateUserName(),this.getUsernameOfOtherUser(),e.next=4,v.a.database().ref().once("value",(function(e){var t=e.child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").val();if(void 0!=t||null!=t)for(var n=0;n<Object.keys(t).length;n++)r.addButton(Object.keys(t)[n]);var a=e.child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").val();if(void 0!=a||null!=a)for(var s=0;s<a.length;s++)r.changeButtonColor(a[s],"#fff000")}));case 4:for(t=document.getElementsByTagName("button"),n=0,a=t.length;n<a;n++)"Send"!=t[n].innerHTML&&"Search"!=t[n].innerHTML&&"profile"!=t[n].id&&"Home"!=t[n].id&&"chat"!=t[n].id&&t[n].addEventListener("click",(function(e){r.userButtonClick(e.toElement.id)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addButton",value:function(e){var t=document.getElementById("userlist").appendChild(document.createElement("button"));t.id=e,t.innerHTML=e,t.outerHTML=t.outerHTML+"<br></br>",console.log("testcolor"),t.style.background="#ff0000"}},{key:"changeButtonColor",value:function(e,t){var n=this;if(null==(a=document.getElementById(e))){var a;console.log("add new button"),(a=document.getElementById("userlist").appendChild(document.createElement("button"))).id=e,a.innerHTML=e,a.outerHTML=a.outerHTML+"<br></br>",console.log(t),document.getElementById(e).style.backgroundColor=t;for(var r=document.getElementsByTagName("button"),s=0,o=r.length;s<o;s++)r[s].innerHTML==e&&r[s].addEventListener("click",(function(e){console.log("testclick"),n.userButtonClick(e.toElement.id)}))}else a.style.background=t}},{key:"getUsersBlocked",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,v.a.database().ref().once("value",(function(e){var a=e.child("mapUsernameToUID").val()[t];!0===e.child("users").child(a).hasChild("blockedUsers")&&(n=e.child("users").child(a).child("blockedUsers").val())}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"userButtonClick",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")){e.next=2;break}return e.abrupt("return");case 2:return this.props.location.state.dmUsername=t,e.next=5,Ue.getBlockedUser();case 5:return n=e.sent,e.next=8,this.getUsersBlocked(t);case 8:a=e.sent,n.includes(t)?(this.setPlaceholderInputBar("You are blocking "+t),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):a.includes(this.userData.username)?(this.setPlaceholderInputBar("You are being blocked by "+t),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):(this.setPlaceholderInputBar("Send message to "+t),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1),console.log("userbuttonclick() "+t),this.props.location.state.dmUsername=t,this.props.location.state.topBar=!1,this.currentRetrievedData=null,this.changeButtonColor(t,"orangered"),this.removeUserFromUnseenList(t),this.getUsernameOfOtherUser(),this.fillWithPreviousMessages(),this.listenToPersistantMessages(),this.listenToUsersBlockedFrom();case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeUserFromUnseenList",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.database().ref().once("value",(function(e){var n=e.child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").val();void 0==n&&null==n||-1!=n.indexOf(t)&&(n.splice(n.indexOf(t),1),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").set(n))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsernameOfOtherUser",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.database().ref().once("value",(function(e){var n=e.child("mapUsernameToUID").val()[t.props.location.state.dmUsername];t.otherUID=n}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUserName",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")){e.next=2;break}return e.abrupt("return");case 2:v.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return t.props.history.push({pathname:"/login"}),e.abrupt("return",null);case 5:return!0,n=v.a.auth().currentUser,e.next=9,Ue.getUserdataOfUser(n.uid,!0);case 9:t.userData=e.sent,t.state.member.username=t.userData.username,t.state.member.id=t.userData.username,void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")&&(0==t.props.location.state.topBar?(t.fillWithPreviousMessages(),t.listenToPersistantMessages(),t.setPlaceholderInputBar("Send message to "+t.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!1,document.getElementById("send").disabled=!1,t.listenToUsersBlockedFrom()):(t.setPlaceholderInputBar("To send a message, click on a username"),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0),t.listenToUnseenUsersDM());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-body"},r.a.createElement(Me,{userData:this.userData}),r.a.createElement("div",{className:"inner-body"},r.a.createElement("div",{className:"body",style:{minWidth:"300px"}},r.a.createElement("ul",{id:"userlist"})),r.a.createElement("div",{className:"body",style:{width:"800px",height:"600px"}},r.a.createElement(Tt,{messages:this.state.messages,currentMember:this.state.member}),r.a.createElement(At,{onSendMessage:this.onSendMessage}))))}},{key:"setPlaceholderInputBar",value:function(e){void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")&&(document.getElementById("placeholder").placeholder=e)}},{key:"fillWithPreviousMessages",value:function(){var e=this;void 0!=document.getElementById("messageslist")&&null!=document.getElementById("messageslist")&&(document.getElementById("messageslist").innerHTML="",v.a.database().ref().once("value",(function(t){var n=t.child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").child(e.props.location.state.dmUsername).val();if(e.currentRetrievedData=n,void 0!=n||null!=n)for(var a=0;a<n.length;a++){var r=n[a].substr(0,n[a].indexOf(",")),s=n[a].substr(n[a].indexOf(",")+1,n[a].length-1-n[a].indexOf(","));r==e.userData.username?e.appendMessageFromMe(s,!1):e.appendMessageFromOtherUser(s)}setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200)})))}},{key:"appendMessageFromMe",value:function(e,t){var n=this.state.messages;n.push({member:this.state.member,text:e}),this.setState({messages:n}),t&&(void 0==this.currentRetrievedData||null==this.currentRetrievedData?(this.currentRetrievedData=[this.userData.username+","+e],v.a.database().ref().child("users").child(this.otherUID).child("persistantmessages").child(this.userData.username).set({0:this.userData.username+","+e}),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).set({0:this.userData.username+","+e})):(this.currentRetrievedData.push(this.userData.username+","+e),v.a.database().ref().child("users").child(this.otherUID).child("persistantmessages").child(this.userData.username).set(this.currentRetrievedData),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).set(this.currentRetrievedData)))}},{key:"appendMessageFromOtherUser",value:function(e){if(null!=document.getElementById("messageslist")){var t={username:this.props.location.state.dmUsername,color:Mt(),id:this.props.location.state.dmUsername},n=this.state.messages;n.push({member:t,text:e}),this.setState({messages:n}),setTimeout((function(){if(""!=document.getElementById("messageslist").innerHTML){var e=document.getElementById("messageslist");e.scrollTop=e.scrollHeight}}),200)}}},{key:"listenToPersistantMessages",value:function(){var e=this;null!=document.getElementById("messageslist")&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").child(this.props.location.state.dmUsername).on("value",(function(t){v.a.database().ref().once("value",(function(t){if(null!=document.getElementById("messageslist")){var n=t.child("users").child(v.a.auth().currentUser.uid).child("persistantmessages").child(e.props.location.state.dmUsername).val();null!=e.currentRetrievedData&&null!=n&&e.currentRetrievedData[e.currentRetrievedData.length-1]!=n[n.length-1]&&(e.currentRetrievedData=n,void 0==n&&null==n||e.userData.username!=n[n.length-1].substr(0,n[n.length-1].indexOf(","))&&e.appendMessageFromOtherUser(n[n.length-1].substr(n[n.length-1].indexOf(",")+1,n[n.length-1].length-1-n[n.length-1].indexOf(","))))}}))}))}},{key:"listenToUsersBlockedFrom",value:function(){var e=this;null!=document.getElementById("messageslist")&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("usersBlockedFrom").on("value",(function(t){v.a.database().ref().once("value",function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=document.getElementById("messageslist")){t.next=2;break}return t.abrupt("return");case 2:if(a=n.child("users").child(v.a.auth().currentUser.uid).child("usersBlockedFrom").val(),r=n.child("users").child(v.a.auth().currentUser.uid).child("blockedUsers").val(),void 0!=a&&null!=a||void 0!=r&&null!=r){t.next=10;break}return e.setPlaceholderInputBar("Send message to "+e.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1,t.abrupt("return");case 10:return t.next=12,Ue.getBlockedUser();case 12:return s=t.sent,t.next=15,e.getUsersBlocked(e.props.location.state.dmUsername);case 15:o=t.sent,s.includes(e.props.location.state.dmUsername)?(e.setPlaceholderInputBar("You are blocking "+e.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):o.includes(e.userData.username)?(e.setPlaceholderInputBar("You are being blocked by "+e.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!0,document.getElementById("send").disabled=!0):(e.setPlaceholderInputBar("Send message to "+e.props.location.state.dmUsername),document.getElementById("placeholder").disabled=!1,document.getElementById("placeholder").focus(),document.getElementById("send").disabled=!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},{key:"listenToUnseenUsersDM",value:function(){var e=this;null!=document.getElementById("messageslist")&&v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").on("value",(function(t){v.a.database().ref().once("value",(function(t){if(null!=document.getElementById("messageslist")){var n=t.child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").val();if(void 0!=n||null!=n)for(var a=0;a<n.length;a++)console.log(e.props.location.state.dmUsername),e.props.location.state.dmUsername!=n[a]?(console.log("listenToUnseenUsersDM changeButtonColor of : "+n[a]),e.changeButtonColor(n[a],"#fff000")):-1!=n.indexOf(e.props.location.state.dmUsername)&&(n.splice(n.indexOf(e.props.location.state.dmUsername),1),v.a.database().ref().child("users").child(v.a.auth().currentUser.uid).child("unseenUsersDM").set(n))}}))}))}}]),t}(a.Component),Pt=Object(c.f)(Lt);M.b.configure();var Ft=function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:P}),r.a.createElement(c.a,{exact:!0,path:"/login",component:P}),r.a.createElement(c.a,{exact:!0,path:"/signup",component:G}),r.a.createElement(c.a,{exact:!0,path:"/landing",component:rt}),r.a.createElement(c.a,{path:"/profile",component:xt}),r.a.createElement(c.a,{path:"/redirecttoaccount",component:It}),r.a.createElement(c.a,{path:"/DeleteAccount",component:Ct}),r.a.createElement(c.a,{path:"/chat",component:Pt}),r.a.createElement(c.a,{component:yt}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var St=n(73);n(348),n(349);o.a.render(r.a.createElement(St.a,null,r.a.createElement(Ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e,t,n){e.exports=n.p+"static/media/twisster_logo.d26fb7f2.png"}},[[172,1,2]]]);
//# sourceMappingURL=main.1ec8ae9f.chunk.js.map